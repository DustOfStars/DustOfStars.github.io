<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>DustOfStars</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Icaurs - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icaurs - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Go ahead, and believe in yourself."><meta property="og:type" content="blog"><meta property="og:title" content="DustOfStars"><meta property="og:url" content="https://dustofstars.github.io/"><meta property="og:site_name" content="DustOfStars"><meta property="og:description" content="Go ahead, and believe in yourself."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://dustofstars.github.io/img/og_image.png"><meta property="article:author" content="Gavin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://dustofstars.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://dustofstars.github.io"},"headline":"DustOfStars","image":["https://dustofstars.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Gavin"},"publisher":{"@type":"Organization","name":"DustOfStars","logo":{"@type":"ImageObject","url":"https://dustofstars.github.io/img/logo.svg"}},"description":"Go ahead, and believe in yourself."}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-72437521-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-72437521-5');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0">
<style>.not-gallery-item { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .not-gallery-item > span { position: relative; z-index: 10; }  .not-gallery-item img, .not-gallery-item .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .not-gallery-item img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .not-gallery-item-fallback { color: inherit; } .not-gallery-item-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="DustOfStars" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="DustOfStars" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-05T13:26:20.000Z" title="4/5/2022, 1:26:20 PM">2022-04-05</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span> / </span><a class="link-muted" href="/categories/%E5%B7%A5%E5%85%B7/vim/">vim</a></span><span class="level-item">4 分钟读完 (大约541个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E5%B7%A5%E5%85%B7/vim/vim%E4%BD%BF%E7%94%A8/">Vim使用</a></p><div class="content"><h1 id="Vim使用"><a href="#Vim使用" class="headerlink" title="Vim使用"></a>Vim使用</h1><p>本周学习了小彭老师的vim教程，很受启发，学习记录在这。</p>
<blockquote>
<p><strong>先放链接：</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1H44y1V7DW?spm_id_from=333.999.0.0" title="小彭老师B站链接">【Vim插件整合包】C++/Python自动补全，模糊查找文件，编译CMake工程等</a></p>
</blockquote>
<ul>
<li>F4  == :wa 保存文件</li>
<li>F5      cmake多文件运行</li>
<li>F7      单文件运行</li>
<li>F8      打开一个外部shell</li>
<li>F8 执行完命令之后，按Ctrl+D退出shell，回到文件中</li>
<li>F9      打开nerdtree</li>
<li>ctrl + T  打开/关闭终端</li>
<li>ctrl + \  ctrl + n 终端进入普通模式，可选中</li>
<li>ctrl + w + “” 在终端中粘贴；如果来自别的寄存器a，则ctrl + w + “a</li>
<li>可视模式按y复制，按p粘贴，按u撤销，按ctrl+r恢复撤销，按x删除单个字符，按dw删除单词，按dd删除行</li>
<li>Z   == ZZ 保存并退出</li>
<li>Q         直接退出所有窗口</li>
<li>F10      快速修改error</li>
<li>ctrl + ww 切换窗口</li>
<li>ctrl + wk 或者 wj 上下切换窗口</li>
<li>:split  和  :vsplit 分割窗口</li>
<li>普通模式 gq 快速修复</li>
<li>普通模式 gf 格式化代码</li>
<li>gd 跳转到定义</li>
<li>gD 跳转到声明</li>
<li>gr 跳转到引用</li>
<li>gy 跳转到类型定义</li>
<li>gI 跳转到函数实现</li>
<li>gn 重命名当前光标下的变量名</li>
<li>g + tab  查找命令表</li>
<li>gci   批量注释和反注释</li>
<li>K  查看当前光标下的symbol的文档</li>
<li>ctrl + i 或者 ctrl + o 光标跳转到上一次、下一次的位置</li>
<li>然后，不同的窗口之间切换，F2 F3</li>
<li>:Git blame 显示每一行的提交信息</li>
<li>空格 + g   打开所有当前git仓库中的文件</li>
<li>空格 + s   相当于git status</li>
<li>空格 + h   显示最近打开过的文件</li>
<li>空格 + b   显示目前已经打开的所有文件</li>
<li>空格 + l    搜索已打开文件中的内容</li>
<li>空格 + o    只在当前文件中搜索</li>
<li>空格 + r   在目前没打开的文件中搜索name</li>
<li>% 跳转到匹配的括号</li>
</ul>
<p>一些可以修改的运行tasks配置：</p>
<ul>
<li>位置： <code>~/.vim/tasks.ini</code></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-01T10:26:29.000Z" title="4/1/2022, 10:26:29 AM">2022-04-01</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP/">NLP</a><span> / </span><a class="link-muted" href="/categories/NLP/Numpy/">Numpy</a></span><span class="level-item">1 分钟读完 (大约217个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP/Numpy/%E5%9F%BA%E7%A1%80%E5%87%86%E5%A4%871-numpy/">基础准备1_Numpy</a></p><div class="content"><h2 id="0-Numpy的随机数"><a href="#0-Numpy的随机数" class="headerlink" title="0. Numpy的随机数"></a>0. Numpy的随机数</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">随机数</span></span><br><span class="line"><span class="string">numpy.random.rand() 产生一个[0,1)之间的随机数, 包含0不包含1</span></span><br><span class="line"><span class="string">numpy.random.randn() 产生一个标准正态分布的随机数 np.random.randn(2,4)</span></span><br><span class="line"><span class="string">np.random.normal(loc=0.0, scale=1.0, size=None)  参数loc决定均值，参数scale决定标准差，参数size决定数量</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">numpy.random.randint(low, high=None, size=None, dtype='l') 产生一个或多个随机整数，范围区间为[low, high)   np.random.randint(-5,5,size=(2,2))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">numpy.random.random_sample(size=None)</span></span><br><span class="line"><span class="string">numpy.random.random(size=None)</span></span><br><span class="line"><span class="string">numpy.random.ranf(size=None)</span></span><br><span class="line"><span class="string">numpy.random.sample(size=None) 都是产生[0,1)之间的随机数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">np.random.choice(5,size=(3,2)) 产生一个或多个随机整数，范围区间为[0,5)   np.random.choice([1,2,3,4,5],size=(3,2))</span></span><br><span class="line"><span class="string">demo_list = ['lenovo', 'sansumg','moto','xiaomi', 'iphone']</span></span><br><span class="line"><span class="string">np.random.choice(demo_list,size=(3,3), p=[0.1,0.6,0.1,0.1,0.1])    注意p的长度必须和demo_list的长度一致,且p的和为1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">numpy.random.seed() 设置随机数种子</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-Numpy的数组"><a href="#1-Numpy的数组" class="headerlink" title="1. Numpy的数组"></a>1. Numpy的数组</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-01T09:56:50.000Z" title="4/1/2022, 9:56:50 AM">2022-04-01</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP/">NLP</a><span> / </span><a class="link-muted" href="/categories/NLP/Torch/">Torch</a><span> / </span><a class="link-muted" href="/categories/NLP/Torch/Model/">Model</a></span><span class="level-item">10 分钟读完 (大约1517个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP/Torch/Model/4-%E6%A8%A1%E5%9E%8B%E5%85%A5%E5%8F%A3/">4_模型入口</a></p><div class="content"><p>第四步：模型入口</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> models.model_utils <span class="keyword">import</span> get_embedding_matrix_and_vocab</span><br><span class="line"><span class="keyword">from</span> src.classic_models.training.trainer <span class="keyword">import</span> Trainer</span><br><span class="line"><span class="keyword">from</span> src.classic_models.training.data_loader <span class="keyword">import</span> load_and_cache_examples</span><br><span class="line"></span><br><span class="line">sys.path.append(<span class="string">"./"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_logger</span>():</span><br><span class="line">    logging.basicConfig(</span><br><span class="line">        <span class="built_in">format</span>=<span class="string">"%(asctime)s - %(levelname)s - %(name)s -   %(message)s"</span>,</span><br><span class="line">        datefmt=<span class="string">"%m/%d/%Y %H:%M:%S"</span>,</span><br><span class="line">        level=logging.INFO,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_seed</span>(<span class="params">args</span>):</span><br><span class="line">    random.seed(args.seed)</span><br><span class="line">    np.random.seed(args.seed)</span><br><span class="line">    torch.manual_seed(args.seed)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> args.no_cuda <span class="keyword">and</span> torch.cuda.is_available():</span><br><span class="line">        torch.cuda.manual_seed_all(args.seed)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">args</span>):</span><br><span class="line">    init_logger()</span><br><span class="line">    set_seed(args)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># load vocab and w2v</span></span><br><span class="line">    vocab_list, vector_list = get_embedding_matrix_and_vocab(</span><br><span class="line">        args.w2v_file, skip_first_line=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    train_dataset = load_and_cache_examples(args, mode=<span class="string">"train"</span>, vocab_list=vocab_list)</span><br><span class="line">    dev_dataset = load_and_cache_examples(args, mode=<span class="string">"dev"</span>, vocab_list=vocab_list)</span><br><span class="line">    test_dataset = load_and_cache_examples(args, mode=<span class="string">"test"</span>, vocab_list=vocab_list)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"train_dataset: "</span>, <span class="built_in">len</span>(train_dataset))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"dev_dataset: "</span>, <span class="built_in">len</span>(dev_dataset))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"test_dataset: "</span>, <span class="built_in">len</span>(test_dataset))</span><br><span class="line"></span><br><span class="line">    trainer = Trainer(args, train_dataset, dev_dataset, test_dataset)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.do_train:</span><br><span class="line">        trainer.train()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.do_eval:</span><br><span class="line">        trainer.load_model()</span><br><span class="line">        trainer.evaluate(<span class="string">"dev"</span>)</span><br><span class="line"></span><br><span class="line">        trainer.evaluate(<span class="string">"test"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">python src/classic_models/training/main.py --data_dir ./datasets/phase_1/splits/fold_0 </span></span><br><span class="line"><span class="string">--label_file_level_1 datasets/phase_1/labels_level_1.txt </span></span><br><span class="line"><span class="string">--label_file_level_2 datasets/phase_1/labels_level_2.txt </span></span><br><span class="line"><span class="string">--task daguan --random_init_w2v --encoder lstm --aggregator max_pool </span></span><br><span class="line"><span class="string">--model_dir ./experiments/outputs/daguan/lstm_0815_1 --do_train </span></span><br><span class="line"><span class="string">--do_eval --train_batch_size 32 --num_train_epochs 50 </span></span><br><span class="line"><span class="string">--embeddings_learning_rate 6e-4 --learning_rate 20e-4 </span></span><br><span class="line"><span class="string">--classifier_learning_rate 20e-4 --warmup_steps 200 --max_seq_len 128 </span></span><br><span class="line"><span class="string">--hidden_dim 256 --embed_dim 256 </span></span><br><span class="line"><span class="string">--w2v_file resources/word2vec/dim_256/w2v.vectors </span></span><br><span class="line"><span class="string">--dropout_rate 0.2 --metric_key_for_early_stop "macro avg__f1-score__level_2" --logging_steps 400 --patience 5 </span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--task"</span>, default=<span class="string">"daguan"</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">"The name of the task to train"</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--model_dir"</span>,</span><br><span class="line">        default=<span class="string">"/data2/code/DaguanFengxian/baseline/experiments/outputs/lstm_max_pool_wv256_epoch100"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Path to save, load models"</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--data_dir"</span>,</span><br><span class="line">        default=<span class="string">"/data2/nlpData/daguanfengxian/phase_1/splits/fold_0"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"The input dataload dir"</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--label_file_level_1"</span>,</span><br><span class="line">        default=<span class="string">"/data2/nlpData/daguanfengxian/phase_1/labels_level_1.txt"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Label file for level 1 label"</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--label_file_level_2"</span>,</span><br><span class="line">        default=<span class="string">"/data2/nlpData/daguanfengxian/phase_1/labels_level_2.txt"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Label file for level 2 label"</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--seed"</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">41</span>, <span class="built_in">help</span>=<span class="string">"random seed for initialization"</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--train_batch_size"</span>, default=<span class="number">32</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"Batch size for training."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--eval_batch_size"</span>, default=<span class="number">64</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"Batch size for evaluation."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--max_seq_len"</span>,</span><br><span class="line">        default=<span class="number">128</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">int</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"The maximum total input sequence length after tokenization."</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--num_train_epochs"</span>,</span><br><span class="line">        default=<span class="number">100.0</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">float</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Total number of training epochs to perform."</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--weight_decay"</span>, default=<span class="number">0.0</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"Weight decay if we apply some."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--gradient_accumulation_steps"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">int</span>,</span><br><span class="line">        default=<span class="number">1</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Number of updates steps to accumulate before performing a backward/update pass."</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--adam_epsilon"</span>, default=<span class="number">1e-8</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"Epsilon for Adam optimizer."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--max_grad_norm"</span>, default=<span class="number">1.0</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"Max gradient norm."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--max_steps"</span>,</span><br><span class="line">        default=-<span class="number">1</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">int</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"If &gt; 0: set total number of training steps to perform. Override num_train_epochs."</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--warmup_steps"</span>, default=<span class="number">200</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"Linear warmup over warmup_steps."</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--logging_steps"</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">400</span>, <span class="built_in">help</span>=<span class="string">"Log every X updates steps."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--save_steps"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">int</span>,</span><br><span class="line">        default=<span class="number">200</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Save checkpoint every X updates steps."</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--do_train"</span>, action=<span class="string">"store_true"</span>, <span class="built_in">help</span>=<span class="string">"Whether to run training."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--do_eval"</span>, action=<span class="string">"store_true"</span>, <span class="built_in">help</span>=<span class="string">"Whether to run eval on the test set."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--no_cuda"</span>, action=<span class="string">"store_true"</span>, <span class="built_in">help</span>=<span class="string">"Avoid using CUDA when available"</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># ----------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment"># embedding: 随机初始化；</span></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--random_init_w2v"</span>, action=<span class="string">"store_true"</span>, <span class="built_in">help</span>=<span class="string">"是否直接随机初始化embedding； "</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--encoder"</span>,</span><br><span class="line">        default=<span class="string">"lstm"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Model type selected in the list: [textcnn, lstm] "</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--aggregator"</span>,</span><br><span class="line">        default=<span class="string">"max_pool"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"Model type selected in the list: [slf_attn_pool, max_pool, avg_pool, dr_pool, ] "</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--embed_dim"</span>, default=<span class="number">256</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"dims for embedding layer."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--hidden_dim"</span>, default=<span class="number">256</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"dims for intermediate layers."</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--embeddings_learning_rate"</span>,</span><br><span class="line">        default=<span class="number">6e-4</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">float</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"The learning rate for Adam."</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--learning_rate"</span>, default=<span class="number">20e-4</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"The learning rate for Adam."</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--classifier_learning_rate"</span>,</span><br><span class="line">        default=<span class="number">20e-4</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">float</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"The learning rate for Adam."</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--w2v_file"</span>,</span><br><span class="line">        default=<span class="string">"/data2/nlpData/daguanfengxian/word2vec/dim_256_sg_0_hs_1_epochs_30/w2v.vectors"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"path to pretrained word2vec file"</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">"--dropout_rate"</span>, default=<span class="number">0.2</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"dropout_rate "</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--patience"</span>, default=<span class="number">5</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">"patience for early stopping "</span></span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--metric_key_for_early_stop"</span>,</span><br><span class="line">        default=<span class="string">"macro avg__f1-score__level_2"</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"metric name for early stopping "</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># prediction_output_file</span></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--prediction_output_file"</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"file for writing out the predictions "</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 针对不均衡样本</span></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--class_weights_level_1"</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"class_weights, written in string like '1.0,2.0,2.0,5.0,200.0,300.0,400.0,500.0,500.0' "</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--class_weights_level_2"</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">"class_weights, written in string like '0.828,1.241,1.465,1.622,1.963,2.002,2.173,2.507,2.564,2.572,2.707,4.244,4.469,4.953,5.460,5.693,6.477,6.694,7.174,7.804,8.648,8.988,9.090,10.06,10.25,11.94,15.53,25.80,32.65,48.48,50.0,80.0,84.21,88.88,100.0' "</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">"--use_focal_loss"</span>, default=<span class="string">"True"</span>, <span class="built_in">help</span>=<span class="string">"use focal loss"</span>)</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">"--focal_loss_gamma"</span>, default=<span class="number">2.0</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">"gamma in focal loss"</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ----------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    main(args)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>这一部分非常需要展开来看，先从models/model_untils.py开始：</strong></p>
</blockquote>
<h2 id="model-untils-py-存放功能组件函数"><a href="#model-untils-py-存放功能组件函数" class="headerlink" title="model_untils.py 存放功能组件函数"></a>model_untils.py 存放功能组件函数</h2><h3 id="1-加载w2v生成的embedding"><a href="#1-加载w2v生成的embedding" class="headerlink" title="1. 加载w2v生成的embedding"></a>1. 加载w2v生成的embedding</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_embedding_matrix_and_vocab</span>(<span class="params">w2v_file, skip_first_line=<span class="literal">True</span>, include_special_tokens=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Construct embedding matrix</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        embed_dic : word-embedding dictionary</span></span><br><span class="line"><span class="string">        skip_first_line : 是否跳过第一行</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        embedding_matrix: return embedding matrix (numpy)</span></span><br><span class="line"><span class="string">        embedding_matrix: return embedding matrix</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    embedding_dim = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># 先遍历一次，得到一个vocab list 和向量list</span></span><br><span class="line">    vocab_list = []</span><br><span class="line">    vector_list = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(w2v_file, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">        <span class="keyword">for</span> i, line <span class="keyword">in</span> tqdm.tqdm(<span class="built_in">enumerate</span>(f_in)):</span><br><span class="line">            <span class="keyword">if</span> skip_first_line:</span><br><span class="line">                <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">            line = line.strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            line = line.split(<span class="string">" "</span>)</span><br><span class="line">            w_ = line[<span class="number">0</span>]</span><br><span class="line">            vec_ = line[<span class="number">1</span>:]</span><br><span class="line">            vec_ = [<span class="built_in">float</span>(w.strip()) <span class="keyword">for</span> w <span class="keyword">in</span> vec_]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> embedding_dim == <span class="literal">None</span>:</span><br><span class="line">                embedding_dim = <span class="built_in">len</span>(vec_)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">assert</span> embedding_dim == <span class="built_in">len</span>(vec_)</span><br><span class="line"></span><br><span class="line">            vocab_list.append(w_)</span><br><span class="line">            vector_list.append(vec_)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加两个特殊字符：PAD和UNK</span></span><br><span class="line">    <span class="keyword">if</span> include_special_tokens:</span><br><span class="line">        vocab_list = [<span class="string">'pad'</span>, <span class="string">'unk'</span>] + vocab_list</span><br><span class="line">        <span class="comment"># 随机初始化两个向量</span></span><br><span class="line">        pad_vec_ = (np.random.rand(embedding_dim).astype(np.float32) * <span class="number">0.05</span>).tolist()</span><br><span class="line">        unk_vec_ = (np.random.rand(embedding_dim).astype(np.float32) * <span class="number">0.05</span>).tolist()</span><br><span class="line">        vector_list = [pad_vec_, unk_vec_] + vector_list</span><br><span class="line">    <span class="keyword">return</span> vocab_list, vector_list</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>models/training/data_loader.py 部分</p>
</blockquote>
<h2 id="data-loader-py-加载数据的函数"><a href="#data-loader-py-加载数据的函数" class="headerlink" title="data_loader.py 加载数据的函数"></a>data_loader.py 加载数据的函数</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_and_cache_examples</span>(<span class="params">args, mode, vocab_list=<span class="literal">None</span></span>):</span><br><span class="line">    processor = processors[args.task](args)</span><br><span class="line"></span><br><span class="line">    cached_features_file = os.path.join(</span><br><span class="line">        args.data_dir, <span class="string">"cached_{}_{}_{}"</span>.<span class="built_in">format</span>(mode, args.task, args.max_seq_len)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(cached_features_file):</span><br><span class="line">        logger.info(<span class="string">"Loading features from cached file %s"</span>, cached_features_file)</span><br><span class="line">        features = torch.load(cached_features_file)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        logger.info(<span class="string">"Creating features from dataset file at %s"</span>, args.data_dir)</span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">"train"</span>:</span><br><span class="line">            examples = processor.get_examples(<span class="string">"train"</span>)</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">"dev"</span>:</span><br><span class="line">            examples = processor.get_examples(<span class="string">"dev"</span>)</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">"test"</span>:</span><br><span class="line">            examples = processor.get_examples(<span class="string">"test"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"For mode, Only train, dev, test is available"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Use cross entropy ignore index as padding label id so that only real label ids contribute to the loss later</span></span><br><span class="line">        features = convert_examples_to_features(</span><br><span class="line">            examples, args.max_seq_len, vocab_list=vocab_list</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"Saving features into cached file %s"</span>, cached_features_file)</span><br><span class="line">        torch.save(features, cached_features_file)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Convert to Tensors and build dataset</span></span><br><span class="line">    all_input_ids = torch.tensor([f.input_ids <span class="keyword">for</span> f <span class="keyword">in</span> features], dtype=torch.long)</span><br><span class="line">    all_attention_mask = torch.tensor(</span><br><span class="line">        [f.attention_mask <span class="keyword">for</span> f <span class="keyword">in</span> features], dtype=torch.long</span><br><span class="line">    )</span><br><span class="line">    all_label_id_level_1s = torch.tensor(</span><br><span class="line">        [f.label_id_level_1 <span class="keyword">for</span> f <span class="keyword">in</span> features], dtype=torch.long</span><br><span class="line">    )</span><br><span class="line">    all_label_id_level_2s = torch.tensor(</span><br><span class="line">        [f.label_id_level_2 <span class="keyword">for</span> f <span class="keyword">in</span> features], dtype=torch.long</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    dataset = TensorDataset(</span><br><span class="line">        all_input_ids,</span><br><span class="line">        all_attention_mask,</span><br><span class="line">        all_label_id_level_1s,</span><br><span class="line">        all_label_id_level_2s,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dataset</span><br></pre></td></tr></tbody></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-30T17:57:02.000Z" title="3/30/2022, 5:57:02 PM">2022-03-31</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP/">NLP</a><span> / </span><a class="link-muted" href="/categories/NLP/EDA/">EDA</a></span><span class="level-item">3 分钟读完 (大约404个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP/EDA/3-lable%E8%AF%8D%E8%A1%A8%E5%88%B6%E4%BD%9C/">3_lable词表制作</a></p><div class="content"><h2 id="第三步：制作lable词表"><a href="#第三步：制作lable词表" class="headerlink" title="第三步：制作lable词表"></a>第三步：制作lable词表</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">vocab_process</span>(<span class="params">data_dir, to_folder</span>):</span><br><span class="line">    <span class="comment"># label, 注意这个模型，标签是分为两层的， level_1是大类， level_2是全部的lable，算作小类</span></span><br><span class="line">    vocab_file_level_1 = os.path.join(to_folder, <span class="string">"labels_level_1.txt"</span>)</span><br><span class="line">    vocab_file_level_2 = os.path.join(to_folder, <span class="string">"labels_level_2.txt"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># label2freq</span></span><br><span class="line">    label2freq_level_1_file = os.path.join(to_folder, <span class="string">"label2freq_level_1.json"</span>)</span><br><span class="line">    label2freq_level_2_file = os.path.join(to_folder, <span class="string">"label2freq_level_2.json"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(data_dir, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        vocab_level_1 = {}</span><br><span class="line">        vocab_level_2 = {}</span><br><span class="line">        <span class="keyword">for</span> i, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(f):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            label_ = line.strip().split(<span class="string">","</span>)[-<span class="number">1</span>]</span><br><span class="line">            label_level_1 = label_.strip().split(<span class="string">"-"</span>)[<span class="number">0</span>]</span><br><span class="line">            label_level_2 = label_</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> label_level_1 <span class="keyword">not</span> <span class="keyword">in</span> vocab_level_1:</span><br><span class="line">                vocab_level_1[label_level_1] = <span class="number">0</span></span><br><span class="line">            vocab_level_1[label_level_1] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> label_level_2 <span class="keyword">not</span> <span class="keyword">in</span> vocab_file_level_2:</span><br><span class="line">                vocab_level_2[label_level_2] = <span class="number">0</span></span><br><span class="line">            vocab_level_2[label_level_2] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        json.dump(vocab_level_1, <span class="built_in">open</span>(label2freq_level_1_file, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">        json.dump(vocab_level_2, <span class="built_in">open</span>(label2freq_level_2_file, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line">        vocab_level_1 = <span class="built_in">list</span>(vocab_level_1.items())  <span class="comment"># dict.items() 输出所有的(k, v)元组组成的list</span></span><br><span class="line">        vocab_level_1 = <span class="built_in">sorted</span>(</span><br><span class="line">            vocab_level_1, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span></span><br><span class="line">        )  <span class="comment"># 按照lable的数量进行排序，从大到小</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"vocab_level_1:"</span>, vocab_level_1)</span><br><span class="line"></span><br><span class="line">        vocab_level_1 = [w[<span class="number">0</span>] <span class="keyword">for</span> w <span class="keyword">in</span> vocab_level_1]</span><br><span class="line"></span><br><span class="line">        vocab_level_2 = <span class="built_in">list</span>(vocab_level_2.items())</span><br><span class="line">        vocab_level_2 = <span class="built_in">sorted</span>(vocab_level_2, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"vocab_level_2:"</span>, vocab_level_2)</span><br><span class="line">        vocab_level_2 = [w[<span class="number">0</span>] <span class="keyword">for</span> w <span class="keyword">in</span> vocab_level_2]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(vocab_file_level_1, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">            <span class="keyword">for</span> lab <span class="keyword">in</span> vocab_level_1:</span><br><span class="line">                f_out.write(lab + <span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(vocab_file_level_2, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">            <span class="keyword">for</span> lab <span class="keyword">in</span> vocab_level_2:</span><br><span class="line">                f_out.write(lab + <span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    rootdir = os.sep.join(os.path.dirname(__file__).strip().split(os.sep)[:-<span class="number">2</span>])</span><br><span class="line">    train_dir = os.path.join(rootdir, <span class="string">"dataset/datagrand_2021_train.csv"</span>)</span><br><span class="line">    <span class="comment"># test_dir = os.path.join(rootdir, "dataset/datagrand_2021_test.csv")</span></span><br><span class="line">    phase_1_dir = os.path.join(rootdir, <span class="string">"dataset/phase_1"</span>)</span><br><span class="line">    vocab_process(train_dir, phase_1_dir)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="生成的文件及内容"><a href="#生成的文件及内容" class="headerlink" title="生成的文件及内容"></a>生成的文件及内容</h3><img src="/NLP/EDA/3-lable%E8%AF%8D%E8%A1%A8%E5%88%B6%E4%BD%9C/2022-03-31_02-00.png" class="" title="生成文件">

<img src="/NLP/EDA/3-lable%E8%AF%8D%E8%A1%A8%E5%88%B6%E4%BD%9C/2022-03-31_02-01.png" class="" title="文件内容">


</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-30T17:29:30.000Z" title="3/30/2022, 5:29:30 PM">2022-03-31</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP/">NLP</a><span> / </span><a class="link-muted" href="/categories/NLP/EDA/">EDA</a></span><span class="level-item">3 分钟读完 (大约380个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP/EDA/2-%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%B6%E4%BD%9C/">2_数据集制作</a></p><div class="content"><h2 id="第二步：数据集分割制作"><a href="#第二步：数据集分割制作" class="headerlink" title="第二步：数据集分割制作"></a>第二步：数据集分割制作</h2><blockquote>
<p>提前做个5折交叉的准备，注意代码中zip的使用</p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">split_train</span>(<span class="params">train_file, dev_ratio=<span class="number">0.2</span>, to_folder=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># split train into train &amp; dev</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(train_file, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        dict_label_name2sents = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">        <span class="keyword">for</span> i, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(f):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            line = line.strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="built_in">id</span>, sent, label_name = line.split(<span class="string">","</span>)</span><br><span class="line">            dict_label_name2sents[label_name].append(sent)  <span class="comment"># 这里的sent包括逗号，是几个短句的组合</span></span><br><span class="line"></span><br><span class="line">        to_train_file = os.path.join(to_folder, <span class="string">"train.txt"</span>)</span><br><span class="line">        to_dev_file = os.path.join(to_folder, <span class="string">"dev.txt"</span>)</span><br><span class="line">        to_test_file = os.path.join(to_folder, <span class="string">"test.txt"</span>)</span><br><span class="line"></span><br><span class="line">        train_samples = []</span><br><span class="line">        dev_samples = []</span><br><span class="line">        <span class="keyword">for</span> label_name, sents <span class="keyword">in</span> dict_label_name2sents.items():</span><br><span class="line">            random.shuffle(sents)  <span class="comment"># 把每个lable下的sents随机打乱</span></span><br><span class="line"></span><br><span class="line">            train_sents_ = sents[<span class="built_in">int</span>(dev_ratio * <span class="built_in">len</span>(sents)) + <span class="number">1</span> :]</span><br><span class="line">            dev_sents_ = sents[: <span class="built_in">int</span>(dev_ratio * <span class="built_in">len</span>(sents)) + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            train_samples.extend([(w, label_name) <span class="keyword">for</span> w <span class="keyword">in</span> train_sents_])</span><br><span class="line">            dev_samples.extend([(w, label_name) <span class="keyword">for</span> w <span class="keyword">in</span> dev_sents_])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> samps, file_path <span class="keyword">in</span> <span class="built_in">zip</span>(</span><br><span class="line">            [train_samples, dev_samples], [to_train_file, to_dev_file]</span><br><span class="line">        ):</span><br><span class="line">            f_out = <span class="built_in">open</span>(file_path, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">            <span class="keyword">for</span> i, samp <span class="keyword">in</span> <span class="built_in">enumerate</span>(samps):</span><br><span class="line">                f_out.write(</span><br><span class="line">                    <span class="string">"%d,%s,%s"</span> % (i, samp[<span class="number">0</span>], samp[<span class="number">1</span>]) + <span class="string">"\n"</span></span><br><span class="line">                )  <span class="comment"># samp[0]是sent，samp[1]是label_name</span></span><br><span class="line">            f_out.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">split_train_to_5folds</span>(<span class="params">train_file, to_folder, num_folds=<span class="number">5</span></span>):</span><br><span class="line">    os.makedirs(to_folder, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_folds):</span><br><span class="line">        to_folder_i = os.path.join(to_folder, <span class="string">"fold_%d"</span> % i)</span><br><span class="line">        os.makedirs(to_folder_i, exist_ok=<span class="literal">True</span>)</span><br><span class="line">        split_train(train_file, dev_ratio=<span class="number">0.2</span>, to_folder=to_folder_i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    rootdir = os.sep.join(os.path.dirname(__file__).strip().split(os.sep)[:-<span class="number">2</span>])</span><br><span class="line">    train_dir = os.path.join(rootdir, <span class="string">"dataset/datagrand_2021_train.csv"</span>)</span><br><span class="line">    <span class="comment"># test_dir = os.path.join(rootdir, "dataset/datagrand_2021_test.csv")</span></span><br><span class="line">    to_folder = os.path.join(rootdir, <span class="string">"dataset/phase_1/splits"</span>)</span><br><span class="line">    split_train_to_5folds(train_dir, to_folder, num_folds=<span class="number">5</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


<img src="/NLP/EDA/2-%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%B6%E4%BD%9C/2022-03-31_01-33.png" class=""></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-30T17:00:53.000Z" title="3/30/2022, 5:00:53 PM">2022-03-31</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP/">NLP</a><span> / </span><a class="link-muted" href="/categories/NLP/EDA/">EDA</a></span><span class="level-item">2 分钟读完 (大约242个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP/EDA/1-%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/">1_数据探索</a></p><div class="content"><h2 id="第一步：简单观察训练集和测试集"><a href="#第一步：简单观察训练集和测试集" class="headerlink" title="第一步：简单观察训练集和测试集"></a>第一步：简单观察训练集和测试集</h2><blockquote>
<p>使用pyplot做直方图观察句子长度分布情况</p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> re <span class="keyword">import</span> S</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">length_process</span>(<span class="params">data_dir</span>):</span><br><span class="line">    train_dir = data_dir</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(train_dir, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        tmp_x = []</span><br><span class="line">        <span class="keyword">for</span> i, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(f):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span>  <span class="comment"># skip the first line</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># line 的格式为：0,7442 27878 9601 235 4004 ， 9601 4004 ， 8194 2281 10893,5-30</span></span><br><span class="line">            <span class="comment"># 行号 英文逗号 短句 中文逗号 短句 英文逗号 行号</span></span><br><span class="line">            sent_ = line.strip().split(<span class="string">","</span>)[<span class="number">1</span>]</span><br><span class="line">            sent_ = [item.strip() <span class="keyword">for</span> item <span class="keyword">in</span> sent_.split(<span class="string">"，"</span>)]</span><br><span class="line">            sent_ = <span class="string">" "</span>.join(item <span class="keyword">for</span> item <span class="keyword">in</span> sent_).strip().split(<span class="string">" "</span>)</span><br><span class="line"></span><br><span class="line">            tmp_x.append(<span class="built_in">len</span>(sent_))</span><br><span class="line"></span><br><span class="line">        n, bins, patches = plt.hist(x=tmp_x, bins=<span class="string">"auto"</span>, alpha=<span class="number">0.7</span>, rwidth=<span class="number">0.85</span>)</span><br><span class="line">        plt.grid(axis=<span class="string">"y"</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line">        plt.xlabel(<span class="string">"sentence length"</span>)</span><br><span class="line">        plt.ylabel(<span class="string">"Frequency"</span>)</span><br><span class="line">        plt.title(<span class="string">"Histogram: sentence length"</span>)</span><br><span class="line">        maxfreq = n.<span class="built_in">max</span>()</span><br><span class="line">        <span class="comment"># 设置y轴的上限</span></span><br><span class="line">        plt.ylim(ymax=np.ceil(maxfreq / <span class="number">10</span>) * <span class="number">10</span> <span class="keyword">if</span> maxfreq % <span class="number">10</span> <span class="keyword">else</span> maxfreq + <span class="number">10</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"maxfreq = {0}"</span>.<span class="built_in">format</span>(maxfreq))</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    rootdir = os.sep.join(os.path.dirname(__file__).strip().split(os.sep)[:-<span class="number">2</span>])</span><br><span class="line">    train_dir = os.path.join(rootdir, <span class="string">"dataset/datagrand_2021_train.csv"</span>)</span><br><span class="line">    test_dir = os.path.join(rootdir, <span class="string">"dataset/datagrand_2021_test.csv"</span>)</span><br><span class="line"></span><br><span class="line">    length_process(train_dir)</span><br><span class="line">    length_process(test_dir)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/Figure_1.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-22T10:46:13.000Z" title="3/22/2022, 10:46:13 AM">2022-03-22</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/STL/">STL</a><span> / </span><a class="link-muted" href="/categories/STL/vector/">vector</a></span><span class="level-item">6 分钟读完 (大约962个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/STL/vector/stl%E4%B9%8Bvector/">STL之vector</a></p><div class="content"><h1 id="STL之vector-向量"><a href="#STL之vector-向量" class="headerlink" title="STL之vector  向量"></a>STL之vector  向量</h1><p>vector是一个多功能的、能够操作多种数据结构和算法的模板类和函数库。</p>
<p>vector之所以被认为是一个容器，是因为它能够像容器一样存放各种类型的对象，简单地说，<strong>vector是一个能够存放任意类型的动态数组，能够增加和压缩数据</strong>。</p>
<p>向量可将元素存储在<strong>连续的内存位置</strong>中，并在<strong>运行时根据需要分配内存</strong>。</p>
<h2 id="vector和array的区别"><a href="#vector和array的区别" class="headerlink" title="vector和array的区别"></a>vector和array的区别</h2><p>数组array遵循<strong>静态方法</strong>，这意味着在运行时不能更改其大小，而vector实现<strong>动态数组</strong>意味着在添加元素时会自动调整其大小。</p>
<h2 id="vector基础使用"><a href="#vector基础使用" class="headerlink" title="vector基础使用"></a>vector基础使用</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建vector</span></span><br><span class="line"><span class="comment">// vector&lt;object_type&gt; v1;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    vector&lt;string&gt; v1;</span><br><span class="line">    v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="string">"C++ STL"</span>);</span><br><span class="line">    v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="string">"VECTOR"</span>);</span><br><span class="line">    <span class="keyword">for</span> (vector&lt;string&gt;::iterator itr = v<span class="number">1.</span><span class="built_in">begin</span>(); itr != v<span class="number">1.</span><span class="built_in">end</span>(); ++itr)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; *itr &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="vector的常用成员函数"><a href="#vector的常用成员函数" class="headerlink" title="vector的常用成员函数"></a>vector的常用成员函数</h2><ul>
<li>at(idx) : 传回索引idx所指向的数据，如果idx越界，抛出out_of_range;</li>
<li>back() : 返回最后一个元素，不检查这个数据是否存在；</li>
<li>front() : 返回第一个元素，不检查这个数据是否存在；</li>
<li>swap() : 交换两个vector；</li>
<li>push_back() : 在vector的末尾追加一个元素；</li>
<li>pop_back() : 在vector中删除最后一个元素；</li>
<li>empty() : 判断vector是否为空，为空则返回true；</li>
<li>insert() : 在指定位置插入新元素；</li>
<li>erase() : 删除指定的元素？？？</li>
<li>resize() : 修改vector的大小；</li>
<li>clear() : 从vector中删除所有元素；</li>
<li>size() : 返回vector的元素个数；</li>
<li>capacity() : 返回vector在不重新分配内存的情况下，当前最多可以容纳的元素个数；</li>
<li>assige() : 将新值分配给vector；</li>
<li>operator=() : 将新值分配给vector容器；</li>
<li>operator<a href=""></a> : 访问指定的元素；</li>
<li>end() : 返回最末尾元素的迭代器；</li>
<li>emplace() : 在位置pos之前，插入一个新的元素；</li>
<li>emplace_back() : 在末尾插入一个元素；</li>
<li>rend() : 指向vector的第一个元素之前的元素；</li>
<li>rbegin() : 指向vector的最后一个元素；</li>
<li>begin() : 返回第一个元素的迭代器；</li>
<li>max_size() : 返回vector所能容纳的元素的最大数量（上限值）；</li>
<li>cend() : 指向vector中的last-last-element;</li>
<li>cbegin() : 指向vector的第一个元素；</li>
<li>crbegin() : 指向vector的最后一个字符；</li>
<li>crend() : 指向vector第一个元素之前的元素；？？？</li>
<li>data() : 将vector的数据写入array；</li>
<li>shrink_to_fit() : 减小vector的容量，使它等于vector的大小；</li>
</ul>
<h3 id="val-v1-at-idx"><a href="#val-v1-at-idx" class="headerlink" title="val = v1.at(idx)"></a>val = v1.at(idx)</h3><p>返回索引位置的值，和<code>v1[idx]</code>一样;</p>
<p>栗子：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v1{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>};</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">1.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; v<span class="number">1.</span><span class="built_in">at</span>(i) &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<h3 id="val-v1-back"><a href="#val-v1-back" class="headerlink" title="val = v1.back()"></a>val = v1.back()</h3><p>返回最后一个元素，不管存在不存在，<code>v1.end()</code>考虑下差别；</p>
<ul>
<li><code>v1.back()</code>返回最后一个元素；</li>
<li><code>v1.front()</code>返回第一个元素；</li>
</ul>
<p>栗子：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    vector&lt;string&gt; v1{</span><br><span class="line">        <span class="string">"begin"</span>,</span><br><span class="line">        <span class="string">"middle"</span>,</span><br><span class="line">        <span class="string">"end"</span>,</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; v<span class="number">1.</span><span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; v<span class="number">1.f</span>ront() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 发现一个问题：string居然区分单引号双引号，必须双引号才可以！</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="v1-swap-v2"><a href="#v1-swap-v2" class="headerlink" title="v1.swap(v2)"></a>v1.swap(v2)</h3><p>交换两个vector中的元素；</p>
<p>如果两个vector的size不一样，会自动扩容，因为vector的长度可变。</p>
<p>栗子：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v1 = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>};</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v2 = {<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>};</span><br><span class="line">    cout &lt;&lt; <span class="string">"在交换之前，v1的元素是 :"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">1.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">        cout &lt;&lt; v1[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">"在交换之前，v2的元素是 :"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">2.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">        cout &lt;&lt; v2[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    v<span class="number">1.</span><span class="built_in">swap</span>(v2);</span><br><span class="line">    cout &lt;&lt; <span class="string">"交换后，v1的元素为  :"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">1.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">        cout &lt;&lt; v1[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">"交换后，v2的元素为  :"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">2.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">        cout &lt;&lt; v2[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p><img src="/./STL%E4%B9%8Bvector/2022-03-26_15-54.png" alt="测试图片"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-22T10:02:57.000Z" title="3/22/2022, 10:02:57 AM">2022-03-22</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/STL/">STL</a></span><span class="level-item">3 分钟读完 (大约498个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/STL/stl%E5%BC%80%E7%AF%87/">STL开篇</a></p><div class="content"><h1 id="STL开篇"><a href="#STL开篇" class="headerlink" title="STL开篇"></a>STL开篇</h1><p>STL 实际上，是一套封装好的C++模板类。提供通用的模板类和函数，用来高性能的实现常用的算法和数据结构，比如：向量vector、链表、队列、栈。</p>
<p>STL 做到了数据结构和算法的分离，比如：vector的底层是顺序表（数组），list的底层为双向链表，deque的底层是循环队列，set的底层是红黑树，hash_set的底层是哈希表。</p>
<p>C++ STL 的核心包括三个组件：</p>
<ul>
<li>容器（Containers）:容器用来管理<strong>某同一类对象</strong>的集合。C++的各种容器类型，比如：deque、list、vector、map等。</li>
<li>算法（Algorithms）：算法作用于容器。提供执行各种操作的方式，包括对容器内容执行初始化、排序、搜索和转换等操作；</li>
<li>迭代器（iterators）：迭代器用于遍历对象集合的元素，这些集合可能是容器，也可能是容器的子集。</li>
</ul>
<h2 id="一个简单的vector示例"><a href="#一个简单的vector示例" class="headerlink" title="一个简单的vector示例"></a>一个简单的vector示例</h2><p>vecotr和数组非常相似，唯一不同的是，vector在需要扩展大小的时候，会自动处理它的存储需求！</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    cout &lt;&lt; <span class="string">"vec的原始大小： "</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        vec.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; <span class="string">"vec扩展后大小： "</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; <span class="string">"vec["</span> &lt;&lt; i &lt;&lt; <span class="string">"] 的值是："</span> &lt;&lt; vec[i] &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用迭代器iterator访问值</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator v = vec.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span> (v != vec.<span class="built_in">end</span>())</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; <span class="string">"迭代器*v的值："</span> &lt;&lt; *v &lt;&lt; endl;</span><br><span class="line">        v++;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; *vec.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="vector的常用函数："><a href="#vector的常用函数：" class="headerlink" title="vector的常用函数："></a>vector的常用函数：</h2><ul>
<li>push_back(): 向vector的末尾插入值，如有必要，会扩展向量的大小；</li>
<li>size(): 显示向量的大小；</li>
<li>begin(): 返回一个指向向量开头的<strong>迭代器</strong>；</li>
<li>end(): 返回一个指向向量结尾的<strong>迭代器</strong></li>
<li>vector<int>::iterator v = vec.begin();</int></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-19T03:53:57.000Z" title="3/19/2022, 3:53:57 AM">2022-03-19</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/STL/">STL</a><span> / </span><a class="link-muted" href="/categories/STL/forward-list/">forward_list</a></span><span class="level-item">6 分钟读完 (大约890个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/STL/forward-list/c-stl-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8-forward-list/">C++STL--单向链表&lt;forward_list&gt;</a></p><div class="content"><h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;forward_list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;forward_list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    forward_list&lt;<span class="type">int</span>&gt; l; <span class="comment">//构造空的单向链表</span></span><br><span class="line">    <span class="comment">//不提供size()的成员方法，使用算法distance()获取</span></span><br><span class="line">    cout &lt;&lt; l.<span class="built_in">max_size</span>() &lt;&lt; endl; <span class="comment">//最大的元素个数</span></span><br><span class="line"></span><br><span class="line">    <span class="function">forward_list&lt;<span class="type">int</span>&gt; <span class="title">l2</span><span class="params">(<span class="number">5</span>)</span></span>;                         <span class="comment">//构造5个元素的单向链表，值为类型的默认值</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"第一个元素值："</span> &lt;&lt; *l<span class="number">2.</span><span class="built_in">begin</span>() &lt;&lt; endl; <span class="comment">//最大的元素个数</span></span><br><span class="line"></span><br><span class="line">    <span class="function">forward_list&lt;<span class="type">int</span>&gt; <span class="title">l3</span><span class="params">(<span class="number">5</span>, <span class="number">111</span>)</span></span>;                    <span class="comment">//构造5个元素的单向链表，每个元素值为111</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"第一个元素值："</span> &lt;&lt; *l<span class="number">3.</span><span class="built_in">begin</span>() &lt;&lt; endl; <span class="comment">//最大的元素个数</span></span><br><span class="line"></span><br><span class="line">    <span class="function">forward_list&lt;<span class="type">int</span>&gt; <span class="title">l4</span><span class="params">(l3)</span></span>;                        <span class="comment">//拷贝构造</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"第一个元素值："</span> &lt;&lt; *l<span class="number">4.</span><span class="built_in">begin</span>() &lt;&lt; endl; <span class="comment">//最大的元素个数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//验证forward_list的内存结构(不连续)</span></span><br><span class="line">    <span class="keyword">for</span> (forward_list&lt;<span class="type">int</span>&gt;::iterator it = l<span class="number">3.</span><span class="built_in">begin</span>(); it != l<span class="number">3.</span><span class="built_in">end</span>(); ++it)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; &amp;(*it) &lt;&lt; <span class="string">"    "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 576460752303423487</span></span><br><span class="line"><span class="comment">// 第一个元素值：0</span></span><br><span class="line"><span class="comment">// 第一个元素值：111</span></span><br><span class="line"><span class="comment">// 第一个元素值：111</span></span><br><span class="line"><span class="comment">// 0x55555556d368    0x55555556d388    0x55555556d3a8    0x55555556d3c8    0x55555556d3e8   </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="迭代器使用"><a href="#迭代器使用" class="headerlink" title="迭代器使用"></a>迭代器使用</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;forward_list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(T begin, T end)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (T p = begin; p != end; ++p)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; *p &lt;&lt; <span class="string">"     "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function">forward_list&lt;<span class="type">int</span>&gt; <span class="title">l3</span><span class="params">(<span class="number">5</span>, <span class="number">111</span>)</span></span>;                    <span class="comment">//构造5个元素的单向链表，每个元素值为111</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"第一个元素值："</span> &lt;&lt; *l<span class="number">3.</span><span class="built_in">begin</span>() &lt;&lt; endl; <span class="comment">//最大的元素个数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//验证迭代器类别,forward  iterator 前向迭代器</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">typeid</span>(forward_list&lt;<span class="type">int</span>&gt;::iterator::iterator_category).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前向迭代器 比 双向迭代器 功能更少一些，支持++、= 、！= 、 == 、 * ，不支持 --</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 支持++    *   =</span></span><br><span class="line">    forward_list&lt;<span class="type">int</span>&gt;::iterator it = l<span class="number">3.</span><span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">    *(++it) = <span class="number">222</span>;</span><br><span class="line">    *(++it) = <span class="number">333</span>;</span><br><span class="line">    *(++it) = <span class="number">444</span>;</span><br><span class="line">    *(++it) = <span class="number">555</span>; <span class="comment">//指向最后一个</span></span><br><span class="line"></span><br><span class="line">    ++it; <span class="comment">//指向最后一个的下一个</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"是否指向最后一个的下一个: "</span> &lt;&lt; (it == l<span class="number">3.</span><span class="built_in">end</span>()) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//--it;//不可以--，因为是单向的</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// const_iterator指向的元素不可赋值</span></span><br><span class="line">    forward_list&lt;<span class="type">int</span>&gt;::const_iterator it2 = l<span class="number">3.</span><span class="built_in">cbegin</span>();</span><br><span class="line">    <span class="comment">//*it2 = 1;//const_iterator指向的元素不可赋值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//正向遍历forward_list</span></span><br><span class="line">    <span class="keyword">for</span> (forward_list&lt;<span class="type">int</span>&gt;::iterator it = l<span class="number">3.</span><span class="built_in">begin</span>(); it != l<span class="number">3.</span><span class="built_in">end</span>(); ++it)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">"    "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//没有反向的迭代器，不支持，因为是单向链表</span></span><br><span class="line">    <span class="comment">// forward_list&lt;int&gt;::reverse_iterator</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//验证Print ,迭代器带来的好处，让算法无需知道容器的细节</span></span><br><span class="line">    Print&lt;forward_list&lt;<span class="type">int</span>&gt;::iterator&gt;(l<span class="number">3.</span><span class="built_in">begin</span>(), l<span class="number">3.</span><span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// --- 输出 ---</span></span><br><span class="line"><span class="comment">// 第一个元素值：111</span></span><br><span class="line"><span class="comment">// St20forward_iterator_tag</span></span><br><span class="line"><span class="comment">// 是否指向最后一个的下一个: 1</span></span><br><span class="line"><span class="comment">// 111    222    333    444    555    </span></span><br><span class="line"><span class="comment">// 111     222     333     444     555</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="增加、删除、插入元素"><a href="#增加、删除、插入元素" class="headerlink" title="增加、删除、插入元素"></a>增加、删除、插入元素</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;forward_list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    forward_list&lt;<span class="type">int</span>&gt; l;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 温习一下单链表的插入</span></span><br><span class="line"><span class="comment">    pNew-&gt;next =  pHead -&gt;next;//新节点的下一个指向插入前的第一个节点</span></span><br><span class="line"><span class="comment">    pHead -&gt;next= pNew;//将头指针指向新节点</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    l.<span class="built_in">push_front</span>(<span class="number">111</span>); <span class="comment">//从头部插入元素</span></span><br><span class="line">    l.<span class="built_in">push_front</span>(<span class="number">222</span>); <span class="comment">//从头部插入元素</span></span><br><span class="line">    l.<span class="built_in">push_front</span>(<span class="number">333</span>); <span class="comment">//从头部插入元素</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       为什么没有insert_before() ？</span></span><br><span class="line"><span class="comment">     pInsert -&gt;next;</span></span><br><span class="line"><span class="comment">     你无法知道当前节点的前一个节点的地址，所以，你就无法将前一个的pLast-&gt;next=pNew</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     为什么insert_after()可以？</span></span><br><span class="line"><span class="comment">     pNew-&gt;next= pInsert-&gt;next;</span></span><br><span class="line"><span class="comment">     pInsert-&gt;next = pNew;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    l.<span class="built_in">insert_after</span>(l.<span class="built_in">begin</span>(), <span class="number">444</span>); <span class="comment">//在某个迭代器后面插入</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (forward_list&lt;<span class="type">int</span>&gt;::iterator it = l.<span class="built_in">begin</span>(); it != l.<span class="built_in">end</span>(); it++)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">"    "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//访问头结点</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"front():  "</span> &lt;&lt; l.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 温习一下单链表的删除</span></span><br><span class="line"><span class="comment">    pHead -&gt;next= pDelete-&gt;next;//将头指针指向删除节点的下一个</span></span><br><span class="line"><span class="comment">    delete pDelete；//删除当前节点</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    l.<span class="built_in">pop_front</span>(); <span class="comment">//删除头结点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    为什么没有erase_before(),还是因为，你无法知道pDelete的前一个，</span></span><br><span class="line"><span class="comment">    你就无法将前一个的pLast-&gt;next= pDelete-&gt;next;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    为什么erase_after()可以?</span></span><br><span class="line"><span class="comment">    pTemp= pDelete-&gt;next;</span></span><br><span class="line"><span class="comment">    pDelete-&gt;next= pDelete-&gt;next-&gt;next;</span></span><br><span class="line"><span class="comment">    delete pTemp;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    l.<span class="built_in">erase_after</span>(l.<span class="built_in">begin</span>()); <span class="comment">//删除迭代器节点的下一个</span></span><br><span class="line"></span><br><span class="line">    l.<span class="built_in">erase_after</span>(l.<span class="built_in">begin</span>(), l.<span class="built_in">end</span>()); <span class="comment">//删除迭代器区间</span></span><br><span class="line"></span><br><span class="line">    l.<span class="built_in">clear</span>(); <span class="comment">//删除所有元素</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (forward_list&lt;<span class="type">int</span>&gt;::iterator it = l.<span class="built_in">begin</span>(); it != l.<span class="built_in">end</span>(); it++)</span><br><span class="line">    {</span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">"    "</span>;</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="尝试运行LeetCode206-反转链表"><a href="#尝试运行LeetCode206-反转链表" class="headerlink" title="尝试运行LeetCode206.反转链表"></a>尝试运行LeetCode206.反转链表</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-17T18:31:11.000Z" title="3/17/2022, 6:31:11 PM">2022-03-18</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/NLP%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/">NLP代码详解</a></span><span class="level-item">6 分钟读完 (大约919个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/NLP%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/pytorch%E5%AD%A6%E4%B9%A0/">pyTorch学习</a></p><div class="content"><h2 id="一、-MLP-模型的实现"><a href="#一、-MLP-模型的实现" class="headerlink" title="一、 MLP 模型的实现"></a>一、 MLP 模型的实现</h2><ul>
<li>数据 <code>sigmoid.csv</code>, 前几列是特征值，最后一列是lable；</li>
<li>通过建立自己的数据集跑出结果；</li>
</ul>
<table>
<thead>
<tr>
<th align="center">A</th>
<th align="center">B…H</th>
<th>I</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-0.882353</td>
<td align="center">…</td>
<td>0</td>
</tr>
<tr>
<td align="center">-0.882353</td>
<td align="center">…</td>
<td>1</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"></span><br><span class="line"><span class="comment">### 自己实现Dataset类去加载本地的CSV数据 ###</span></span><br><span class="line"><span class="comment">### 需要三个函数： init get_item len</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filepath</span>):</span><br><span class="line">        xy = np.loadtxt(filepath, delimiter=<span class="string">","</span>, dtype=np.float32)</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">len</span> = xy.shape[<span class="number">0</span>] <span class="comment"># 行数</span></span><br><span class="line">        <span class="variable language_">self</span>.x_data = torch.from_numpy(xy[:, :-<span class="number">1</span>])  <span class="comment">#所有的行，不包括最后一列的其他列</span></span><br><span class="line">        <span class="variable language_">self</span>.y_data = torch.from_numpy(xy[:, [-<span class="number">1</span>]]) <span class="comment">#所有的行，最后一列</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.x_data[index], <span class="variable language_">self</span>.y_data[index]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.<span class="built_in">len</span></span><br><span class="line"></span><br><span class="line">dataset = MyDataset(<span class="string">'./sigmoid.csv'</span>)</span><br><span class="line">train_loader = DataLoader(dataset=dataset, batch_size=<span class="number">32</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Model</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Model, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.linear1 = torch.nn.Linear(<span class="number">8</span>, <span class="number">6</span>)</span><br><span class="line">        <span class="variable language_">self</span>.linear2 = torch.nn.Linear(<span class="number">6</span>, <span class="number">4</span>)</span><br><span class="line">        <span class="variable language_">self</span>.linear3 = torch.nn.Linear(<span class="number">4</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = torch.nn.Sigmoid()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.sigmoid(<span class="variable language_">self</span>.linear1(x))</span><br><span class="line">        x = <span class="variable language_">self</span>.sigmoid(<span class="variable language_">self</span>.linear2(x))</span><br><span class="line">        x = <span class="variable language_">self</span>.sigmoid(<span class="variable language_">self</span>.linear3(x))</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">model = Model()</span><br><span class="line"><span class="comment">### 建立 损失函数 和 优化器</span></span><br><span class="line">criterion = torch.nn.BCELoss(reduction=<span class="string">'mean'</span>)</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        inputs, labels = data</span><br><span class="line">        y_pred = model(inputs)</span><br><span class="line">        loss = criterion(y_pred, labels)</span><br><span class="line">        <span class="built_in">print</span>(epoch, i, loss.item())</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.bachward()</span><br></pre></td></tr></tbody></table></figure>

<h2 id="二、CNN模型"><a href="#二、CNN模型" class="headerlink" title="二、CNN模型"></a>二、CNN模型</h2><ul>
<li>mnist数据集，只有20个，用来举例</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MnistDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, image_path, image_label, transform=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MnistDataset, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.image_path = image_path  <span class="comment"># 初始化图像路径列表</span></span><br><span class="line">        <span class="variable language_">self</span>.image_label = image_label  <span class="comment"># 初始化图像标签列表</span></span><br><span class="line">        <span class="variable language_">self</span>.transform = transform  <span class="comment"># 初始化数据增强方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取对应index的图像，并视情况进行数据增强</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        image = Image.<span class="built_in">open</span>(<span class="variable language_">self</span>.image_path[index])</span><br><span class="line">        image = np.array(image)</span><br><span class="line">        label = <span class="built_in">int</span>(<span class="variable language_">self</span>.image_label[index])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.transform <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            image = <span class="variable language_">self</span>.transform(image)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> image, torch.tensor(label)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.image_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_path_label</span>(<span class="params">img_root, label_file_path</span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    获取数字图像的路径和标签并返回对应列表</span></span><br><span class="line"><span class="string">    @para: img_root: 保存图像的根目录</span></span><br><span class="line"><span class="string">    @para:label_file_path: 保存图像标签数据的文件路径 .csv 或 .txt 分隔符为','</span></span><br><span class="line"><span class="string">    @return: 图像的路径列表和对应标签列表</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    data = pd.read_csv(label_file_path, names=[<span class="string">"img"</span>, <span class="string">"label"</span>])</span><br><span class="line">    data[<span class="string">"img"</span>] = data[<span class="string">"img"</span>].apply(<span class="keyword">lambda</span> x: img_root + x)</span><br><span class="line">    <span class="keyword">return</span> data[<span class="string">"img"</span>].tolist(), data[<span class="string">"label"</span>].tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取训练集路径列表和标签列表</span></span><br><span class="line">dir_path = os.path.dirname(__file__)</span><br><span class="line">train_data_root = dir_path + <span class="string">"/mnist_data/train/"</span></span><br><span class="line">train_label = dir_path + <span class="string">"/mnist_data/train.txt"</span></span><br><span class="line">train_img_list, train_label_list = get_path_label(train_data_root, train_label)</span><br><span class="line"><span class="comment"># 训练集dataset</span></span><br><span class="line">train_dataset = MnistDataset(</span><br><span class="line">    train_img_list,</span><br><span class="line">    train_label_list,</span><br><span class="line">    transform=transforms.Compose([transforms.ToTensor()]),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取测试集路径列表和标签列表</span></span><br><span class="line"></span><br><span class="line">test_data_root = dir_path + <span class="string">"/mnist_data/test/"</span></span><br><span class="line">test_label = dir_path + <span class="string">"/mnist_data/test.txt"</span></span><br><span class="line">test_img_list, test_label_list = get_path_label(test_data_root, test_label)</span><br><span class="line"><span class="comment"># 测试集sdataset</span></span><br><span class="line">test_dataset = MnistDataset(</span><br><span class="line">    test_img_list,</span><br><span class="line">    test_label_list,</span><br><span class="line">    transform=transforms.Compose([transforms.ToTensor()]),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">num_epochs = <span class="number">5</span></span><br><span class="line">num_classes = <span class="number">10</span></span><br><span class="line">batch_size = <span class="number">10</span></span><br><span class="line">learning_rate = <span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">train_loader = torch.utils.data.DataLoader(</span><br><span class="line">    dataset=train_dataset, batch_size=batch_size, shuffle=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">test_loader = torch.utils.data.DataLoader(</span><br><span class="line">    dataset=test_dataset, batch_size=batch_size, shuffle=<span class="literal">False</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConvNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">10</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(ConvNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="comment">## 池化+batchnorm+relu激活+池化</span></span><br><span class="line">        <span class="variable language_">self</span>.layer1 = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">1</span>, <span class="number">16</span>, kernel_size=<span class="number">5</span>, stride=<span class="number">1</span>, padding=<span class="number">2</span>),</span><br><span class="line">            nn.BatchNorm2d(<span class="number">16</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>),</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.layer2 = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">16</span>, <span class="number">32</span>, kernel_size=<span class="number">5</span>, stride=<span class="number">1</span>, padding=<span class="number">2</span>),</span><br><span class="line">            nn.BatchNorm2d(<span class="number">32</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>),</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.fc = nn.Linear(<span class="number">7</span> * <span class="number">7</span> * <span class="number">32</span>, num_classes)  <span class="comment">## 全链接</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = <span class="variable language_">self</span>.layer1(x)</span><br><span class="line">        out = <span class="variable language_">self</span>.layer2(out)</span><br><span class="line">        out = out.reshape(out.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        out = <span class="variable language_">self</span>.fc(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model = ConvNet(num_classes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Loss and optimizer</span></span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Train the model</span></span><br><span class="line">total_step = <span class="built_in">len</span>(train_loader)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> i, (images, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        images = images</span><br><span class="line">        labels = labels</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Forward pass</span></span><br><span class="line">        outputs = model(images)</span><br><span class="line">        loss = criterion(outputs, labels)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Backward and optimize</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        <span class="comment"># if (i + 1) % 2 == 0:</span></span><br><span class="line">        <span class="built_in">print</span>(</span><br><span class="line">            <span class="string">"Epoch [{}/{}], Step [{}/{}], Loss: {:.4f}"</span>.<span class="built_in">format</span>(</span><br><span class="line">                epoch + <span class="number">1</span>, num_epochs, i + <span class="number">1</span>, total_step, loss.item()</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


<h2 id="三、-RNN"><a href="#三、-RNN" class="headerlink" title="三、 RNN"></a>三、 RNN</h2></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/7/">上一页</a></div><div class="pagination-next"><a href="/page/9/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/7/">7</a></li><li><a class="pagination-link is-current" href="/page/8/">8</a></li><li><a class="pagination-link" href="/page/9/">9</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/13/">13</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/myavatar_kakaxi.jpg" alt="Gavin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gavin</p><p class="is-size-6 is-block">Embedded &amp; IC Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shanghai, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">124</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">34</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">60</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/DustOfStars/" target="_blank" rel="me noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/DustOfStars/"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Configuration/"><span class="level-start"><span class="level-item">Configuration</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/IC%E9%AA%8C%E8%AF%81/"><span class="level-start"><span class="level-item">IC验证</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Leetcode/"><span class="level-start"><span class="level-item">Leetcode</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/NLP/EDA/"><span class="level-start"><span class="level-item">EDA</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/Numpy/"><span class="level-start"><span class="level-item">Numpy</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/Torch/"><span class="level-start"><span class="level-item">Torch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/NLP/Torch/Model/"><span class="level-start"><span class="level-item">Model</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/NLP%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/"><span class="level-start"><span class="level-item">NLP代码详解</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/"><span class="level-start"><span class="level-item">NXP</span></span><span class="level-end"><span class="level-item tag">16</span></span></a><ul><li><a class="level is-mobile" href="/categories/NXP/KW38/"><span class="level-start"><span class="level-item">KW38</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/RT1050EVKB/"><span class="level-start"><span class="level-item">RT1050EVKB</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/RT1052/"><span class="level-start"><span class="level-item">RT1052</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/NXP/RT1052/%E9%87%8E%E7%81%AB/"><span class="level-start"><span class="level-item">野火</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/Plugins/"><span class="level-start"><span class="level-item">Plugins</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul><li><a class="level is-mobile" href="/categories/Plugins/Analytics/"><span class="level-start"><span class="level-item">Analytics</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Comment/"><span class="level-start"><span class="level-item">Comment</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Donation/"><span class="level-start"><span class="level-item">Donation</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Other/"><span class="level-start"><span class="level-item">Other</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Search/"><span class="level-start"><span class="level-item">Search</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Share/"><span class="level-start"><span class="level-item">Share</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ReferenceManual/"><span class="level-start"><span class="level-item">ReferenceManual</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/STL/"><span class="level-start"><span class="level-item">STL</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/STL/forward-list/"><span class="level-start"><span class="level-item">forward_list</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/STL/vector/"><span class="level-start"><span class="level-item">vector</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Widgets/"><span class="level-start"><span class="level-item">Widgets</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="level-start"><span class="level-item">嵌入式</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/"><span class="level-start"><span class="level-item">代码解读</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/%E4%B8%AD%E6%96%AD/"><span class="level-start"><span class="level-item">中断</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">工具</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/vim/"><span class="level-start"><span class="level-item">vim</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E5%AD%97IC/"><span class="level-start"><span class="level-item">数字IC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%8B%B1%E8%AF%AD/"><span class="level-start"><span class="level-item">英语</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%B7%AF%E7%A7%91V0/"><span class="level-start"><span class="level-item">路科V0</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-11T06:11:12.000Z">2023-12-11</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC7%E8%8A%82-rt1050-%E7%A1%AC%E4%BB%B6%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/">RT1050开发--第7节 RT1050 硬件启动模式</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-11T05:37:29.000Z">2023-12-11</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC6%E8%8A%82-rt1050-memory-mapping/">RT1050开发--第6节 RT1050 Memory Mapping</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-05T14:28:25.000Z">2023-12-05</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC5%E8%8A%82-rt1050-hello-world-%EF%BC%88keil-v5%EF%BC%89/">RT1050开发--第5节 RT1050 Hello World （Keil V5）</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-04T14:33:36.000Z">2023-12-04</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC4%E8%8A%82-rt1050%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">RT1050开发--第4节 RT1050开发环境搭建</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-04T14:31:32.000Z">2023-12-04</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC3%E8%8A%82-rt1050%E7%A1%AC%E4%BB%B6%E5%B9%B3%E5%8F%B0/">RT1050开发--第3节 RT1050硬件平台</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">十二月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">三月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/01/"><span class="level-start"><span class="level-item">一月 2017</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/01/"><span class="level-start"><span class="level-item">一月 2016</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">一月 2015</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">一月 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/01/"><span class="level-start"><span class="level-item">一月 2013</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ARM/"><span class="tag">ARM</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BOARD/"><span class="tag">BOARD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Demo/"><span class="tag">Demo</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FLASH/"><span class="tag">FLASH</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPIO/"><span class="tag">GPIO</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPIO%E4%B8%AD%E6%96%AD/"><span class="tag">GPIO中断</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Getting-Started/"><span class="tag">Getting Started</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IC%E9%AA%8C%E8%AF%81/"><span class="tag">IC验证</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Icarus-User-Guide/"><span class="tag">Icarus User Guide</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97/"><span class="tag">Icarus用户指南</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LED/"><span class="tag">LED</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Leetcode/"><span class="tag">Leetcode</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Model/"><span class="tag">Model</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NXP/"><span class="tag">NXP</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PDF/"><span class="tag">PDF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RAM/"><span class="tag">RAM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROM/"><span class="tag">ROM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RT1050EVKB/"><span class="tag">RT1050EVKB</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RT1052/"><span class="tag">RT1052</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReferenceManual/"><span class="tag">ReferenceManual</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/STL/"><span class="tag">STL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Verilog/"><span class="tag">System Verilog</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Thread/"><span class="tag">Thread</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Torch/"><span class="tag">Torch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UART/"><span class="tag">UART</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UVM/"><span class="tag">UVM</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZigBee/"><span class="tag">ZigBee</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyTorch/"><span class="tag">pyTorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vector/"><span class="tag">vector</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"><span class="tag">二分查找</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/"><span class="tag">代码解读</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/"><span class="tag">代码随想录</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%8E%E5%8A%9F%E8%80%97%E8%AE%A1%E6%97%B6%E5%99%A8LPTMR/"><span class="tag">低功耗计时器LPTMR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"><span class="tag">双指针</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%A8%E6%9C%9F%E4%B8%AD%E6%96%AD%E8%AE%A1%E6%97%B6%E5%99%A8PIT/"><span class="tag">周期中断计时器PIT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9F%BA%E7%A1%80/"><span class="tag">基础</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9FRTC/"><span class="tag">实时时钟RTC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="tag">嵌入式</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">总结</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/"><span class="tag">数据探索</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E7%BB%84/"><span class="tag">数组</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E5%B9%B3%E6%96%B9/"><span class="tag">有序数组的平方</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"><span class="tag">滑动窗口</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/"><span class="tag">理论基础</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0/"><span class="tag">移除元素</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%BB%E9%99%A4%E9%93%BE%E8%A1%A8%E5%85%83%E7%B4%A0/"><span class="tag">移除链表元素</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%80%83%E7%A0%94%E8%8B%B1%E8%AF%AD100%E5%8F%A5/"><span class="tag">考研英语100句</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%8B%B1%E8%AF%AD/"><span class="tag">英语</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5%E2%85%A1/"><span class="tag">螺旋矩阵Ⅱ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E6%97%B6%E5%99%A8PWM%E6%A8%A1%E5%9D%97TPM/"><span class="tag">计时器PWM模块TPM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B/"><span class="tag">设计流程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%87%8E%E7%81%AB/"><span class="tag">野火</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"><span class="tag">长度最小的子数组</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="DustOfStars" height="28"></a><p class="is-size-7"><span>&copy; 2024 Gavin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>
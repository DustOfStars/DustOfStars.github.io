<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><title>分类: 路科V0 - DustOfStars</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Icaurs - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icaurs - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Go ahead, and believe in yourself."><meta property="og:type" content="blog"><meta property="og:title" content="DustOfStars"><meta property="og:url" content="https://dustofstars.github.io/"><meta property="og:site_name" content="DustOfStars"><meta property="og:description" content="Go ahead, and believe in yourself."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://dustofstars.github.io/img/og_image.png"><meta property="article:author" content="Gavin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://dustofstars.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://dustofstars.github.io"},"headline":"DustOfStars","image":["https://dustofstars.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Gavin"},"publisher":{"@type":"Organization","name":"DustOfStars","logo":{"@type":"ImageObject","url":"https://dustofstars.github.io/img/logo.svg"}},"description":"Go ahead, and believe in yourself."}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-72437521-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-72437521-5');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0">
<style>.not-gallery-item { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .not-gallery-item > span { position: relative; z-index: 10; }  .not-gallery-item img, .not-gallery-item .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .not-gallery-item img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .not-gallery-item-fallback { color: inherit; } .not-gallery-item-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="DustOfStars" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="DustOfStars" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">路科V0</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-17T03:27:18.000Z" title="5/17/2022, 3:27:18 AM">2022-05-17</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">23 分钟读完 (大约3426个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/">路科V0P30P33-覆盖率-代码覆盖率-功能覆盖率-从功能描述到覆盖率</a></p><div class="content"><h1 id="覆盖率"><a href="#覆盖率" class="headerlink" title="覆盖率"></a>覆盖率</h1><ul>
<li>随机测试比定向测试多了很多的可能性，但是需要考虑，什么时候结束验证呢？涉及到<strong>覆盖率</strong>指标的问题。<ul>
<li>是否所有设计的功能在验证计划中都已经验证了？</li>
<li>是否代码中的某些部分从未执行过？</li>
</ul>
</li>
<li>覆盖率 用来<strong>衡量设计验证完备性</strong>的通用词语；</li>
<li><strong>覆盖率工具</strong>会在仿真过程中收集信息，然后进行后续处理并得到<strong>覆盖率报告</strong>。</li>
<li>通过覆盖率报告找到覆盖率之外的盲区，然后修改现有的测试用例或者创建新的测试来填补这些盲区；</li>
<li>一直迭代进行，直到覆盖率满足要求；</li>
</ul>
<p>覆盖率反馈回路 ：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E8%A6%86%E7%9B%96%E7%8E%87%E5%8F%8D%E9%A6%88%E5%9B%9E%E8%B7%AF.png" class="" title="覆盖率反馈回路">

<h2 id="优化验证效率"><a href="#优化验证效率" class="headerlink" title="优化验证效率"></a>优化验证效率</h2><ul>
<li>通过覆盖率量化验证之后，可以在更复杂的情况下捕捉一些功能特性是否被覆盖：<ul>
<li>在测试X特性时，Y特性是否同时被使能和测试？功能之间存在关联</li>
<li>是否可以精简已有的测试来加速仿真？并取得同样的覆盖率。冗余问题</li>
<li>观察覆盖率在达到一定数值之后，是否停滞不再上升？</li>
</ul>
</li>
<li>覆盖率是用来<strong>衡量验证精度和完备性</strong>的数据指标；</li>
<li>可以告诉用户哪些结构在仿真时被触发，哪些没有；</li>
</ul>
<h2 id="覆盖率分类"><a href="#覆盖率分类" class="headerlink" title="覆盖率分类"></a>覆盖率分类</h2><ul>
<li>代码覆盖率</li>
<li>功能覆盖率</li>
<li>断言覆盖率</li>
</ul>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E8%A6%86%E7%9B%96%E7%8E%87%E5%88%86%E7%B1%BB.png" class="" title="覆盖率分类">

<p>按照覆盖率生成的方法，分为两类：</p>
<ul>
<li>隐形生成：<ul>
<li>代码覆盖率，仿真工具可以自动分析RTL设计代码的执行结果得到代码覆盖率</li>
</ul>
</li>
<li>显性生成：<ul>
<li>断言覆盖率</li>
<li>功能覆盖率，需要依照功能描述去定义的覆盖率；</li>
</ul>
</li>
</ul>
<p>按照覆盖率溯源，分两类：</p>
<ul>
<li>从功能描述而来：<ul>
<li>功能覆盖率</li>
</ul>
</li>
<li>从设计实现而来<ul>
<li>代码覆盖率</li>
<li>断言覆盖率</li>
</ul>
</li>
</ul>
<h1 id="代码覆盖率"><a href="#代码覆盖率" class="headerlink" title="代码覆盖率"></a>代码覆盖率</h1><ul>
<li>包含未知错误的设计的问题在于它看起来很好，但是绝对不可能知道被验证的设计在功能上是完全正确的；</li>
<li>即使所有测试平台都成功仿真，但是只要有部分RTL代码未执行，都可能触发功能错误，因此需要代码覆盖率！</li>
<li>代码覆盖率的优势在于可以由仿真工具自动收集；</li>
<li>一般只关注设计的代码覆盖率，不关注测试平台的代码覆盖率；</li>
</ul>
<h2 id="行覆盖率（statement-line）"><a href="#行覆盖率（statement-line）" class="headerlink" title="行覆盖率（statement/line）"></a>行覆盖率（statement/line）</h2><ul>
<li>衡量源码哪些行被执行，哪些行没有；</li>
<li>每一行执行的最小次数也可以设置为一个指标；</li>
<li>代码覆盖率可以指出在缺乏激励的情况下，某些赋值的代码行没有被执行的情况，也可以指出一些漏洞影响或者无用代码的影响下，一些代码行也无法被执行的情况；</li>
<li>对于无用代码，即永远不会执行的代码，可以从覆盖率中过滤掉；</li>
<li>行覆盖率也叫做块覆盖率，块是在灾星单个语句时语句序列；</li>
<li>比如，只要if为true，就会执行名为acked的块，因此这个块的执行等同于四个单独语句的执行；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (data == <span class="number">1'b1</span>) <span class="keyword">begin</span>: acked</span><br><span class="line">    as &lt;= <span class="number">1'b0</span>;</span><br><span class="line">    data &lt;= <span class="number">16'hzzzz</span>;</span><br><span class="line">    bus_rq &lt;= <span class="number">1'b0</span>;</span><br><span class="line">    state &lt;= IDLE;</span><br><span class="line"><span class="keyword">end</span>: acked</span><br></pre></td></tr></tbody></table></figure>

<h2 id="分支覆盖率（branch）"><a href="#分支覆盖率（branch）" class="headerlink" title="分支覆盖率（branch）"></a>分支覆盖率（branch）</h2><ul>
<li>分支覆盖率是用来对条件语句<code>if/else  case  ?:</code>，指出其执行的分支轨迹；</li>
</ul>
<h2 id="条件覆盖率（condition-expression）"><a href="#条件覆盖率（condition-expression）" class="headerlink" title="条件覆盖率（condition/expression）"></a>条件覆盖率（condition/expression）</h2><ul>
<li>条件覆盖率用来衡量一些布尔表达式的各个条件真伪判断的执行轨迹；</li>
<li>比如下面的if中两个条件是否各自衡量为true、false；</li>
<li><code>if (parity == ODD || parity == EVEN) begin</code></li>
</ul>
<h2 id="状态机覆盖率（FSM）"><a href="#状态机覆盖率（FSM）" class="headerlink" title="状态机覆盖率（FSM）"></a>状态机覆盖率（FSM）</h2><ul>
<li><strong>仿真工具可以自动识别状态机，因此在收集覆盖率时，可以将覆盖率状态的执行情况监测到</strong>；</li>
<li>可以反映到每个状态的进入次数、状态之间的跳转次数、以及多个状态的跳转顺序等；</li>
<li>因为FSM中的每个状态<strong>通常使用case语句中的选项进行编码</strong>，所以任务没有访问到的状态都可以通过未覆盖的语句清楚的识别到；</li>
</ul>
<h2 id="跳转覆盖率（toggle）"><a href="#跳转覆盖率（toggle）" class="headerlink" title="跳转覆盖率（toggle）"></a>跳转覆盖率（toggle）</h2><ul>
<li>用来衡量寄存器跳转次数（0-&gt;1, 1-&gt;0）；</li>
<li>一般项目会要求模块的端口实现至少一次1到0和一次0到1的跳转；，以保证模块的集成和模块之间的互动；</li>
<li>也有项目要求所有的寄存器和端口一样，满足跳转的最小次数；</li>
<li>端口跳转覆盖率常用来测试IP模块之间的基本连接性，比如检查一些输入端口是否没有连接，已经连接的端口的比特位数是否不匹配，一些已连接的输入是否被给定的固定值等；</li>
</ul>
<h2 id="代码覆盖率100-的含义"><a href="#代码覆盖率100-的含义" class="headerlink" title="代码覆盖率100%的含义"></a>代码覆盖率100%的含义</h2><ul>
<li>表明整个设计都已执行；</li>
<li><strong>表示验证环境运行设计源码的彻底程度，但是没有提供有关验证组件的正确性和完整性的指示</strong>；</li>
<li>代码覆盖率应该用于帮助识别验证未执行的边界情况或者依赖于设计实现的特性；</li>
<li>对于未覆盖的场景，考虑更新和添加测试；</li>
</ul>
<h1 id="功能覆盖率"><a href="#功能覆盖率" class="headerlink" title="功能覆盖率"></a>功能覆盖率</h1><ul>
<li>功能验证的目标，在于确定设计有关的功能描述是否都实现了；</li>
<li>可能存在的不期望的情况：<ul>
<li>哪些功能没有被实现；</li>
<li>实现错误；</li>
<li>哪些没有要求的功能也实现了；</li>
</ul>
</li>
</ul>
<h2 id="覆盖组（covergroup）"><a href="#覆盖组（covergroup）" class="headerlink" title="覆盖组（covergroup）"></a>覆盖组（covergroup）</h2><ul>
<li>覆盖组和类相似，在一次定义之后可以多次例化；</li>
<li><strong>覆盖组含有覆盖点（cover point）、选项（option）、形式参数（argument）和可选触发（trigger event）</strong>；</li>
<li>一个覆盖组包含的一个或者多个数据点，都是在<strong>同一时间采集</strong>；</li>
<li><strong>覆盖组可以定义在类里，也可以定义在模块或者程序中</strong>；</li>
<li>覆盖组可以采集任何可见变量，比如程序或模块变量、接口信号、或者设计中的任何信号；</li>
<li>在类中的覆盖组也可以采集类的成员变量；</li>
<li><strong>覆盖组应该定义在适当的抽象层次上</strong>；</li>
<li>对任何事务的采样都必须<strong>等到数据被待测设计接收到</strong>以后；</li>
<li>一个<strong>类也可以包含多个覆盖组</strong>，每个覆盖组可以根据需要将它们使能或者禁止；</li>
<li>内部可以定义多个coverpoint，<strong>如果不在covergroup声明时指定采样事件，那么默认该覆盖组只能依赖于另一个手动采样函数sample()</strong>;</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> {red, green, blue} color;</span><br><span class="line"><span class="keyword">bit</span>[<span class="number">3</span>:<span class="number">0</span>] pixel_adr, pixel_offset, pixel_hue;</span><br><span class="line"><span class="keyword">covergroup</span> g2 @(<span class="keyword">posedge</span> clk);</span><br><span class="line">    Hue: <span class="keyword">coverpoint</span> pixel_hue;</span><br><span class="line">    Offset: <span class="keyword">coverpoint</span> pixel_offset;</span><br><span class="line">    AxC: <span class="keyword">cross</span> color, pixel_adr;    <span class="comment">// cross 2变量</span></span><br><span class="line">    all: <span class="keyword">cross</span> color, Hue, Offset;  <span class="comment">// cross 1变量和2个coverpoint</span></span><br><span class="line"><span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line">g2 cg_inst = <span class="keyword">new</span>();</span><br></pre></td></tr></tbody></table></figure>

<p>其他：</p>
<ul>
<li>更多的时候，将覆盖组定义在类中，从而去覆盖类的成员变量；</li>
<li>在类中声明covergroup的方式称为<strong>嵌入式覆盖组声明</strong>，以下栗子声明一个覆盖组cov1和它的实例c1;</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> xyz;</span><br><span class="line">    <span class="keyword">bit</span>[<span class="number">3</span>:<span class="number">0</span>] m_x;</span><br><span class="line">    <span class="keyword">int</span> m_y;</span><br><span class="line">    <span class="keyword">bit</span> m_z;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">covergroup</span> cov1 @m_z;</span><br><span class="line">        <span class="keyword">coverpoint</span> m_x;</span><br><span class="line">        <span class="keyword">coverpoint</span> m_y;</span><br><span class="line">    <span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>();</span><br><span class="line">        cov1 c1 = <span class="keyword">new</span>();</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="覆盖点（coverpoint）"><a href="#覆盖点（coverpoint）" class="headerlink" title="覆盖点（coverpoint）"></a>覆盖点（coverpoint）</h2><ul>
<li>一个covergroup可以包含一个或者多个coverpoint，一个coverpoint可以用来采样数据或者数据的变化；</li>
<li><strong>一个coverpoint可以对应多个bin（仓）</strong>；</li>
<li>这些bin可以显性指定，也可以隐性指定；</li>
<li>coverpoint对数据的采样发生在covergroup采样的时候；</li>
<li>建议给不同的覆盖点不同的名字，以便于查看；</li>
<li>有名字的coverpoint可以用来进一步处理，比如<strong>在交叉覆盖率中使用某个coverpoint</strong>；</li>
<li>可以通过iff在一些情况下禁止coverpoint采集</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">covergroup</span> g4;</span><br><span class="line">    <span class="keyword">coverpoint</span> s0 <span class="keyword">iff</span>(!reset);</span><br><span class="line"><span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">covergroup</span> cg (<span class="keyword">ref</span> <span class="keyword">int</span> x, <span class="keyword">ref</span> <span class="keyword">int</span> y, <span class="keyword">input</span> <span class="keyword">int</span> c);</span><br><span class="line">    <span class="keyword">coverpoint</span> x;</span><br><span class="line">    b: <span class="keyword">coverpoint</span> y;</span><br><span class="line">    cx: <span class="keyword">coverpoint</span> x;</span><br><span class="line">    d: <span class="keyword">coverpoint</span> y[<span class="number">31</span>:<span class="number">24</span>];</span><br><span class="line">    <span class="keyword">cross</span> x, y;     <span class="comment">// 创建交叉覆盖率</span></span><br><span class="line"><span class="keyword">endgroup</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="仓：值覆盖"><a href="#仓：值覆盖" class="headerlink" title="仓：值覆盖"></a>仓：值覆盖</h2><ul>
<li>关键字bins可以用来将每个感兴趣的数值均对应一个独立的bin，或者将所有值对应到同一个bin；</li>
<li>iff语句也可以用在bin的定义，表示条件为false，在采集该bin的时候，该bin的采样数目不会增长；</li>
<li>bins除了可以覆盖数值，还可以覆盖数值的变化<ul>
<li><code>value1 =&gt; value2;</code> </li>
<li>语法：<code>trans_item[* repeat_range]</code></li>
<li><code>3[* 5]</code>  表示3=&gt;3=&gt;3=&gt;3=&gt;3</li>
<li><code>3[* 3:5]</code> 表示(3=&gt;3=&gt;3),(3=&gt;3=&gt;3=&gt;3)或者(3=&gt;3=&gt;3=&gt;3=&gt;3)</li>
</ul>
</li>
<li>如果coverpoint没有指定任何bin，则sv会为他自动生成bin，遵循原则：<ul>
<li>如果变量是枚举类型，则bin的数量是枚举类型的基数（所有枚举值得和）；</li>
<li><strong>如果变量是整型（位宽为M），则bin的类型是<code>2^M</code>和<code>auto_bin_max</code>的较小值</strong>；</li>
</ul>
</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bit</span> [<span class="number">9</span>:<span class="number">0</span>] v_a;</span><br><span class="line"><span class="keyword">covergroup</span> cg @(<span class="keyword">posedge</span> clk);</span><br><span class="line">    <span class="keyword">coverpoint</span> v_a {</span><br><span class="line">        <span class="keyword">bins</span> a = {[<span class="number">0</span>:<span class="number">63</span>], <span class="number">65</span>};  <span class="comment">// a是变量，表示在以下条件的话采样</span></span><br><span class="line">        <span class="keyword">bins</span> b[] = {[<span class="number">127</span>:<span class="number">150</span>], [<span class="number">148</span>:<span class="number">191</span>]};  <span class="comment">//b[]是个数组，表示满足以下条件的话分别采集一次</span></span><br><span class="line">        <span class="keyword">bins</span> c[] = {<span class="number">200</span>, <span class="number">201</span>, <span class="number">202</span>};</span><br><span class="line">        <span class="keyword">bins</span> d = {[<span class="number">1000</span>:$]};</span><br><span class="line">        <span class="keyword">bins</span> others[] = <span class="keyword">default</span>;    <span class="comment">// default表示其他的值都采样一次</span></span><br><span class="line">    }</span><br><span class="line"><span class="keyword">endgroup</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="仓：-忽略类型和非法类型"><a href="#仓：-忽略类型和非法类型" class="headerlink" title="仓： 忽略类型和非法类型"></a>仓： 忽略类型和非法类型</h2><ul>
<li><code>ingnore_bins</code>用来将其排除在有效统计的bin集合之外</li>
<li><code>illegal_bins</code>用来指出采样的数值为非法，<strong>如果illegal_bins被采样到，那么仿真会报错</strong>！</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">covergroup</span> cg23;</span><br><span class="line">    <span class="keyword">coverpoint</span> a {</span><br><span class="line">        <span class="keyword">ignore_bins</span> ignore_vals = {<span class="number">7</span>, <span class="number">8</span>};</span><br><span class="line">        <span class="keyword">ignore_bins</span> ignore_trans = (<span class="number">1</span>=&gt;<span class="number">3</span>=&gt;<span class="number">5</span>);</span><br><span class="line">    }</span><br><span class="line"><span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">covergroup</span> cg3;</span><br><span class="line">    <span class="keyword">coverpoint</span> b {</span><br><span class="line">        <span class="keyword">illegal_bins</span> bad_vals = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>};</span><br><span class="line">        <span class="keyword">illegal_bins</span> bad_trans = (<span class="number">4</span>=&gt;<span class="number">5</span>=&gt;<span class="number">6</span>);</span><br><span class="line">    }</span><br><span class="line"><span class="keyword">endgroup</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="交叉覆盖率-cross"><a href="#交叉覆盖率-cross" class="headerlink" title="交叉覆盖率 cross"></a>交叉覆盖率 cross</h2><ul>
<li>covergroup可以在两个或者更多的coverpoint或者变量之间定义交叉覆盖率；</li>
<li>在对a和b产生交叉覆盖率之前，系统会先为他们隐性生成对应的coverpoint和bin，每个coverpoint都有16个自动产生的bin；</li>
<li>两个coverpoint交叉产生256个bin；</li>
<li>注意：<strong>被声明为default、ignore、illegal的bin不会被交叉覆盖率计算</strong>；</li>
<li><strong>交叉覆盖率只允许在同一个covergroup中定义的覆盖点参与运算</strong>。</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bit</span> [<span class="number">3</span>:<span class="number">0</span>] a, b;</span><br><span class="line"><span class="keyword">covergroup</span> cov @(<span class="keyword">posedge</span> clk);</span><br><span class="line">    aXb : <span class="keyword">cross</span> a, b;</span><br><span class="line"><span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">bit</span> [<span class="number">31</span>:<span class="number">0</span>] a_var;</span><br><span class="line"><span class="keyword">bit</span> [<span class="number">3</span>:<span class="number">0</span>] b_var;</span><br><span class="line"><span class="keyword">covergroup</span> cov3 @(<span class="keyword">posedge</span> clk);</span><br><span class="line">    A : <span class="keyword">coverpoint</span> a_var {<span class="keyword">bins</span> yy[] = {[<span class="number">0</span>:<span class="number">9</span>]};}</span><br><span class="line">    CC : <span class="keyword">cross</span> b_var, A;</span><br><span class="line"><span class="keyword">endgroup</span></span><br></pre></td></tr></tbody></table></figure>


<h1 id="从功能描述到覆盖率"><a href="#从功能描述到覆盖率" class="headerlink" title="从功能描述到覆盖率"></a>从功能描述到覆盖率</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%A6%82%E8%BF%B01.png" class="" title="概述1">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%A6%82%E8%BF%B02.png" class="" title="概述2">

<h2 id="提取接口功能点"><a href="#提取接口功能点" class="headerlink" title="提取接口功能点"></a>提取接口功能点</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%8F%90%E5%8F%96%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD%E7%82%B9.png" class="" title="提取接口功能点">

<h2 id="提取内部功能点"><a href="#提取内部功能点" class="headerlink" title="提取内部功能点"></a>提取内部功能点</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%8F%90%E5%8F%96%E5%86%85%E9%83%A8%E5%8A%9F%E8%83%BD%E7%82%B9.png" class="" title="提取内部功能点">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%8F%90%E5%8F%96%E5%86%85%E9%83%A8%E5%8A%9F%E8%83%BD%E7%82%B92.png" class="" title="提取内部功能点2">

<h2 id="提取结构功能点"><a href="#提取结构功能点" class="headerlink" title="提取结构功能点"></a>提取结构功能点</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%8F%90%E5%8F%96%E7%BB%93%E6%9E%84%E5%8A%9F%E8%83%BD%E7%82%B9.png" class="" title="提取结构功能点">


<h2 id="标记功能点"><a href="#标记功能点" class="headerlink" title="标记功能点"></a>标记功能点</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E6%A0%87%E8%AE%B0%E5%8A%9F%E8%83%BD%E7%82%B9.png" class="" title="标记功能点">

<h2 id="验证分层"><a href="#验证分层" class="headerlink" title="验证分层"></a>验证分层</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E9%AA%8C%E8%AF%81%E5%88%86%E5%B1%82.png" class="" title="验证分层">


<h2 id="优先级划分"><a href="#优先级划分" class="headerlink" title="优先级划分"></a>优先级划分</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%92%E5%88%86.png" class="" title="优先级划分">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%92%E5%88%862.png" class="" title="优先级划分2">

<h2 id="从随机测试到功能覆盖率"><a href="#从随机测试到功能覆盖率" class="headerlink" title="从随机测试到功能覆盖率"></a>从随机测试到功能覆盖率</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E4%BB%8E%E9%9A%8F%E6%9C%BA%E6%B5%8B%E8%AF%95%E5%88%B0%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87.png" class="" title="从随机测试到功能覆盖率">


<h2 id="覆盖率实现的考量"><a href="#覆盖率实现的考量" class="headerlink" title="覆盖率实现的考量"></a>覆盖率实现的考量</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/%E8%A6%86%E7%9B%96%E7%8E%87%E5%AE%9E%E7%8E%B0%E7%9A%84%E8%80%83%E9%87%8F.png" class="" title="覆盖率实现的考量">


<h2 id="MCDT功能测试清单"><a href="#MCDT功能测试清单" class="headerlink" title="MCDT功能测试清单"></a>MCDT功能测试清单</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/MCDT%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%95.png" class="" title="MCDT功能测试清单">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p30p33-%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E7%8E%87-%E5%8A%9F%E8%83%BD%E8%A6%86%E7%9B%96%E7%8E%87-%E4%BB%8E%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0%E5%88%B0%E8%A6%86%E7%9B%96%E7%8E%87/MCDT%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%952.png" class="" title="MCDT功能测试清单2">





</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-15T17:52:47.000Z" title="5/15/2022, 5:52:47 PM">2022-05-16</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">15 分钟读完 (大约2255个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/">路科V0P26P29-MCDT测试结构-实现激励发生器-监测器和检查器-顶层环境和测试用例</a></p><div class="content"><h1 id="MCDT测试结构"><a href="#MCDT测试结构" class="headerlink" title="MCDT测试结构"></a>MCDT测试结构</h1><h2 id="MCDT测试平台结构"><a href="#MCDT测试平台结构" class="headerlink" title="MCDT测试平台结构"></a>MCDT测试平台结构</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/MCDT%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%BB%93%E6%9E%84.png" class="" title="MCDT测试平台结构">

<ul>
<li>要区分哪部分是硬件、哪部分是软件<ul>
<li>HW ： 待测的设计</li>
<li>SW ： 测试环境</li>
<li>软硬件之间交互通过interface</li>
</ul>
</li>
<li><strong>要清楚验证环境的各个组件之间的位置层次关系和它们之间是否有数据通信</strong>！<ul>
<li>验证组件之间的通信都是基于事务级的传送；</li>
<li>验证组件和硬件的通信必须依赖接口，通过硬件时序才能实现；</li>
</ul>
</li>
<li>理解仿真如何开始运转，各个验证组件如何工作，最后仿真如何结束</li>
</ul>
<h3 id="一些要注意的细节："><a href="#一些要注意的细节：" class="headerlink" title="一些要注意的细节："></a>一些要注意的细节：</h3><ul>
<li>channel initiator 和 channel monitor一一对应；</li>
<li>initiator和monitor被封装在了agent中；</li>
<li>由于arbiter不需要与下行握手，所以只外置了mcdt monitor而不需要mcdt responder；</li>
<li>所有的monitor都将监测到的数据送到mcdt checker；</li>
<li>MCDT checker内部例化了若干FIFO，是为了接收从MCDT的输入端和输出端的数据；</li>
<li>由于checker输入端和输出端FIFO中存放的数据类型一致，也为数据比较带来了方便；</li>
</ul>
<h2 id="激励发生器"><a href="#激励发生器" class="headerlink" title="激励发生器"></a>激励发生器</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8.png" class="" title="激励发生器">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A82.png" class="" title="激励发生器2">


<h2 id="监测器"><a href="#监测器" class="headerlink" title="监测器"></a>监测器</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E7%9B%91%E6%B5%8B%E5%99%A8.png" class="" title="监测器">


<h2 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E6%AF%94%E8%BE%83%E5%99%A8.png" class="" title="比较器">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E6%AF%94%E8%BE%83%E5%99%A82.png" class="" title="比较器2">



<h1 id="实现激励发生器"><a href="#实现激励发生器" class="headerlink" title="实现激励发生器"></a>实现激励发生器</h1><h2 id="实现-channel-stimulator"><a href="#实现-channel-stimulator" class="headerlink" title="实现 channel stimulator"></a>实现 channel stimulator</h2><ul>
<li>数据事务：<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> chnl_trans;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">bit</span>[<span class="number">31</span>:<span class="number">0</span>] data[];</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> ch_id;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> pkt_id;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> data_nidles;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> pkt_nidles;</span><br><span class="line">    <span class="keyword">bit</span> rsp;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">static</span> <span class="keyword">int</span> obj_id=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constraint</span> cstr {</span><br><span class="line">        <span class="keyword">soft</span> data<span class="variable">.size</span> <span class="keyword">inside</span> {[<span class="number">4</span>:<span class="number">8</span>]};</span><br><span class="line">        <span class="keyword">foreach</span> (data[i])</span><br><span class="line">            data[i] == <span class="number">'hC000_0000</span> + (<span class="keyword">this</span><span class="variable">.ch_id</span> &lt;&lt; <span class="number">24</span>) + (<span class="keyword">this</span><span class="variable">.pkt_id</span> &lt;&lt; <span class="number">8</span>) + i;</span><br><span class="line">        <span class="keyword">soft</span> ch_id == <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">soft</span> pkt_id == <span class="number">0</span>;</span><br><span class="line">        data_nidles <span class="keyword">inside</span> {[<span class="number">0</span>:<span class="number">2</span>]};</span><br><span class="line">        pkt_nidles <span class="keyword">inside</span> {[<span class="number">1</span>:<span class="number">10</span>]};</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.obj_id</span>++;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> chnl_trans clone();</span><br><span class="line">        chnl_trans c = <span class="keyword">new</span>();</span><br><span class="line">        c<span class="variable">.data</span> = <span class="keyword">this</span><span class="variable">.data</span>;</span><br><span class="line">        c<span class="variable">.ch_id</span> = <span class="keyword">this</span><span class="variable">.ch_id</span>;</span><br><span class="line">        c<span class="variable">.pkt_id</span> = <span class="keyword">this</span><span class="variable">.pkt_id</span>;</span><br><span class="line">        c<span class="variable">.data_nidles</span> = <span class="keyword">this</span><span class="variable">.data_nidles</span>;</span><br><span class="line">        c<span class="variable">.pkt_nidles</span> = <span class="keyword">this</span><span class="variable">.pkt_nidles</span>;</span><br><span class="line">        c<span class="variable">.rsp</span> = <span class="keyword">this</span><span class="variable">.rsp</span>;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span>: chnl_trans</span><br></pre></td></tr></tbody></table></figure></li>
<li>驱动激励的组件：<ul>
<li><strong>chnl_initiator的作用是从chnl_generator中获取chnl_trans的数据，并将其驱动到接口chnl_interface上面</strong>；</li>
</ul>
</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> chnl_initiator;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">string</span> name;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">virtual</span> chnl_intf intf;</span><br><span class="line">    mailbox <span class="variable">#(chnl_trans)</span> req_mb;</span><br><span class="line">    mailbox <span class="variable">#(chnl_trans)</span> rsp_mb;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"chnl_initiator"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//从外部获得虚拟指针，并赋值给自己的虚接口成员变量</span></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">void</span> set_interface(<span class="keyword">virtual</span> chnl_intf intf);</span><br><span class="line">        <span class="keyword">if</span>(intf == <span class="literal">null</span>)</span><br><span class="line">            <span class="built_in">$error</span>(<span class="string">"interface handle is NULL, please check if target interface has been intrantiated"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.intf</span> = intf;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.driver</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> drive();</span><br><span class="line">        chnl_trans req, rsp;</span><br><span class="line">        @(<span class="keyword">posedge</span> intf<span class="variable">.rstn</span>); <span class="comment">//系统复位信号</span></span><br><span class="line">        <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.req_mb</span><span class="variable">.get</span>(req); <span class="comment">// 获取激励</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.chnl_write</span>(req); <span class="comment">// 写出到接口</span></span><br><span class="line">            rsp = req<span class="variable">.clone</span>(); <span class="comment">//发送完毕之后克隆一份</span></span><br><span class="line">            rsp<span class="variable">.rsp</span> = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.rsp_mb</span><span class="variable">.put</span>(rsp);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> chnl_write(<span class="keyword">input</span> chnl_trans t);</span><br><span class="line">        <span class="keyword">foreach</span>(t<span class="variable">.data</span>[i]) <span class="keyword">begin</span></span><br><span class="line">            @(<span class="keyword">posedge</span> intf<span class="variable">.clk</span>);</span><br><span class="line">            intf<span class="variable">.ch_valid</span> &lt;= <span class="number">1</span>; <span class="comment">//在时钟上升沿置为有效</span></span><br><span class="line">            intf<span class="variable">.ch_data</span> &lt;= t<span class="variable">.data</span>[i];</span><br><span class="line">            @(<span class="keyword">negedge</span> intf<span class="variable">.clk</span>);</span><br><span class="line">            <span class="keyword">wait</span>(intf<span class="variable">.ch_ready</span> == <span class="number">'b1</span>);</span><br><span class="line">            <span class="built_in">$display</span>(<span class="string">"%0t: channel initiator [%s] sent data %x"</span>, <span class="built_in">$time</span>, name, t<span class="variable">.data</span>[i]);</span><br><span class="line">            <span class="keyword">repeat</span>(t<span class="variable">.data_nidles</span>) chnl_idle(); <span class="comment">//插入空闲周期</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">repeat</span>(t<span class="variable">.pkt_nidles</span>) chnl_idle();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> chnl_idle();</span><br><span class="line">        @(<span class="keyword">posedge</span> intf<span class="variable">.clk</span>);</span><br><span class="line">        intf<span class="variable">.ch_valid</span> &lt;= <span class="number">0</span>;</span><br><span class="line">        intf<span class="variable">.ch_data</span> &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: chnl_initiator</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>chnl_generator</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> chnl_generator;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> pkt_id = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> ch_id = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> data_nidles = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> pkt_nidles = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> data_size = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> ntrans = <span class="number">10</span>;</span><br><span class="line">    mailbox <span class="variable">#(chnl_trans)</span> req_mb;</span><br><span class="line">    mainbox <span class="variable">#(chnl_trans)</span> rsp_mb;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constraint</span> cstr {</span><br><span class="line">        <span class="keyword">soft</span> ch_id == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">soft</span> pkt_id == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">soft</span> data_size == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">soft</span> data_nidles == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">soft</span> pkt_nidles == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">soft</span> ntrans == <span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.req_mb</span> = <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.rsp_mb</span> = <span class="keyword">new</span>();</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用了多次创建数据事务，并且发送给chnl_initiator的任务send_trans</span></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">repeat</span>(ntrans) send_trans;</span><br><span class="line">        run_stop_flags<span class="variable">.put</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成transaction并put进入maibox</span></span><br><span class="line">    <span class="keyword">task</span> send_trans();</span><br><span class="line">        chnl_trans req, rsp;</span><br><span class="line">        req = <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">assert</span>(req<span class="variable">.randomize</span> <span class="keyword">with</span> {</span><br><span class="line">            <span class="keyword">local</span>::ch_id &gt;=<span class="number">0</span> -&gt; ch_id == <span class="keyword">local</span>::ch_id;</span><br><span class="line">            <span class="keyword">local</span>::pkt_id &gt;=<span class="number">0</span> -&gt; pkt_id == <span class="keyword">local</span>::pkt_id;</span><br><span class="line">            <span class="keyword">local</span>::data_nidles &gt;=<span class="number">0</span> -&gt; data_nidles == <span class="keyword">local</span>::data_nidles;</span><br><span class="line">            <span class="keyword">local</span>::pkt_nidles &gt;=<span class="number">0</span> -&gt; pkt_nidles == <span class="keyword">local</span>::pkt_nidles;</span><br><span class="line">            <span class="keyword">local</span>::data_size &gt;=<span class="number">0</span> -&gt; data_size == <span class="keyword">local</span>::data_size;</span><br><span class="line">        })</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">$fatal</span>(<span class="string">"[RNDFAIL] channel packet randomization failure!"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.pkt_id</span>++;</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.req_mb</span><span class="variable">.put</span>(req);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.rsp_mb</span><span class="variable">.get</span>(rsp);</span><br><span class="line">        <span class="keyword">assert</span>(rsp<span class="variable">.rsp</span>)</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">$error</span>(<span class="string">"[RSPERR] %0t error response received!"</span>, <span class="built_in">$time</span>);</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: chnl_generator</span><br></pre></td></tr></tbody></table></figure>


<h1 id="监测器和检查器"><a href="#监测器和检查器" class="headerlink" title="监测器和检查器"></a>监测器和检查器</h1><h2 id="监测器-1"><a href="#监测器-1" class="headerlink" title="监测器"></a>监测器</h2><blockquote>
<p>用户自定义结构体<code>mon_data_t</code>用来存放监测到的数据，被<code>chnl_monitor</code>和<code>mcdt_monitor</code>使用</p>
</blockquote>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// chnl_monitor</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="keyword">packed</span> {</span><br><span class="line">    <span class="keyword">bit</span>[<span class="number">31</span>:<span class="number">0</span>] data;</span><br><span class="line">    <span class="keyword">bit</span>[<span class="number">1</span>:<span class="number">0</span>] id;</span><br><span class="line">} mon_data_t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> chnl_monitor;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">string</span> name;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">virtual</span> chnl_intf intf;</span><br><span class="line">    mailbox <span class="variable">#(mon_data_t)</span> mon_mb;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"chnl_monitor"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">void</span> set_interface(<span class="keyword">virtual</span> chnl_intf intf);</span><br><span class="line">        <span class="keyword">if</span>(intf == <span class="literal">null</span>)</span><br><span class="line">            <span class="built_in">$error</span>(<span class="string">"interface handle is NULL, please check if target interface has been intrantiated"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.intf</span> = intf;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.mon_trans</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line">    <span class="comment">// 三个等号判断四值逻辑变量是否相等</span></span><br><span class="line">    <span class="keyword">task</span> mon_trans();</span><br><span class="line">        mon_data_t m;</span><br><span class="line">        <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">            @(<span class="keyword">posedge</span> intf<span class="variable">.clk</span> <span class="keyword">iff</span> (intf<span class="variable">.ch_valid</span>===<span class="number">'b1</span> &amp;&amp; intf<span class="variable">.ch_ready</span> ===<span class="number">'b1</span>));</span><br><span class="line">            m<span class="variable">.data</span> = intf<span class="variable">.ch_data</span>;</span><br><span class="line">            mon_mb<span class="variable">.put</span>(m);</span><br><span class="line">            <span class="built_in">$display</span>(<span class="string">"%0t %s channel monitor data %8x"</span>, <span class="built_in">$time</span>, <span class="keyword">this</span><span class="variable">.name</span>, m<span class="variable">.data</span>);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: chnl_monitor</span><br></pre></td></tr></tbody></table></figure>

<p>再实现一个mcdt_monitor</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mcdt_monitor</span></span><br><span class="line"><span class="keyword">class</span> mcdt_monitor;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">string</span> name;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">virtual</span> mcdt_intf intf;</span><br><span class="line">    mailbox <span class="variable">#(mon_data_t)</span> mon_mb;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"mcdt_monitor"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">void</span> set_interface(<span class="keyword">virtual</span> mcdt_intf intf);</span><br><span class="line">        <span class="keyword">if</span>(intf == <span class="literal">null</span>)</span><br><span class="line">            <span class="built_in">$error</span>(<span class="string">"interface handle is NULL, please check if target interface has been intrantiated"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.intf</span> = intf;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.mon_trans</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> mon_trans();</span><br><span class="line">        mon_data_t m;</span><br><span class="line">        <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">            @(<span class="keyword">posedge</span> intf<span class="variable">.clk</span> <span class="keyword">iff</span> intf<span class="variable">.mcdt_val</span>===<span class="number">'b1</span>);</span><br><span class="line">            m<span class="variable">.data</span> = intf<span class="variable">.mcdt_data</span>;</span><br><span class="line">            m<span class="variable">.id</span> = intf<span class="variable">.mcdt_id</span>;</span><br><span class="line">            mon_mb<span class="variable">.put</span>(m);</span><br><span class="line">            <span class="built_in">$display</span>(<span class="string">"%0t %s mcdt monitor data %8x and id %0d"</span>, <span class="built_in">$time</span>, <span class="keyword">this</span><span class="variable">.name</span>, m<span class="variable">.data</span>, m<span class="variable">.id</span>);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: mcdt_monitor</span><br></pre></td></tr></tbody></table></figure>


<h2 id="检查器"><a href="#检查器" class="headerlink" title="检查器"></a>检查器</h2><figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mcdt_checker</span></span><br><span class="line"><span class="keyword">class</span> mcdt_checker;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">string</span> name;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">int</span> error_count;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">int</span> cmp_count;</span><br><span class="line">    mailbox <span class="variable">#(mon_data_t)</span> in_mbs[<span class="number">3</span>];</span><br><span class="line">    mainbox <span class="variable">#(mon_data_t)</span> out_mb;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"mcdt_checker"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">this</span><span class="variable">.in_mbs</span>[i])</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.in_mbs</span>[i] = <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.out_mb</span> = <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.error_count</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.cmp_count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.do_compare</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每次从输出端out_mb中取出一个数据，然后通过id判断从哪个输入端获取数据，比较</span></span><br><span class="line">    <span class="keyword">task</span> do_compare();</span><br><span class="line">        mon_data_t im, om;</span><br><span class="line">        <span class="keyword">forever</span> <span class="keyword">begin</span></span><br><span class="line">            out_mb<span class="variable">.get</span>(m);</span><br><span class="line">            <span class="keyword">case</span>(om<span class="variable">.id</span>)</span><br><span class="line">                <span class="number">0</span>: in_mbs[<span class="number">0</span>]<span class="variable">.get</span>(im);</span><br><span class="line">                <span class="number">1</span>: in_mbs[<span class="number">1</span>]<span class="variable">.get</span>(im);</span><br><span class="line">                <span class="number">2</span>: in_mbs[<span class="number">2</span>]<span class="variable">.get</span>(im);</span><br><span class="line">                <span class="keyword">default</span>: <span class="built_in">$fatal</span>(<span class="string">"id %0d is not available"</span>, om<span class="variable">.id</span>);</span><br><span class="line">            <span class="keyword">endcase</span></span><br><span class="line">            <span class="keyword">if</span>(om<span class="variable">.data</span> != im<span class="variable">.id</span>) <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">this</span><span class="variable">.error_count</span>++;</span><br><span class="line">                <span class="built_in">$error</span>(<span class="string">"[CMPFAIL] Compared failed! mcdt out data %8x ch_id %0d is not equal with channel in data %8x"</span>, om<span class="variable">.data</span>, om<span class="variable">.id</span>, im<span class="variable">.data</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                <span class="built_in">$display</span>(<span class="string">"[CMPSUCD] Compared success! mcdt out data %8x ch_id %0d is equal with channel in data %8x"</span>, om<span class="variable">.data</span>, om<span class="variable">.id</span>, im<span class="variable">.data</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.cmp_count</span>++;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: mcdt_checker</span><br></pre></td></tr></tbody></table></figure>


<h1 id="顶层环境和测试用例"><a href="#顶层环境和测试用例" class="headerlink" title="顶层环境和测试用例"></a>顶层环境和测试用例</h1><h2 id="实现顶层环境1-agent"><a href="#实现顶层环境1-agent" class="headerlink" title="实现顶层环境1-agent"></a>实现顶层环境1-agent</h2><figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> chnl_agent;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">string</span> name;</span><br><span class="line">    chnl_initiator init;</span><br><span class="line">    chnl_monitor mon;</span><br><span class="line">    <span class="keyword">virtual</span> chnl_intf vif;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"chnl_agent"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.init</span> = <span class="keyword">new</span>({name, <span class="string">".init"</span>});</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.mon</span> = <span class="keyword">new</span>({name, <span class="string">".mon"</span>});</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自身获得虚接口，然后传递给ini和mon</span></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">void</span> set_interface(<span class="keyword">virtual</span> chnl_intf vif);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.vif</span> = vif;</span><br><span class="line">        init<span class="variable">.set_interface</span>(vif);</span><br><span class="line">        mon<span class="variable">.set_interface</span>(vif);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">fork</span>:</span><br><span class="line">            init<span class="variable">.run</span>();</span><br><span class="line">            mon<span class="variable">.run</span>();</span><br><span class="line">        <span class="keyword">join</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span>: chnl_agent</span><br></pre></td></tr></tbody></table></figure>

<h2 id="实现顶层环境2-mcdt-root-test"><a href="#实现顶层环境2-mcdt-root-test" class="headerlink" title="实现顶层环境2-mcdt_root_test"></a>实现顶层环境2-mcdt_root_test</h2><figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mcdt_root_test</span></span><br><span class="line"><span class="comment">// 包含3个gen，3个agent，1个checker</span></span><br><span class="line"><span class="keyword">class</span> mcdt_root_test;</span><br><span class="line">    chnl_generator gen[<span class="number">3</span>];</span><br><span class="line">    chnl_agent agents[<span class="number">3</span>];</span><br><span class="line">    mcdt_monitor mcdt_mon;</span><br><span class="line">    mcdt_checker chker;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> name;</span><br><span class="line">    <span class="keyword">event</span> gen_stop_e;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"mcdt_root_test"</span>);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.name</span> = name;</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.chker</span> = <span class="keyword">new</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span>(agents[i]) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">this</span><span class="variable">.agents</span>[i] = <span class="keyword">new</span>(<span class="built_in">$sformatf</span>(<span class="string">"agent%0d"</span>, i));</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.gen</span>[i] = <span class="keyword">new</span>();</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.agents</span>[i]<span class="variable">.init</span><span class="variable">.req_mb</span> = <span class="keyword">this</span><span class="variable">.gen</span>[i]<span class="variable">.req_mb</span>;</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.agents</span>[i]<span class="variable">.init</span><span class="variable">.rsp_mb</span> = <span class="keyword">this</span><span class="variable">.gen</span>[i]<span class="variable">.rsp_mb</span>;</span><br><span class="line">            <span class="keyword">this</span><span class="variable">.agents</span>[i]<span class="variable">.mon</span><span class="variable">.mon_mb</span> = <span class="keyword">this</span><span class="variable">.chker</span><span class="variable">.in_mbs</span>[i];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span><span class="variable">.mcdt_mon</span> = <span class="keyword">new</span>();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.mcdt_mon</span><span class="variable">.mon_mb</span> = <span class="keyword">this</span><span class="variable">.chker</span><span class="variable">.out_mb</span>;</span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"%s instantiated and connected objects"</span>, <span class="keyword">this</span><span class="variable">.name</span>);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">task</span> gen_stop_callback();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待三个gen都发送完激励数据后，交还钥匙给旗语run_stop_flags</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">task</span> run_stop_callback();</span><br><span class="line">        $diplay(<span class="string">"run_stop_callback enterred"</span>);</span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"%s: wait for all generators have generated and tranferred transcations"</span>, <span class="keyword">this</span><span class="variable">.name</span>);</span><br><span class="line">        run_stop_flags<span class="variable">.get</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="built_in">$finish</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">task</span> run();</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.do_config</span>(); <span class="comment">//决定产生多少个怎样的随机数据</span></span><br><span class="line">        <span class="keyword">fork</span></span><br><span class="line">            agents[<span class="number">0</span>]<span class="variable">.run</span>();</span><br><span class="line">            agents[<span class="number">1</span>]<span class="variable">.run</span>();</span><br><span class="line">            agents[<span class="number">2</span>]<span class="variable">.run</span>();</span><br><span class="line">            mcdt_mon<span class="variable">.run</span>();</span><br><span class="line">            chker<span class="variable">.run</span>();</span><br><span class="line">        <span class="keyword">join_none</span></span><br><span class="line">        <span class="keyword">fork</span> : gen_threads</span><br><span class="line">            gen[<span class="number">0</span>]<span class="variable">.run</span>();</span><br><span class="line">            gen[<span class="number">1</span>]<span class="variable">.run</span>();</span><br><span class="line">            gen[<span class="number">2</span>]<span class="variable">.run</span>();</span><br><span class="line">        <span class="keyword">join</span></span><br><span class="line">        run_stop_callback();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> set_interface(<span class="keyword">virtual</span> chnl_intf ch0_vif,</span><br><span class="line">    <span class="keyword">virtual</span> chnl_intf ch1_vif,</span><br><span class="line">    <span class="keyword">virtual</span> chnl_intf ch2_vif,</span><br><span class="line">    <span class="keyword">virtual</span> mcdt_intf mcdt_vif);</span><br><span class="line">        agents[<span class="number">0</span>]<span class="variable">.set_interface</span>(ch0_vif);</span><br><span class="line">        agents[<span class="number">1</span>]<span class="variable">.set_interface</span>(ch1_vif);</span><br><span class="line">        agents[<span class="number">2</span>]<span class="variable">.set_interface</span>(ch2_vif);</span><br><span class="line">        mcdt_mon<span class="variable">.set_interface</span>(mcdt_vif);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> do_config();</span><br><span class="line">        <span class="comment">// 在这里配置gen的参数,用一个子类的方法去实现他</span></span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span>: mcdt_root_test</span><br></pre></td></tr></tbody></table></figure>


<h2 id="实现测试用例"><a href="#实现测试用例" class="headerlink" title="实现测试用例"></a>实现测试用例</h2><figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> mcdt_basic_test <span class="keyword">extends</span> mcdt_root_test;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">"mcdt_basic_test"</span>);</span><br><span class="line">        <span class="keyword">super</span><span class="variable">.new</span>(name);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> do_config();</span><br><span class="line">        <span class="keyword">super</span><span class="variable">.do_config</span>();</span><br><span class="line">        <span class="keyword">assert</span>(gen[<span class="number">0</span>]<span class="variable">.randomize</span>() <span class="keyword">with</span> {ntrans==<span class="number">100</span>; data_nidles==<span class="number">0</span>; pkt_nidles==<span class="number">0</span>; data_size==<span class="number">8</span>;})</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">$fatal</span>(<span class="string">"[RNDFAIL] gen[0] randomize failed"</span>);</span><br><span class="line">        <span class="keyword">assert</span>(gen[<span class="number">1</span>]<span class="variable">.randomize</span>() <span class="keyword">with</span> {ntrans==<span class="number">50</span>; data_nidles <span class="keyword">inside</span> {[<span class="number">1</span>:<span class="number">2</span>]}; pkt_nidles <span class="keyword">inside</span> {[<span class="number">3</span>:<span class="number">5</span>]}; data_size==<span class="number">6</span>;})</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">$fatal</span>(<span class="string">"[RNDFAIL] gen[1] randomize failed"</span>);</span><br><span class="line">        <span class="keyword">assert</span>(gen[<span class="number">2</span>]<span class="variable">.randomize</span>() <span class="keyword">with</span> {ntrans==<span class="number">80</span>; data_nidles <span class="keyword">inside</span> {[<span class="number">0</span>:<span class="number">1</span>]}; pkt_nidles <span class="keyword">inside</span> {[<span class="number">1</span>:<span class="number">2</span>]}; data_size==<span class="number">32</span>;})</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">$fatal</span>(<span class="string">"[RNDFAIL] gen[2] randomize failed"</span>);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span>: mcdt_basic_test</span><br></pre></td></tr></tbody></table></figure>

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p26p29-mcdt%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84-%E5%AE%9E%E7%8E%B0%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8-%E7%9B%91%E6%B5%8B%E5%99%A8%E5%92%8C%E6%A3%80%E6%9F%A5%E5%99%A8-%E9%A1%B6%E5%B1%82%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/%E5%AE%8C%E6%95%B4%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="" title="完整验证环境结构图"></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-15T07:44:03.000Z" title="5/15/2022, 7:44:03 AM">2022-05-15</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">13 分钟读完 (大约1895个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p23p25%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5-%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/">路科V0P23P25线程控制-线程同步-线程通信</a></p><div class="content"><h1 id="线程控制"><a href="#线程控制" class="headerlink" title="线程控制"></a>线程控制</h1><h2 id="什么是线程"><a href="#什么是线程" class="headerlink" title="什么是线程"></a>什么是线程</h2><ul>
<li>线程是独立运行的程序；</li>
<li>需要被<strong>触发</strong>，可以结束或者不结束；</li>
<li>在module中的initial和always，都可以看做<strong>独立的线程</strong>，会在仿真0时刻开始，选择结束或者不结束；</li>
<li>硬件模型中，由于都是always语句块，所以可以看成是多个独立运行的线程，<strong>他们一直占用着仿真资源，因为不会结束</strong>；</li>
<li>验证环境中需要由initial语句块去创建，在仿真过程中，验证环境中的对象可以<strong>创建和销毁</strong>，因此验证环境中的资源是动态的。</li>
<li>验证环境中的initial语句块有两种分组方式，begin..end和fork..join<ul>
<li><strong>begin..end ： 顺序方式执行</strong></li>
<li><strong>fork..join ： 并发方式执行</strong></li>
<li><strong>与fork..join类似的，还有fork..join_any和fork..join_none</strong></li>
</ul>
</li>
<li>线程的执行轨迹是树状结构，任何线程都有父线程；</li>
<li>父线程可以开辟若干个子线程，父线程可以暂停或者终止子线程；</li>
<li>子线程终止时，父线程可以继续执行；</li>
<li><strong>父线程终止时，它的所有子线程都会终止</strong>；</li>
</ul>
<h2 id="并行线程"><a href="#并行线程" class="headerlink" title="并行线程"></a>并行线程</h2><ul>
<li>fork..join : 等待所有子线程结束，才会继续执行后面的；</li>
<li>fork..join_any : 只要有一个子线程结束(最短的先结束)，就会继续执行后面的；</li>
<li>fork..join_none : 不需要等待任何子线程结束，就可以继续执行后面的；</li>
<li><strong>注意</strong> ： 虽然无需等待，但是fork..join_any和fork..join_none执行后面的时候，前面的子线程还在执行；</li>
<li><strong>如果要等待这些子线程都完成，或者停止这些子线程，可以使用<code>wait fork</code>或者<code>disable fork</code>；</strong></li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fork</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"First Block\n"</span>);</span><br><span class="line">        # <span class="number">20</span>ns;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"Second Block\n"</span>);</span><br><span class="line">        @eventA;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">join</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> do_test;</span><br><span class="line">    <span class="keyword">fork</span></span><br><span class="line">        exec1();</span><br><span class="line">        exec2();</span><br><span class="line">    <span class="keyword">join_any</span></span><br><span class="line">    <span class="keyword">fork</span></span><br><span class="line">        exec3();</span><br><span class="line">        exec4();</span><br><span class="line">    <span class="keyword">join_none</span></span><br><span class="line">    <span class="keyword">wait</span> <span class="keyword">fork</span>   <span class="comment">//等待所有子线程结束</span></span><br><span class="line"><span class="keyword">endtask</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="时序控制"><a href="#时序控制" class="headerlink" title="时序控制"></a>时序控制</h2><ul>
<li>SV中可以通过延迟控制或者事件等待来完成时序控制；</li>
<li>延迟控制通过<code>#</code>完成；   <code>#10 rega = regb;</code></li>
<li>事件控制（event）通过<code>@</code>完成；<ul>
<li><code>@r rega = regb;</code></li>
<li><code>@(posedge clock) rega = regb;</code></li>
</ul>
</li>
<li><code>wait</code>语句可以与事件或者表达式结合，来完成时序控制；<ul>
<li><code>real AOR[];  initial wait(AOR.size() &gt; 0) ...;</code></li>
</ul>
</li>
</ul>
<h1 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>测试平台中所有线程都需要同步并交换数据；</li>
<li>一个线程等待另外一个，比如验证环境需要等待所有激励结束，比较结束才能结束仿真；</li>
<li>比如监测器需要将数据发送到检查器，检查器又需要从不同的缓存获取数据进行比较；</li>
</ul>
<h2 id="线程同步的第一个类型：event事件"><a href="#线程同步的第一个类型：event事件" class="headerlink" title="线程同步的第一个类型：event事件"></a>线程同步的第一个类型：event事件</h2><ul>
<li>可以通过event声明一个event变量，并且触发它；</li>
<li>这个event变量可以用来控制多个线程间的同步；一端触发，另一端阻塞等待；</li>
<li>通过<code>-&gt;</code>操作符触发事件；</li>
<li>其他等待该事件的线程可以通过<code>@</code>操作符或者<code>wait()</code>来检查event的触发状态；</li>
<li><code>wait_order()</code>方法： <strong>可以使线程保持等待，直到在参数列表中的事件event按照从左到右的顺序依次完成</strong>；</li>
<li>如果参数列表中的事件被触发，但是没有按照要求顺序，也会失败；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">event</span> done, blast;</span><br><span class="line"><span class="keyword">event</span> done_too = done;</span><br><span class="line"><span class="keyword">task</span> trigger(<span class="keyword">event</span> ev);</span><br><span class="line">    -&gt; ev;</span><br><span class="line"><span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fork</span></span><br><span class="line">    @ done_too;</span><br><span class="line">    #<span class="number">1</span> trigger(done);</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fork</span></span><br><span class="line">    -&gt;blast;</span><br><span class="line">    <span class="keyword">wait</span>(blast<span class="variable">.triggered</span>);</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// wait_order</span></span><br><span class="line"><span class="keyword">wait_order</span>(a,b,c) <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">$display</span>(<span class="string">"Error: events out of order"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">bit</span> success;</span><br><span class="line"><span class="keyword">wait_order</span>(a,b,c) </span><br><span class="line">    success = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    success = <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="线程同步的第二个类型：旗语semaphore"><a href="#线程同步的第二个类型：旗语semaphore" class="headerlink" title="线程同步的第二个类型：旗语semaphore"></a>线程同步的第二个类型：旗语semaphore</h2><ul>
<li>旗语可以看做打开共享资源大门的钥匙；用于访问控制保护；</li>
<li>创建旗语时，<strong>会为其分配固定的钥匙数量</strong>；</li>
<li>使用旗语时，必须先获得钥匙，才能继续执行；</li>
<li>旗语的钥匙数量可以有多个，等待旗语钥匙的线程也可以有多个；</li>
<li><strong>旗语通常用于互斥，对共享资源的访问控制，以及基本的同步</strong>；</li>
</ul>
<h3 id="旗语的创建"><a href="#旗语的创建" class="headerlink" title="旗语的创建"></a>旗语的创建</h3><ul>
<li>创建旗语，并为他分配钥匙的方式：<ul>
<li><code>semaphore sm;</code>   <code>sm = new();</code></li>
</ul>
</li>
<li>创建一个固定钥匙数量的旗语，<code>new(N)</code></li>
<li>从旗语那里获取一个或者多个钥匙（<strong>阻塞型</strong>）： <code>get(N=1)</code></li>
<li>将一个或者多个钥匙返回到旗语中： <code>put(N=1)</code></li>
<li><strong>尝试获取一个或者多个钥匙，而不阻塞</strong>： <code>try_get(N=1)</code></li>
<li>new函数默认为0,但是可以put超过开始的数量值；</li>
<li>new()返回旗语的句柄；</li>
<li>put() : 如果其他进程在等待旗语，则应该在该进程有足够数量钥匙的情况下返回；</li>
<li>get() : 如果指定数量的钥匙可用，则方法返回并继续执行，如果不足，进程阻塞直到钥匙数目充足；</li>
<li>旗语的等待队列是FIFO的，先排队的先获得；</li>
<li>try_get() : 如果指定数目可用，返回正数并继续执行，否则，返回0；</li>
</ul>
<h1 id="线程通信"><a href="#线程通信" class="headerlink" title="线程通信"></a>线程通信</h1><blockquote>
<p>除了event、semaphore之外，还有mailbox信箱</p>
<p>信箱可以放置任何类型，可以设置尺寸大小，防止存储数据过多占用资源，信箱也是FIFO的</p>
</blockquote>
<h2 id="信箱的内建方法"><a href="#信箱的内建方法" class="headerlink" title="信箱的内建方法"></a>信箱的内建方法</h2><ul>
<li>new() : 创建信箱，默认尺寸bound为0，表示不限制大小，否则限制为最大值N；</li>
<li>put() : 将信息写入信箱，如果信箱已满，则put被挂起，直到可以有新的空间；</li>
<li>try_put() : 尝试写入信箱，不发生阻塞；如果满，不阻塞，返回0,否则成功返回1；</li>
<li>get() : 从信箱中获取信息，并取出</li>
<li>peek() : 获取信息，但是不取出，只是拷贝，如果信箱为空，peek会挂起，直到有消息；</li>
<li>try_get()  try_peek() : 非阻塞取出</li>
<li>num() : 获取信箱信息的数目；</li>
</ul>
<h2 id="参数化信箱"><a href="#参数化信箱" class="headerlink" title="参数化信箱"></a>参数化信箱</h2><ul>
<li>虽然信箱可以存放各种数据类型，但是为了之后用的方便，在声明时最好指定存储类型；</li>
<li>这种参数化信箱的方式可以在编译时就能检查出类型不匹配的情况；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> mailbox <span class="variable">#(string)</span> s_box;</span><br><span class="line">s_box sm = <span class="keyword">new</span>;</span><br><span class="line"><span class="keyword">string</span> s;</span><br><span class="line">sm<span class="variable">.put</span>(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">sm<span class="variable">.get</span>(s);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="信箱和队列的区别"><a href="#信箱和队列的区别" class="headerlink" title="信箱和队列的区别"></a>信箱和队列的区别</h2><ul>
<li>信箱必须通过new例化，但是队列只需要声明即可；</li>
<li>信箱的存取方法put()和get()是阻塞方法，但是队列的存取方法，push_back()和pop_front()方法是非阻塞的，会立即返回；</li>
<li>在传递形参时，如果是input方向，信箱类型传递到是句柄，而队列类型则是完成的队列内容的拷贝；</li>
</ul>
<h2 id="线程通信的比较"><a href="#线程通信的比较" class="headerlink" title="线程通信的比较"></a>线程通信的比较</h2><ul>
<li>event ： 最小信息量触发，即单一通知功能，可以用来做事件的触发，也可以多个事件组合起来用作线程同步；</li>
<li>semaphore : 共享资源的卫士，如果多线程对某一共享资源做访问，则可以使用这个要素；</li>
<li>mailbox ： 精小的SV原生FIFO，<strong>在线程之间做数据通信或者内部数据缓存</strong>时考虑使用这个元素；</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-13T11:19:17.000Z" title="5/13/2022, 11:19:17 AM">2022-05-13</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">17 分钟读完 (大约2528个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p19p22%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F-%E9%9A%8F%E6%9C%BA%E7%BA%A6%E6%9D%9F-%E7%BA%A6%E6%9D%9F%E6%8E%A7%E5%88%B6-%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%87%BD%E6%95%B0/">路科V0P19P22随机变量-随机约束-约束控制-任务和函数</a></p><div class="content"><h1 id="随机变量"><a href="#随机变量" class="headerlink" title="随机变量"></a>随机变量</h1><ul>
<li>随着设计越来越大，要产生完整的激励来测试设计的功能变得越来越困难；</li>
<li>定向激励的测试方法已经无法满足检查功能完整性的要求；</li>
<li>Soc集成度提高带来的模块之间交互的复杂性也指数提高，验证工程师无法预测用户使用过程中发生什么样的情况；</li>
</ul>
<h2 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h2><ul>
<li><strong>随机-约束</strong>： 构成目前动态仿真验证的主流方法；</li>
<li><strong>随机约束测试</strong>：CRT， constrained-random test，即能够产生感兴趣的、想不到的测试向量，<strong>通过回归测试、替换随机种子的方式来提高单位测试用例的覆盖率收集效率</strong>；</li>
<li>随机测试带来的负担是验证环境的复杂度提高，不再只需要发送激励的组件，还包括监测器、比较器等；</li>
<li>对环境复杂度还包括环境的复用和测试的复用，带来组件封装要求，使得代码量增大；</li>
</ul>
<h2 id="产生一个随机数"><a href="#产生一个随机数" class="headerlink" title="产生一个随机数"></a>产生一个随机数</h2><blockquote>
<p>利用系统函数产生一个随机数</p>
</blockquote>
<ul>
<li><code>randomize</code>函数产生随机数，如果随机成功，返回1,否则0；</li>
<li>通过系统函数<code>std::randomize()</code>对一些变量完成随机化，即产生随机数并赋值给这些向量；</li>
<li>还有一些其他的系统函数：<ul>
<li><code>$urandom()</code> 产生一个32位无符号的随机数；</li>
<li><code>$urandom_range(max_val, minval=0)</code>， 可以生成介于maxval和minval之间的随机数；</li>
</ul>
</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stim;</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">15</span>:<span class="number">0</span>] addr;</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">31</span>:<span class="number">0</span>] data;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">bit</span> get_stim();</span><br><span class="line">        <span class="keyword">bit</span> success, rd_wr;</span><br><span class="line">        success = randomize(add, data, rd_wr);</span><br><span class="line">        <span class="keyword">return</span> rd_wr;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="系统有机的组织随机变量"><a href="#系统有机的组织随机变量" class="headerlink" title="系统有机的组织随机变量"></a>系统有机的组织随机变量</h2><ul>
<li>比起独立的产生随机数，在向DUT产生随机激励时，为了符合协议、满足测试需求，还需要添加一些约束；</li>
<li>这些约束会使得变量朝着希望他们变化的方向去随机；</li>
<li>这些约束也会对变量和变量之间的关系生效；</li>
<li>需要一个载体去容纳变量和他们之间的约束；</li>
<li><strong>这个载体是类，类的成员变量可以声明“随机”属性，用rand或者randc表示</strong>；</li>
</ul>
<h2 id="随机变量-1"><a href="#随机变量-1" class="headerlink" title="随机变量"></a>随机变量</h2><ul>
<li>任何类中的整型（bit、byte、int）变量都可以声明为rand、randc；</li>
<li>定长数组、动态数组、关联数组和队列都可以声明为rand、randc；</li>
<li>可以对动态数组和队列的长度加以约束；</li>
<li><strong>指向对象的句柄，也可以声明为rand，不能randc，随机时该句柄指向的对象中的随机变量会一起被随机化</strong>；</li>
<li>非组合型结构体可以声明为rand，非组合型的成员也可以声明为rand、randc；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rand</span> <span class="keyword">bit</span> [<span class="number">7</span>:<span class="number">0</span>] len;</span><br><span class="line"><span class="keyword">rand</span> <span class="keyword">integer</span> data[];</span><br><span class="line"><span class="keyword">constraint</span> db {data<span class="variable">.size</span> == len;}</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> {</span><br><span class="line">    <span class="keyword">randc</span> <span class="keyword">int</span> addr = <span class="number">1</span> + constant;</span><br><span class="line">    <span class="keyword">int</span> crc;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">byte</span> data [] = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>};</span><br><span class="line">} header;</span><br><span class="line"><span class="keyword">rand</span> header h1;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="rand和randc"><a href="#rand和randc" class="headerlink" title="rand和randc"></a>rand和randc</h2><ul>
<li>rand： 表示在可生成范围内，每个值得可能性是相同的–&gt;每次都是有放回！！<ul>
<li><code>rand bit [7:0] y;</code></li>
</ul>
</li>
<li>randc: 它的值会随机，并且遍历可取值范围，–&gt;无放回！！</li>
</ul>
<h1 id="随机约束"><a href="#随机约束" class="headerlink" title="随机约束"></a>随机约束</h1><h2 id="带有随机约束的简单类"><a href="#带有随机约束的简单类" class="headerlink" title="带有随机约束的简单类"></a>带有随机约束的简单类</h2><figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">bit</span> [<span class="number">31</span>:<span class="number">0</span>] src, dst, data[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">randc</span> <span class="keyword">bit</span> [<span class="number">7</span>:<span class="number">0</span>] kind;</span><br><span class="line">    <span class="comment">// src的约束</span></span><br><span class="line">    <span class="keyword">constraint</span> c {src &gt; <span class="number">10</span>; src &lt; <span class="number">15</span>;}</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">Packet p;</span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    p = <span class="keyword">new</span>();</span><br><span class="line">    <span class="keyword">if</span> (!p<span class="variable">.randomize</span>())</span><br><span class="line">        <span class="built_in">$finish</span>;</span><br><span class="line">    transmit(p);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="约束块"><a href="#约束块" class="headerlink" title="约束块"></a>约束块</h2><ul>
<li>有用的激励不仅会约束随机变量，变量之间也存在互相约束关系；</li>
<li>没有约束的随机变量会包含很多无效的和非法的值，会使得有效激励变得低效；</li>
<li>类需要<strong>用一个或者多个约束块来描述变量之间的关系</strong>；</li>
<li><strong>约束块支持整型通过<code>inside</code>操作符来设置可取值的范围</strong>；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rand</span> <span class="keyword">integer</span> x,y,z;</span><br><span class="line"><span class="keyword">constraint</span> c1 {x <span class="keyword">inside</span> {<span class="number">3</span>, <span class="number">5</span>, [<span class="number">9</span>:<span class="number">15</span>], [<span class="number">24</span>:<span class="number">32</span>], [y:<span class="number">2</span>*y], z};}</span><br><span class="line"></span><br><span class="line"><span class="keyword">rand</span> <span class="keyword">integer</span> a,b,c;</span><br><span class="line"><span class="keyword">constraint</span> c2 {a <span class="keyword">inside</span> {b, c};}</span><br><span class="line"></span><br><span class="line"><span class="keyword">integer</span> fives[<span class="number">4</span>] = '{<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>};</span><br><span class="line"><span class="keyword">rand</span> <span class="keyword">integer</span> v;</span><br><span class="line"><span class="keyword">constraint</span> c3 {v <span class="keyword">inside</span> {fives};}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="权重分布"><a href="#权重分布" class="headerlink" title="权重分布"></a>权重分布</h2><ul>
<li>除了成员集合设置，约束块也支持设置可取值的同事为其设置随机时的权重；</li>
<li><strong><code>:=</code> : 表示每个值的权重都是相同的；</strong></li>
<li><strong><code>:/</code> : 表示权重会平均分配到每一个值；</strong></li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x <span class="keyword">dist</span> { [<span class="number">100</span>:<span class="number">102</span>] := <span class="number">1</span>, <span class="number">200</span> := <span class="number">2</span>, <span class="number">300</span> := <span class="number">5</span>};   <span class="comment">// 权重分布：1 1 1 2 5</span></span><br><span class="line">x <span class="keyword">dist</span> { [<span class="number">100</span>:<span class="number">102</span>] :/ <span class="number">1</span>, <span class="number">200</span> := <span class="number">2</span>, <span class="number">300</span> := <span class="number">5</span>};   <span class="comment">// 权重分布：1/3 1/3 1/3 2 5</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="唯一标识"><a href="#唯一标识" class="headerlink" title="唯一标识"></a>唯一标识</h2><ul>
<li><code>unique</code> : 可以用来约束一组变量，使得其随机后变量之间不会有相同的数值；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rand</span> <span class="keyword">byte</span> a[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">rand</span> <span class="keyword">byte</span> b;</span><br><span class="line"><span class="keyword">rand</span> <span class="keyword">byte</span> excluded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constraint</span> u {<span class="keyword">unique</span> {b, a[<span class="number">2</span>:<span class="number">3</span>], excluded};}</span><br><span class="line"><span class="keyword">constraint</span> exclusion {excluded == <span class="number">5</span>;}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="条件约束"><a href="#条件约束" class="headerlink" title="条件约束"></a>条件约束</h2><ul>
<li>可以使用<code>if-else</code>或者<code>-&gt;</code>操作符表示条件约束；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constraint</span> c1 {</span><br><span class="line">    mode == little -&gt; len &lt; <span class="number">10</span>;</span><br><span class="line">    mode == big -&gt; len &gt; <span class="number">100</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bit</span> [<span class="number">3</span>:<span class="number">0</span>] a, b;</span><br><span class="line"><span class="keyword">constraint</span> c2 {(a==<span class="number">0</span>) -&gt; (b==<span class="number">1</span>);}</span><br><span class="line"></span><br><span class="line"><span class="keyword">constraint</span> c3 {</span><br><span class="line">    <span class="keyword">if</span> (mode == little)</span><br><span class="line">        len &lt; <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (mode == big)</span><br><span class="line">        len &gt; <span class="number">100</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="迭代约束"><a href="#迭代约束" class="headerlink" title="迭代约束"></a>迭代约束</h2><ul>
<li><code>foreach</code>可以用来迭代约束数组中的元素，这些数组可以是定长数组、动态数组、关联数组或者队列；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> C;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">byte</span> A[];</span><br><span class="line">    <span class="keyword">constraint</span> c1 {</span><br><span class="line">        <span class="keyword">foreach</span> (A[i])</span><br><span class="line">            A[i] <span class="keyword">inside</span> {<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>};</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">constraint</span> c2 {</span><br><span class="line">        <span class="keyword">foreach</span> (A[j])</span><br><span class="line">            A[j] &gt; <span class="number">2</span>*j;</span><br><span class="line">    }</span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>也可以用数组的缩减方法进行迭代约束</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> C;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">bit</span> [<span class="number">7</span>:<span class="number">0</span>] A[];</span><br><span class="line">    <span class="keyword">constraint</span> c1 {A<span class="variable">.size</span>() == <span class="number">5</span>;}</span><br><span class="line">    <span class="keyword">constraint</span> c2 {A<span class="variable">.sum</span>() &lt; <span class="number">1000</span>;}</span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h2><ul>
<li>有时候，在一些表达式中不能简单的描述约束，比如计算一个组合数组中的’1’；</li>
<li>可以写成一个函数，然后约束调用这个函数；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="keyword">int</span> count_ones (<span class="keyword">bit</span> [<span class="number">9</span>:<span class="number">0</span>] w);</span><br><span class="line">    <span class="keyword">for</span> (count_onts=<span class="number">0</span>; w!=<span class="number">0</span>; w = w&gt;&gt;<span class="number">1</span>)</span><br><span class="line">        count_ones += w &amp; <span class="number">1'b1</span>;</span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constraint</span> C1 {length == count_ones(v);}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="软约束-和-硬约束"><a href="#软约束-和-硬约束" class="headerlink" title="软约束 和 硬约束"></a>软约束 和 硬约束</h2><ul>
<li>为了防止约束冲突时执行失败，分为软约束和硬约束；</li>
<li><code>soft</code> : soft描述的约束是软，没有soft是硬；</li>
<li>如果用户在使用时，制订了外部约束对同一个变量做了二次约束，或者用户定义了子类，也对同一个变量做了二次约束，<strong>那么硬约束可以覆盖软约束</strong>，不会导致随机失败；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">constraint</span> deflt {<span class="keyword">soft</span> length <span class="keyword">inside</span> {<span class="number">32</span>, <span class="number">1024</span>};}</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">Packet p = <span class="keyword">new</span>();</span><br><span class="line">p<span class="variable">.randomize</span>() <span class="keyword">with</span> {length == <span class="number">1512</span>;}        <span class="comment">// 覆盖了内部的软约束，执行成功</span></span><br></pre></td></tr></tbody></table></figure>



<h1 id="约束控制"><a href="#约束控制" class="headerlink" title="约束控制"></a>约束控制</h1><h2 id="随机方法"><a href="#随机方法" class="headerlink" title="随机方法"></a>随机方法</h2><ul>
<li>类的声明中的随机变量，需要伴随类的句柄的调用randomize()，这是SV的内建方法<code>virtual function int randomize();</code></li>
<li>随机化成功返回1,否则0；</li>
<li>随机化之前需要先对对象完成例化，例化时没有随机的过程；</li>
</ul>
<h2 id="内嵌约束"><a href="#内嵌约束" class="headerlink" title="内嵌约束"></a>内嵌约束</h2><ul>
<li>在调用<code>randomize()</code>时伴随<code>with</code>，称为内嵌约束；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> C;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">integer</span> x;</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="keyword">int</span> F(C obj, <span class="keyword">integer</span> y);</span><br><span class="line">    F = obj<span class="variable">.randomize</span>() <span class="keyword">with</span> (x) {x &lt; y;};      <span class="comment">//这种方式对x的指向明确了，不在参数列表中，所以是C的x</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="local域指向"><a href="#local域指向" class="headerlink" title="local域指向"></a>local域指向</h2><ul>
<li>同名的变量处于不同的域中，可能出现指向模糊，可以使用上文的方法；</li>
<li>也可以使用<code>local::</code>域索引到方式；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> C;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">integer</span> x;</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="keyword">int</span> F(C obj, <span class="keyword">integer</span> x);</span><br><span class="line">    F = obj<span class="variable">.randomize</span>() <span class="keyword">with</span>{x &lt; <span class="keyword">local</span>::x;};      <span class="comment">//第一个x是C的，第二个local的x是参数</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="随机控制"><a href="#随机控制" class="headerlink" title="随机控制"></a>随机控制</h2><ul>
<li><code>rand_mode</code>可以用来使能或者禁止成员变量的随机属性；<ul>
<li>当随机模式被禁止时，就相当于一个普通变量了；</li>
<li>可以禁止某个变量的随机模式，也可以对整个对象调用<code>rand_mode</code>进行控制；</li>
</ul>
</li>
<li><code>constraint_mode()</code>用来关闭或者使能约束块；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> object[<span class="variable">.random_variable</span>]::rand_mode(<span class="keyword">bit</span> on_off);</span><br><span class="line"><span class="keyword">function</span> <span class="keyword">int</span> object<span class="variable">.rand_variable</span>::rand_mode();</span><br></pre></td></tr></tbody></table></figure>

<h2 id="内嵌变量控制"><a href="#内嵌变量控制" class="headerlink" title="内嵌变量控制"></a>内嵌变量控制</h2><ul>
<li>一个有意思的点，如果在<code>randomize()</code>中有参数，则只会对这个参数进行随机化，别的就算是rand也不随机化了；</li>
</ul>
<h1 id="任务和函数"><a href="#任务和函数" class="headerlink" title="任务和函数"></a>任务和函数</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>function和task都是提高代码复用性和整洁度；</li>
<li>function：<ul>
<li>首要目的在于为运算表达式提供返回值，便于简化原有代码，提高维护性；</li>
<li>void函数无返回值；</li>
<li><strong>一个function只能有一个返回值</strong>，所以函数可以作为表达式的操作数，因为就一个值；</li>
<li>函数的参数方向可以声明为：input、output、inout、ref</li>
<li><strong>函数可以调用函数，但是必须立即返回，不能阻塞等待</strong>！</li>
<li><strong>函数返回方式有两种，一个是return直接返回，一个是将值或者表达式赋给函数的同名变量</strong>；</li>
<li>区别在于return会立即返回，但是赋值同名变量之后，后续的代码还会执行下去；</li>
<li>可以对有返回值的函数进行类型转换，<code>void'(func1)</code>,这时候用不到函数的返回值；</li>
</ul>
</li>
<li>task：<ul>
<li>同样的参数列表指名四个方向；</li>
<li>task无返回值！</li>
<li>task可以用来消耗仿真时间，内置一些阻塞语句；</li>
<li>可以使用return立刻结束task；</li>
<li>task可以调用task和function，但是function只能调用function，不能调用task；</li>
</ul>
</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">logic</span> red;</span><br><span class="line"><span class="keyword">parameter</span> red_tics = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">always</span> <span class="keyword">begin</span></span><br><span class="line">    red = on;</span><br><span class="line">    light(red, red_tics);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> light(<span class="keyword">output</span> color, <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] tics);</span><br><span class="line">    <span class="keyword">repeat</span>(tics) @(<span class="keyword">posedge</span> clock);</span><br><span class="line">    color = off;</span><br><span class="line"><span class="keyword">endtask</span>: light</span><br></pre></td></tr></tbody></table></figure>

<h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><ul>
<li>input ： 在方法调用时，<strong>属于值传递</strong>，在传递的过程中，外部变量的值<strong>经过拷贝</strong>，赋值给输入参数；</li>
<li>output、inout都是值传递，发生在方法调用和返回时；</li>
<li><strong>ref参数不会传递值拷贝，而是将变量指针传递到方法中，所以方法内部的操作会影响到外部的变量；</strong></li>
<li><strong>为了避免外部传入的ref参数被方法修改，可以添加const修饰符</strong>；</li>
<li>SV允许在声明输入参数时，指定参数的默认值；</li>
<li>除了按照参数位置传递参数，SV也允许像module例化一样，<strong>用参数名字映射的方式传递参数</strong>；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> read(<span class="keyword">int</span> j=<span class="number">0</span>, <span class="keyword">int</span> k, <span class="keyword">int</span> data=<span class="number">1</span>);</span><br><span class="line"><span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">read(,<span class="number">5</span>);  <span class="comment">// 即0 5 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="keyword">int</span> func(<span class="keyword">int</span> j=<span class="number">1</span>, <span class="keyword">string</span> s= <span class="string">"no"</span>);</span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">func(<span class="variable">.j</span>(<span class="number">2</span>), <span class="variable">.s</span>(<span class="string">"yes"</span>));  <span class="comment">// 即2 yes</span></span><br></pre></td></tr></tbody></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-13T06:51:24.000Z" title="5/13/2022, 6:51:24 AM">2022-05-13</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">30 分钟读完 (大约4557个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p13p18sv%E6%95%B0%E7%BB%84-%E7%B1%BB-%E5%AF%B9%E8%B1%A1-%E5%8C%85/">路科V0P13P18SV数组-类-对象-包</a></p><div class="content"><h1 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h1><blockquote>
<ul>
<li>对于Verilog，数组用来做数据存储，比如 <code>reg [15:0] RAM [0:4095];   //存储数组</code></li>
<li>数组的索引名在数组右侧，左侧是每个数据的大小</li>
</ul>
</blockquote>
<h2 id="非组合型-unpacked-数组"><a href="#非组合型-unpacked-数组" class="headerlink" title="非组合型(unpacked)数组"></a>非组合型(unpacked)数组</h2><ul>
<li>非组合型(unpacked) : SV将以上Verilog的声明方式称为非组合型声明，即<strong>数组中的成员之间的存储是互相独立的</strong>。<ul>
<li>会消耗更多的存储空间，但是利于查找元素；</li>
<li>SV对Verilog的非组合数组进行了保留，并且允许在声明时指定类型，包括<code>event logic bit byte int longint shortreal real</code>等类型；</li>
<li>SV也保留了Verilog索引非组合型数组或切片的能力，利于数组和切片的拷贝和查找；</li>
<li>栗子： <code>int a1 [7:0][1023:0];   //非组合型数组</code>  <code>int a2 [1:8][1023:0];</code> <code>a1 = a2;  //拷贝整个数组</code>  <code>a2[3] = a1[3];  //拷贝数组的某个片段</code></li>
<li>声明非组合型数组的方式：<ul>
<li>指定元素个数 ： <code>logic [31:0] data[1024]; //从右到左读，1024个32位</code></li>
<li>指定元素索引值的范围： <code>logic [31:0] data[0:1023];</code></li>
</ul>
</li>
<li>初始化： 对于非组合数组，需要用<code>'{}</code>对每个维度分别赋值：<ul>
<li><code>int d [0:1][0:3] = '{'{7, 3, 0, 5}, '{1, 2, 3, 4}};</code></li>
</ul>
</li>
<li>因为非组合型数组赋值繁琐，所以可以使用default关键字完成， <code>int a [0:7][0:1023] = '{default: 8' h55};</code></li>
<li>非组合型数组的数据成员和数组本身都可以为其赋值， <code>byte a [0:3][0:3]; a[1][0] = 8' h5;  // 为单个元素赋值  a[3] = '{'hF, 'hA, 'hC, 'hE};  //给切片赋值</code></li>
<li>非组合型的赋值和拷贝，必须两边的维度完全一模一样；</li>
<li>非组合型数组和组合型数组之间，不能直接赋值！</li>
</ul>
</li>
</ul>
<h2 id="组合型-packed-数组"><a href="#组合型-packed-数组" class="headerlink" title="组合型(packed)数组"></a>组合型(packed)数组</h2><ul>
<li>组合型(packed) : SV将Verilog的向量作为组合型数组的声明方式<ul>
<li>栗子： <code>wire [3:0] select;  // 4比特的组合型数组</code>  <code>reg [63:0] data;  //64比特的组合型数组</code>  <code>logic [3:0][7:0] data;  // 2维组合型数组，注意，每个元素是data[0][7:0]，索引在左侧，位宽在右侧，从左到右边读，4个8位，第二维4个，第一维8个</code></li>
<li>组合型数组更节省空间！规范了数据的存储方式，所以不需要关心编译器或者操作系统的区别；</li>
<li>组合型除了可以用数组的声明，还可以定义结构体的存储方式：</li>
<li><code>typedef struct { logic [7:0] crc; logic [63:0] data; } data_word;  data_word [7:0] darray;</code></li>
<li>组合型数组和其他数组片段也可以灵活选择，用来拷贝或者赋值：<ul>
<li><code>logic [3:0][7:0] data; wire [31:0] out = data;  wire sign = data[3][7];  wire[3:0] nib = data[0][3:0];  byte high_byte;  assign high_byte = data[3];  //8bit数组片段   logic [15:0] word;  assign word = data[1:0];</code></li>
</ul>
</li>
<li>初始化 ： 组合型数组的初始化，和向量的初始化一致，对所有元素统一赋值：<ul>
<li><code>logic [3:0][7:0] a = 32'h0; //向量赋值</code></li>
<li><code>logic [3:0][7:0] a = {16'hz, 16'h0}; //连接运算符</code></li>
<li><code>logic [3:0][7:0] a = {16{2'b01}}; //复制运算符</code></li>
</ul>
</li>
<li>组合型的赋值： <code>logic [1:0][1:0][7:0] a;  a[1][1][0] = 1'b0;  a = 32'hF1A3C5E7;  //整个数组赋值  a[1][0][3:0] = 4'hF;  //切片赋值   a[0] = 16' hFACE;  // 给切片赋值   a = {16' bz, 16' b0}; //通过连接运算符赋值</code></li>
<li><strong>组合型数组会被视为向量，所以两边操作数大小维度不同时也可以做赋值，非组合型不可以</strong>！</li>
<li>会将右侧的数据截取或者扩展，<strong>扩展时，是高位填充为0</strong>！</li>
</ul>
</li>
</ul>
<h2 id="sv中的foreach"><a href="#sv中的foreach" class="headerlink" title="sv中的foreach"></a>sv中的foreach</h2><ul>
<li>foreach: 循环，对一维或者多维数组进行循环索引，不需要指定数组的维度大小！<ul>
<li>栗子： <code>int sum [1:8][1:3]; foreach(sum[i, j]) { sum[i][j] = i + j; } }; //对数组进行初始化</code></li>
<li>foreach中的变量作用域只在循环中，且只读，无法修改；</li>
</ul>
</li>
</ul>
<h2 id="一些系统函数"><a href="#一些系统函数" class="headerlink" title="一些系统函数"></a>一些系统函数</h2><ul>
<li><code>$dimensions(array_name)</code> : 获取数组的维度大小；</li>
<li><code>$left(array_name, dimension)</code> : 返回指定维度的最左索引值；</li>
<li>栗子：<ul>
<li><code>logic [1:2][7:0] word [0:3][4:1];</code>   最高的二维是4乘4,非组合，最低的二维为2乘8,组合型；</li>
<li><code>$left(word, 1)</code> 返回的是0；</li>
<li><code>$left(word, 2)</code> 返回的是4；</li>
<li><code>$left(word, 3)</code> 返回的是1；</li>
<li><code>$left(word, 4)</code> 返回的是7；</li>
</ul>
</li>
<li>类似，还有<code>$right $low $high</code></li>
<li><code>$size(array_name, dimension)</code> : 返回指定维度的尺寸大小；</li>
<li><code>$increment(array_name, dimension)</code> : 如果指定维度的最左索引值大于最右索引值，返回1,否则-1；</li>
<li><code>$bits(expression)</code> : 返回数组存储的比特数目；</li>
</ul>
<h1 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h1><h2 id="动态数组"><a href="#动态数组" class="headerlink" title="动态数组"></a>动态数组</h2><ul>
<li>动态数组在声明时，需要<code>[]</code>， 在编译时不会指定尺寸，在运行时才会确定；</li>
<li>动态数组开始时为空，需要<code>new[]</code>来分配空间；<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> dyn[], d2[];</span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    dyn = <span class="keyword">new</span>[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">foreach</span> (dyn[j]) dyn[j] = j;</span><br><span class="line">    d2 = dyn;</span><br><span class="line">    d2[<span class="number">0</span>] = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">$display</span>(dyn[<span class="number">0</span>], d2[<span class="number">0</span>]);</span><br><span class="line">    dyn = <span class="keyword">new</span>[<span class="number">20</span>](dyn); <span class="comment">//分配20个整数并进行赋值</span></span><br><span class="line">    dyn = <span class="keyword">new</span>[<span class="number">100</span>];  <span class="comment">//分配100个新的整数</span></span><br><span class="line"></span><br><span class="line">    dyn<span class="variable">.delete</span>(); <span class="comment">// 删除所有元素</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>内置方法<code>size()</code>可以返回动态数组的大小。</li>
<li><code>delete()</code>清空动态数组，使它尺寸变为0；</li>
<li>动态数组在声明时也可以初始化<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bit</span> [<span class="number">7</span>:<span class="number">0</span>] mask[] = '{<span class="number">8'b0000_0000</span>, <span class="number">8'b0000_0001</span>, <span class="number">8'b0000_0010</span>, <span class="number">8'b0000_0011</span>, <span class="number">8'b0000_0100</span>, <span class="number">8'b0000_0101</span>, <span class="number">8'b0000_0110</span>, <span class="number">8'b0000_0111</span>};</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><ul>
<li>sv引入了队列类型，它<strong>结合了数组和链表</strong>；</li>
<li><strong>可以在队列的任何位置添加或者删除数据成员</strong>；</li>
<li>也可以索引访问队列的任何成员；</li>
<li>通过<code>[$]</code>声明队列， 队列的索引值从0到$;</li>
<li>可以通过队列的内建方法<code>push_back(val)</code>、<code>push_front(val)</code>、<code>pop_back()</code>、<code>pop_front()</code>来操作；</li>
<li>在指定位置插入成员，可以使用<code>insert(val, pos)</code>；</li>
<li>可以使用<code>delete(pos)</code>删除指定位置的元素；</li>
<li>可以使用<code>{}</code>连接运算符对队列进行拼接；</li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> j = <span class="number">1</span>, </span><br><span class="line">    q2[$] = {<span class="number">3</span>, <span class="number">4</span>},    <span class="comment">// 队列常量不需要'</span></span><br><span class="line">    q[$] = {<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>};</span><br><span class="line"></span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    q<span class="variable">.insert</span>(<span class="number">1</span>, j);</span><br><span class="line">    q<span class="variable">.delete</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    q<span class="variable">.push_front</span>(<span class="number">6</span>);</span><br><span class="line">    j = q<span class="variable">.pop_back</span>();</span><br><span class="line">    q<span class="variable">.push_back</span>(<span class="number">8</span>);</span><br><span class="line">    j = q<span class="variable">.pop_front</span>();</span><br><span class="line">    <span class="keyword">foreach</span> (q[i])</span><br><span class="line">        <span class="built_in">$display</span>(q[i]);</span><br><span class="line">    q<span class="variable">.delete</span>();</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h2><ul>
<li>处理器在访问存储时是随机或者散乱的，所有测试中，处理器也许只会访问几百个存储地址，其他的初始化为0,浪费了仿真时的存储空间。</li>
<li>SV中的关联数组，存放散列的数据成员，关联数组的索引类型，<strong>除了为整型之外还可以是字符串或者其他类型</strong>，而且关联数组存储的数据成员也可以是任意类型！</li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> assoc[<span class="keyword">byte</span>], idx = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">begin</span></span><br><span class="line">        assoc[idx] = idx;</span><br><span class="line">        idx = idx &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">while</span> (idx != <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (assoc[i])</span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"assoc[%h] = %h"</span>, i, assoc[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (assoc<span class="variable">.first</span>(idx))</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">$display</span>(<span class="string">"assoc[%h] = %h"</span>, idx, assoc[idx]);</span><br><span class="line">        <span class="keyword">while</span> (assoc<span class="variable">.next</span>(idx));</span><br><span class="line">    <span class="keyword">void</span>'(assoc<span class="variable">.first</span>(idx));</span><br><span class="line">    <span class="keyword">void</span>'(assoc<span class="variable">.delete</span>(idx));</span><br><span class="line">    <span class="built_in">$display</span>(<span class="string">"The array now has %0d elements"</span>, assoc<span class="variable">.num</span>());</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure>

<p>栗子2：输入文件</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> switch[<span class="keyword">string</span>], min_address, max_address, i, file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">string</span> s;</span><br><span class="line">    file = <span class="built_in">$fopen</span>(<span class="string">"switch.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">$feof</span>(file)) <span class="keyword">begin</span></span><br><span class="line">        <span class="built_in">$fscanf</span>(file, <span class="string">"%d %s"</span>, i, s);</span><br><span class="line">        switch[s] = i;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">$fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    min_address =  switch[<span class="string">"min_address"</span>];</span><br><span class="line">    <span class="keyword">if</span> (switch<span class="variable">.exists</span>(<span class="string">"max_address"</span>))</span><br><span class="line">        max_address = switch[<span class="string">"max_address"</span>];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        max_address = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (switch[s])</span><br><span class="line">     <span class="built_in">$display</span>(<span class="string">"switch[%s] = %0d"</span>, s, switch[s]);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure>

<p>以上三种数组：动态数组、队列、关联数组，都是大小可变的数组，下面，讨论他们的公共方法！</p>
<h2 id="缩减方法"><a href="#缩减方法" class="headerlink" title="缩减方法"></a>缩减方法</h2><ul>
<li>缩减方法指的是把一个数组缩减为一个值</li>
<li>最常见的是sum对数组元素求和；</li>
<li>还有and、or、or(异或)</li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> b[$] = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>};</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">w = b<span class="variable">.sum</span>();  <span class="comment">//求和</span></span><br><span class="line">w = b<span class="variable">.product</span>();  <span class="comment">//求积</span></span><br><span class="line">w = b<span class="variable">.and</span>();  <span class="comment">//求元素依次按位与</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="定位方法"><a href="#定位方法" class="headerlink" title="定位方法"></a>定位方法</h2><ul>
<li>对于非合并数组，可以使用数组定位方法，<strong>返回值是一个队列，而不是数据成员</strong>；</li>
<li>包括min、max、unique</li>
<li><code>d.find_  with(expression)</code></li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> f[<span class="number">6</span>] = '{<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>};  <span class="comment">//定长数组</span></span><br><span class="line"><span class="keyword">int</span> d[] = '{<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>};  <span class="comment">//动态数组</span></span><br><span class="line"><span class="keyword">int</span> q[$] = {<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>}, tq[$];  <span class="comment">//队列</span></span><br><span class="line">tq = q<span class="variable">.min</span>();  <span class="comment">//{1}</span></span><br><span class="line">tq = d<span class="variable">.max</span>();</span><br><span class="line">tq= f<span class="variable">.union</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> d[] = '{<span class="number">9</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">8</span>}, tq[$];</span><br><span class="line">tq = d<span class="variable">.find</span> <span class="keyword">with</span> (item &gt; <span class="number">3</span>); <span class="comment">//找出所有大于3的元素</span></span><br><span class="line">tq<span class="variable">.delete</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (d[i])</span><br><span class="line">    <span class="keyword">if</span>(d[i] &gt; <span class="number">3</span>)</span><br><span class="line">        tq<span class="variable">.push_back</span>(d[i]);</span><br><span class="line"></span><br><span class="line">tq = d<span class="variable">.find_index</span> <span class="keyword">with</span> (item &gt;<span class="number">3</span>);</span><br><span class="line">tq = d<span class="variable">.find_first</span> <span class="keyword">with</span> (item &gt;<span class="number">3</span>);</span><br><span class="line">tq = d<span class="variable">.find_first_index</span> <span class="keyword">with</span> (item &gt;<span class="number">3</span>);</span><br><span class="line">tq = d<span class="variable">.find_last</span> <span class="keyword">with</span> (item &gt;<span class="number">3</span>);</span><br><span class="line">tq = d<span class="variable">.find_last_index</span> <span class="keyword">with</span> (item &gt;<span class="number">3</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="排序方法"><a href="#排序方法" class="headerlink" title="排序方法"></a>排序方法</h2><ul>
<li>通过排序方法，改变数组中元素的顺序，对他们进行正向、逆向、或者乱序的排序；</li>
<li>reverse : 反转</li>
<li>sort ： 从小到大</li>
<li>rsort</li>
<li>shuffle</li>
</ul>
<h1 id="类的封装"><a href="#类的封装" class="headerlink" title="类的封装"></a>类的封装</h1><ul>
<li>类是一种可以包含数据和方法(function、task)的类型；</li>
<li>例如一个数据包，可以定义为一个类，类中可以包含指令、地址、队列ID、时间戳和数据等成员；</li>
</ul>
<h2 id="类的概述"><a href="#类的概述" class="headerlink" title="类的概述"></a>类的概述</h2><ul>
<li>软件的类和硬件的module都可以理解为容器，但是类对于构建验证环境更加灵活！</li>
<li>OOP可以使用户能够创建复杂的数据类型，并且将他们和能够使用这些数据类型的程序结合在一起；</li>
<li>用户可以在更加抽象的层次建立测试平台和系统级模型，通过<strong>调用函数来执行一个动作</strong>而不是简单的改变信号的电平；</li>
<li>验证环境的stimulator、monitor、checker以及其他验证组件都可以按照OOP方式来构建；</li>
<li>SV在类的定义中，只需要构建函数new，不需要定义析构函数</li>
<li>new函数的作用：<ul>
<li>例化对象时开辟内存空间；</li>
<li>对对象的成员变量初始化；</li>
<li>执行完之后，返回对象实例的句柄；</li>
</ul>
</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet:</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">3</span>:<span class="number">0</span>] command;</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">40</span>:<span class="number">0</span>] address;</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">4</span>:<span class="number">0</span>] master_id;</span><br><span class="line">    <span class="keyword">integer</span> time_requested;</span><br><span class="line">    <span class="keyword">integer</span> time_issued;</span><br><span class="line">    <span class="keyword">integer</span> status;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">enum</span> {ERR_OVERFLOE=<span class="number">10</span>, ERR_UNDERFLOW=<span class="number">1123</span>} PCKT_TYPE;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">integer</span> buffer_size=<span class="number">100</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">integer</span> header_size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>():</span><br><span class="line">        command = <span class="number">4'd0</span>;</span><br><span class="line">        address = <span class="number">41'b0</span>;</span><br><span class="line">        master_id = <span class="number">5'bx</span>;</span><br><span class="line">        header_size = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> clean():</span><br><span class="line">        command = <span class="number">0</span>;</span><br><span class="line">        address = <span class="number">0</span>;</span><br><span class="line">        master_id = <span class="number">5'bx</span>;</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">task</span> issue_request(<span class="keyword">int</span> delay):</span><br><span class="line">        <span class="comment">//向总线发送请求</span></span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> current_status():</span><br><span class="line">        current_status = status;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">Packet p;   <span class="comment">//p是一个句柄指针，而不是对象，new之前是悬空状态</span></span><br><span class="line">p = <span class="keyword">new</span>();</span><br></pre></td></tr></tbody></table></figure>

<h3 id="class和struct的区别："><a href="#class和struct的区别：" class="headerlink" title="class和struct的区别："></a>class和struct的区别：</h3><ul>
<li>结构体可以包含数据成员，但是不能有成员方法，也无法进行例化；</li>
</ul>
<h3 id="static和其他："><a href="#static和其他：" class="headerlink" title="static和其他："></a>static和其他：</h3><blockquote>
<ul>
<li>句柄：指向对象的指针；</li>
<li>原型：程序的声明部分，包括程序名、返回类型和参数列表；</li>
<li>类在定义时，如果没有构建函数，系统会自动定义一个空的构建函数；</li>
<li>对象需要先声明再例化，或者同时进行；</li>
<li><strong>类的成员变量和方法默认都是动态的，即每个对象的变量和方法都会相应的开辟新的内存空间</strong>；</li>
<li><strong>如果多个对象要共享一个成员变量或者方法，可以使用static关键字修饰</strong>！</li>
<li>对于静态成员变量，在类没有例化的时候，就可以访问到，使用<code>p.val</code>或者<code>Packet::val</code></li>
<li>注意：静态方法不能访问动态成员变量，否则报错！</li>
</ul>
</blockquote>
<h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><ul>
<li>this是用来明确索引当前所在对象的成员（变量、参数、方法）；</li>
<li><strong>this只能用在类的非静态</strong>成员方法、约束、和覆盖中。</li>
<li>this的使用可以明确所指向变量的作用域,避免变量指向不清晰的问题；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Demo:</span><br><span class="line">    <span class="keyword">integer</span> x;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">integer</span> x):</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.x</span> = x;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>


<h1 id="对象拷贝"><a href="#对象拷贝" class="headerlink" title="对象拷贝"></a>对象拷贝</h1><h2 id="句柄的传递"><a href="#句柄的传递" class="headerlink" title="句柄的传递"></a>句柄的传递</h2><ul>
<li>区分类和对象之后，还要区分对象和句柄。对象创建之后，在内存的位置就不会改变了，但是指向该空间的句柄可以有不止一个；</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Transaction t1, t2;  <span class="comment">//声明句柄</span></span><br><span class="line">t1 = <span class="keyword">new</span>(); <span class="comment">//例化对象，并返回句柄给t1</span></span><br><span class="line">t2 = t1;  <span class="comment">// t1和t2指向同一个对象了</span></span><br><span class="line">t1 = <span class="keyword">new</span>(); <span class="comment">//例化了第二个对象，返回句柄给t1,现在t1和t2指向不同对象了</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="赋值和拷贝"><a href="#赋值和拷贝" class="headerlink" title="赋值和拷贝"></a>赋值和拷贝</h2><ul>
<li>声明变量和创建对象是两个过程<ul>
<li><code>Packet p1; p1 = new();</code></li>
</ul>
</li>
<li>如果将p1赋值给p2，那么还是只有一个对象，但是有两个句柄；</li>
<li>p1和p2指向不同的对象，在创建p2时，从p1拷贝其成员变量，这种方式称为浅拷贝</li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Packet p1, p2;</span><br><span class="line">p1 = <span class="keyword">new</span>;</span><br><span class="line">p2 = <span class="keyword">new</span> p1;  <span class="comment">//拷贝一个对象</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>如果两个句柄指向同一个对象，那么一个句柄修改了成员变量，另一个也会受影响；</li>
<li>如果想要拷贝一个对象，则可以使用<code>p2 = new p1;</code>的形式；</li>
</ul>
<h3 id="深入理解浅拷贝"><a href="#深入理解浅拷贝" class="headerlink" title="深入理解浅拷贝"></a>深入理解浅拷贝</h3><p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> rgb:</span><br><span class="line">    <span class="keyword">byte</span> red;</span><br><span class="line">    <span class="keyword">byte</span> green;</span><br><span class="line">    <span class="keyword">byte</span> blue;</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> pixel:</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">    rgb color;</span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">pixel dot = <span class="keyword">new</span>;</span><br><span class="line">pixel dot2 = <span class="keyword">new</span> dot;      <span class="comment">//浅拷贝</span></span><br><span class="line">pixel dot3 = dot<span class="variable">.copy</span>();   <span class="comment">//深拷贝</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>SV中，对象的拷贝，只针对成员变量；</li>
<li><strong>如果对象中还有别的句柄，那么在new拷贝对象时，只能对color句柄拷贝，而不会对它指向的对象再做拷贝，称为浅拷贝</strong>！</li>
<li><strong>pixel dot2 = new dot;      //浅拷贝</strong></li>
<li><strong>pixel dot3 = dot.copy();   //深拷贝</strong></li>
<li>SV的new只能浅拷贝，需要深拷贝时，需要用户自己定义copy函数！</li>
<li><strong>类的成员在默认情况下，是公共属性的</strong>，表示对于类自身和外部都可以访问该成员变量和成员函数；</li>
<li>可以隐藏和封装，限制外部访问；<ul>
<li><strong>local：只有该类可以访问该成员，子类和外部都不能访问；</strong></li>
<li><strong>protected：该类和子类都可以访问该成员，但是外部不能访问；</strong></li>
<li>通过接口函数完成local的修改，开发者只需要维护接口函数即可；</li>
</ul>
</li>
</ul>
<p>栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet:</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">integer</span> i;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> compare(Packet other):</span><br><span class="line">        compare = (<span class="keyword">this</span><span class="variable">.i</span> == other<span class="variable">.i</span>);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> clock</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">bit</span> is_summer = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">int</span> nclock = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">int</span> get_clock();</span><br><span class="line">        <span class="keyword">if</span>(!is_summer) </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span><span class="variable">.nclock</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span><span class="variable">.nclock</span>+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">bit</span> set_summer(<span class="keyword">bit</span> s);</span><br><span class="line">        <span class="keyword">this</span><span class="variable">.is_summer</span> = s;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>


<h1 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h1><h2 id="继承和子类"><a href="#继承和子类" class="headerlink" title="继承和子类"></a>继承和子类</h2><ul>
<li>比如，在Packet类扩展一个新的类LinkPacket；</li>
<li>通过extends关键字，LinkedPacket继承父类Packet，所有的方法和成员变量；所以，LinkedPacket对象中也包含Packet类的成员；</li>
<li><strong>所以，父类的句柄也可以指向子类的对象！</strong></li>
<li><strong>如果子类中声明了与父类同名的成员，那么子类对他的同名成员的访问都指向子类，父类的成员被隐藏了！</strong> —&gt; 成员覆盖！</li>
<li></li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkPacket <span class="keyword">extends</span> Packet;</span><br><span class="line">    LinkPacket next;</span><br><span class="line">    <span class="keyword">function</span> LinkPacket get_next();</span><br><span class="line">        get_next = next;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">LinkPacket lp = <span class="keyword">new</span>;</span><br><span class="line">Packet p = lp;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>成员覆盖的栗子</strong>：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet;</span><br><span class="line">    <span class="keyword">integer</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> get();</span><br><span class="line">        get = i;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> LinkedPacket <span class="keyword">extends</span> Packet;</span><br><span class="line">    <span class="keyword">integer</span> i=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> get();</span><br><span class="line">        get = -i;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line">LinkedPacket lp = <span class="keyword">new</span>;</span><br><span class="line">Packet p = lp;</span><br><span class="line">j = p<span class="variable">.i</span>;        <span class="comment">//j=1,是用的父类的</span></span><br><span class="line">j = p<span class="variable">.get</span>();    <span class="comment">//j=1,还是父类的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果使用lp去访问，得到的也都是子类的，这才是覆盖！！！</span></span><br></pre></td></tr></tbody></table></figure>


<h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><ul>
<li><code>super</code> ： 用来访问当前对象的父类的成员；</li>
<li>尤其当子类的成员和父类的成员同名时，需要使用super来指定访问父类的成员，而不是默认的子类成员；</li>
</ul>
<p>super的栗子：</p>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Packet;</span><br><span class="line">    <span class="keyword">integer</span> value;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> delay();</span><br><span class="line">        delay = value * value;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> LinkedPacket <span class="keyword">extends</span> Packet;</span><br><span class="line">    <span class="keyword">integer</span> value;</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">integer</span> delay();</span><br><span class="line">        delay = <span class="keyword">super</span><span class="variable">.delay</span>() + value * <span class="keyword">super</span><span class="variable">.value</span>;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="验证环境中的案例"><a href="#验证环境中的案例" class="headerlink" title="验证环境中的案例"></a>验证环境中的案例</h2><blockquote>
<p>已经有了generator和driver两个组件，第一个单纯产生激励数据，第二个单纯使用激励数据发送时序激励；</p>
<p>这种单一职责划分，使得各个组件的任务十分明确；</p>
<p>如果要将数据发送到DUT，需要以下的基本元素和数据的处理方法，我们把他们封装在Transaction类中；</p>
<p>如果为了测试DUT的稳定性，需要加入一些错误的数据测试DUT的反馈，但是<strong>又想尽量复用原有的环境和各种已经定义好的类，则可以使用继承的方法</strong>，创建一个类BadTr</p>
</blockquote>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p13p18sv%E6%95%B0%E7%BB%84-%E7%B1%BB-%E5%AF%B9%E8%B1%A1-%E5%8C%85/%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E4%BE%8B%E5%AD%90.png" class="" title="验证环境中的例子">

<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Transaction;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">bit</span> [<span class="number">31</span>:<span class="number">0</span>] src, dst, data[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">bit</span> [<span class="number">31</span>:<span class="number">0</span>] crc;</span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> calc_crc();</span><br><span class="line">        crc = src ^ dst ^ data<span class="variable">.xor</span>;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> display(<span class="keyword">input</span> <span class="keyword">string</span> prefix=<span class="string">""</span>);</span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">"%sTr: src=%h, dst=%h, crc=%h"</span>, prefix, src, dst, crc);</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> BadTr <span class="keyword">extends</span> Transaction;</span><br><span class="line">    <span class="keyword">rand</span> <span class="keyword">bit</span> bad_crc;</span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> calc_crc;</span><br><span class="line">        <span class="keyword">super</span><span class="variable">.calc_crc</span>();</span><br><span class="line">        <span class="keyword">if</span> (bad_crc)</span><br><span class="line">            crc = ~crc;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> display(<span class="keyword">input</span> <span class="keyword">string</span> prefix=<span class="string">""</span>);</span><br><span class="line">        <span class="built_in">$write</span>(<span class="string">"%sBadTr bad_crc=%b, "</span>, prefix, bad_crc);</span><br><span class="line">        <span class="keyword">super</span><span class="variable">.display</span>();</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span> : BadTr</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h1 id="包的使用"><a href="#包的使用" class="headerlink" title="包的使用"></a>包的使用</h1><p>两个模块同名会出现错误或者后面的覆盖了前面的，</p>
<ul>
<li>大型项目中，容易出现模块重名；</li>
<li>对于重名的硬件模块，可以将他们放到<strong>不同编译的库</strong>中；</li>
<li>对于重名的软件类、方法，可以放入<strong>不同的包</strong>中；</li>
<li><strong>使用不同的验证IP时，不知道是否会有重名的类，所以使用包package将关联的方法和类放入同一个逻辑集合</strong>；</li>
<li><strong>package还可以在多个模块或者类之间共享用户定义的类型</strong>；</li>
<li>用户自定义的类型，比如类、方法、变量、结构体、枚举都可以在<code>package .. endpackage</code>中定义；</li>
<li>在module、class、interface中，都可以使用包中定义或者声明的内容；</li>
<li>通过域索引符，<code>::</code>可以直接使用<ul>
<li><code>definitions::parameter</code></li>
</ul>
</li>
<li>可以通过import指定索引一些需要的包中定义的类型到指定的域中，或者使用<code>*</code>把包中的类型都导出：</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> M;</span><br><span class="line">    <span class="keyword">import</span> definitions::instruction_t;</span><br><span class="line">    instruction_t inst;</span><br><span class="line">    <span class="keyword">import</span> definitions::*;</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>建议在不同包中的类名，命名时要加上包的前缀。</li>
</ul>
<figure class="highlight sv"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> definitions;</span><br><span class="line">    <span class="keyword">parameter</span> VERSION = <span class="string">"1.1"</span>;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">enum</span> {ADD, SUB, MUL} opcodes_t;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">struct</span> {</span><br><span class="line">        <span class="keyword">logic</span> [<span class="number">31</span>:<span class="number">0</span>] a, b;</span><br><span class="line">        opcodes_t opcode;</span><br><span class="line">    } instruction_t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">automatic</span> [<span class="number">31</span>:<span class="number">0</span>] multiplier(<span class="keyword">input</span>[<span class="number">31</span>:<span class="number">0</span>] a, b);</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endpackage</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="包和库的区分"><a href="#包和库的区分" class="headerlink" title="包和库的区分"></a>包和库的区分</h2><ul>
<li>package容器可以对类型做一个隔离作用；</li>
<li>package的意义是把软件中的类、方法、变量封装在各自不同的域中，与全局域做好隔离；</li>
<li>lib库是编译的产物，硬件的module、interface、program都会编译到库中，如果不指定编译库的话，会编译到默认的库中；</li>
<li>lib库可以容纳硬件类型，也能容纳软件类型（类、方法和包等）</li>
<li>package包只能容纳软件类型，比如类、方法和参数；</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-10T13:13:00.000Z" title="5/10/2022, 1:13:00 PM">2022-05-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">14 分钟读完 (大约2087个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/">路科V0SVP10P12验证环境</a></p><div class="content"><h1 id="验证环境结构"><a href="#验证环境结构" class="headerlink" title="验证环境结构"></a>验证环境结构</h1><ul>
<li>测试平台testbench是整个验证系统的总称；</li>
<li>包括验证结构中的<strong>各个组件、组件之间的连接关系、测试平台的配置和控制</strong></li>
<li>还包括编译仿真的流程、结果分析报告和覆盖率量化等；</li>
<li><strong>主要关注验证平台的结构和组件部分，他们产生设计需要的各种输入，也会在此基础上进行设计功能检查</strong>；</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/testbench%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="" title="testbench结构图">
<ul>
<li>各个验证组件相互独立</li>
<li>各个验证组件和设计需要互相连接</li>
<li>各个验证组件也需要进行通信（线程通信方式）</li>
<li>验证环境也需要时钟和复位信号的驱动</li>
</ul>
</li>
<li>设计由多个层次构成，无论是物理分区FPGA/ASIC，还是逻辑分区合成单元/核心子系统；</li>
<li>验证也可以按照不同级别安排目标：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%84%E7%9A%84%E5%B1%82%E6%AC%A1.png" class="" title="验证结构的层次"></li>
<li>每个验证级别都有最合适的验证目标</li>
<li>较小的模块更容易验证，他们提供了更大的可控性和可观察性；</li>
<li>较小的模块容易设置条件和状态组合，观察反应是否符合预期；</li>
<li>而他们组成的子系统，以较低的可控性和可观察性为代价；</li>
<li>任何层次的待验设计，都应该有稳定的接口和预期功能；</li>
<li>理想情况，每个子系统和模块都要有硬件描述文档；</li>
<li>如果接口和功能变化，则会影响testbench随之变化，会影响项目进度；</li>
<li><strong>对设计稳定性的要求，一般是先接口稳定下来，再功能稳定下来</strong>；</li>
</ul>
</li>
</ul>
<h1 id="硬件设计描述"><a href="#硬件设计描述" class="headerlink" title="硬件设计描述"></a>硬件设计描述</h1><h2 id="MCDF简介："><a href="#MCDF简介：" class="headerlink" title="MCDF简介："></a>MCDF简介：</h2><ul>
<li>遵循硬件设计描述的方式，介绍它的<strong>结构、功能、寄存器、和时序</strong>；</li>
<li>多通道数据整形器，可以将上行多个通道数据经过内部的<strong>FIFO</strong>，最终以数据包的形式送出；</li>
<li><strong>上行数据和下行数据的接口协议不同</strong>；</li>
<li>多通道数据整形器也有寄存器的读写接口，支持更多的控制功能；</li>
</ul>
<h2 id="MCDF的结构："><a href="#MCDF的结构：" class="headerlink" title="MCDF的结构："></a>MCDF的结构：</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84.png" class="" title="MCDF的设计结构">
<ul>
<li>通道模块(可以同时接收3路通道的输入数据)<ul>
<li>slave</li>
<li>FIFO</li>
<li>但是由于带宽限制，每个时钟周期只有一路数据可以通过仲裁模块，到达整形器模块！</li>
</ul>
</li>
<li>寄存器模块<ul>
<li>控制通道开关</li>
<li>控制仲裁器的选择</li>
<li>控制整形器打包带长度</li>
<li>获取每个通道的FIFO余量</li>
</ul>
</li>
<li>仲裁模块</li>
<li>整形模块<ul>
<li>将指定通道的数据重新打包，以新的总线形式发送出去</li>
</ul>
</li>
</ul>
<h2 id="MCDF的接口描述："><a href="#MCDF的接口描述：" class="headerlink" title="MCDF的接口描述："></a>MCDF的接口描述：</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%BF%A1%E5%8F%B7.png" class="" title="MCDF的接口信号">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%BF%A1%E5%8F%B72.png" class="" title="MCDF的接口信号2">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%BF%A1%E5%8F%B73.png" class="" title="MCDF的接口信号3">


<h2 id="MCDF的接口时序："><a href="#MCDF的接口时序：" class="headerlink" title="MCDF的接口时序："></a>MCDF的接口时序：</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%97%B6%E5%BA%8F.png" class="" title="MCDF的接口时序">
<ul>
<li>如果当前周期的valid和ready同时为高，则表示可以发送数据；</li>
</ul>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%97%B6%E5%BA%8F2.png" class="" title="MCDF的接口时序2">
<ul>
<li>读写寄存器时，需要给地址端口和指令端口对应的值</li>
<li>读取的寄存器数值将在下一个时钟周期由寄存器模块输出</li>
</ul>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%97%B6%E5%BA%8F3.png" class="" title="MCDF的接口时序3">

<ul>
<li>当整形器要发送某一个通道的数据时，会拉高req信号，同时也更新chid和长度length信息，等待下行模块接收信号grant为高，其下个周期req应该拉低，同时，start拉高，这时候发送第一个有效数据，发送数据应该连续，发送这段数据的最后一个时，end拉高，start和end的间隔内，data发送完毕！</li>
</ul>
<h2 id="MCDF的寄存器描述："><a href="#MCDF的寄存器描述：" class="headerlink" title="MCDF的寄存器描述："></a>MCDF的寄存器描述：</h2><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E5%AF%84%E5%AD%98%E5%99%A8%E6%8F%8F%E8%BF%B0.png" class="" title="MCDF的寄存器描述">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDF%E7%9A%84%E5%AF%84%E5%AD%98%E5%99%A8%E6%8F%8F%E8%BF%B02.png" class="" title="MCDF的寄存器描述2">

<h2 id="MCDF-mini版结构"><a href="#MCDF-mini版结构" class="headerlink" title="MCDF mini版结构"></a>MCDF mini版结构</h2><p>移除了寄存器模块和整流模块！</p>
<p>功能变成了由多个通道输入，然后仲裁器选择一个通道进行输出。。</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/MCDFmini%E7%89%88%E7%BB%93%E6%9E%84.png" class="" title="MCDFmini版结构">


<h1 id="验证环境组件"><a href="#验证环境组件" class="headerlink" title="验证环境组件"></a>验证环境组件</h1><h3 id="激励发生器"><a href="#激励发生器" class="headerlink" title="激励发生器"></a>激励发生器</h3><ul>
<li>stimulator（激励发生器）：也称为驱动器driver、总线功能模型BFS、行为模型behavioral 或者 发生器generator。</li>
<li>stimulator的主要职责是模拟与DUT相邻设计的接口协议，只需要关注如何模拟接口信号，使它能够以真实接口协议发送激励给DUT</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A8.png" class="" title="激励发生器"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%BF%80%E5%8A%B1%E5%8F%91%E7%94%9F%E5%99%A82.png" class="" title="激励发生器2"></li>
</ul>
<h4 id="激励器组件结构"><a href="#激励器组件结构" class="headerlink" title="激励器组件结构"></a>激励器组件结构</h4><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%BF%80%E5%8A%B1%E5%99%A8%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84%E6%A1%86%E5%9B%BE.png" class="" title="激励器组件结构框图">

<ul>
<li>按照stimulator和DUT的连接关系，激励发生器分为两种：initiator发起器 和 responder响应器</li>
<li>由于channel从端口协议上有握手信号，所以需要遵照接口时序，当chx_ready为低时，保证chx_data和chx_valid保持不变。</li>
<li>channel initiator 组件：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/channel_initiator_%E7%BB%84%E4%BB%B6.png" class="" title="channelinitiator组件"></li>
</ul>
</li>
</ul>
<h3 id="监测器"><a href="#监测器" class="headerlink" title="监测器"></a>监测器</h3><ul>
<li>monitor（监测器）：主要功能是<strong>用来观察DUT的边界或者内部信号，并且经过打包整理传送给其他验证平台的组件</strong>，比如checker比较器。</li>
<li>安装监测信号灯层次划分monitor的功能，分为观测DUT边界信号和观测DUT内部信号。<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/monitor%E5%88%86%E7%B1%BB.png" class="" title="monitor分类"></li>
</ul>
</li>
</ul>
<h4 id="监测器的组件结构"><a href="#监测器的组件结构" class="headerlink" title="监测器的组件结构"></a>监测器的组件结构</h4><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%A3%80%E6%B5%8B%E5%99%A8%E7%9A%84%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84.png" class="" title="监测器的组件结构">

<p>另外一些要求和建议：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E5%8F%A6%E5%A4%96%E4%B8%80%E4%BA%9B%E8%A6%81%E6%B1%82%E5%92%8C%E5%BB%BA%E8%AE%AE.png" class="" title="另外一些要求和建议">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E5%8F%A6%E5%A4%96%E4%B8%80%E4%BA%9B%E8%A6%81%E6%B1%82%E5%92%8C%E5%BB%BA%E8%AE%AE2.png" class="" title="另外一些要求和建议2">


<h3 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h3><ul>
<li>checker（比较器）：投入时间最多的组件，肩负了模拟设计行为和功能检查的任务，而且缓存各个monitor收集到的数据；</li>
<li>将DUT输入接口侧的数据汇集给内置的reference model，reference model扮演了模拟硬件功能的角色。</li>
<li>checker将实际收集到的DUT输出数据和reference model产生的数据进行对比；</li>
<li>对于内部设计的关键功能模块，应该有相应的线程进行独立的检查；</li>
<li>检查过程中，可以将检查成功的信息统一纳入检查报告中，便于仿真后的追溯，如果检查失败，也可以暂停仿真同时报告错误，在线调试。<ul>
<li>线上比较：在仿真时收集数据，在线比较，并实时报告。</li>
<li>线下比较：仿真时收集的数据记录在文件中，仿真结束后，通过脚本或者其他手段，进行数据比较。</li>
</ul>
</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/checker.png" class="" title="checker"></li>
</ul>
<h4 id="比较器组件结构"><a href="#比较器组件结构" class="headerlink" title="比较器组件结构"></a>比较器组件结构</h4><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%AF%94%E8%BE%83%E5%99%A8%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84.png" class="" title="比较器组件结构">

<h4 id="比较器实现的建议"><a href="#比较器实现的建议" class="headerlink" title="比较器实现的建议"></a>比较器实现的建议</h4><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%AF%94%E8%BE%83%E5%99%A8%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%BB%BA%E8%AE%AE.png" class="" title="比较器实现的建议">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0svp10p12%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83/%E6%AF%94%E8%BE%83%E5%99%A8%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%BB%BA%E8%AE%AE2.png" class="" title="比较器实现的建议2"></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-10T13:05:55.000Z" title="5/10/2022, 1:05:55 PM">2022-05-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">17 分钟读完 (大约2578个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0sv%E5%92%8Cverilog%E7%9A%84%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93/">路科V0SV和Verilog的对比总结</a></p><div class="content"><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0sv%E5%92%8Cverilog%E7%9A%84%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93/%E8%B7%AF%E7%A7%91.png" class="" title="路科">

<h2 id="Verilog："><a href="#Verilog：" class="headerlink" title="Verilog："></a>Verilog：</h2><h3 id="变量类型-veriables"><a href="#变量类型-veriables" class="headerlink" title="变量类型 veriables"></a>变量类型 veriables</h3><h4 id="四值逻辑"><a href="#四值逻辑" class="headerlink" title="四值逻辑"></a>四值逻辑</h4><h5 id="0"><a href="#0" class="headerlink" title="0"></a>0</h5><h5 id="1"><a href="#1" class="headerlink" title="1"></a>1</h5><h5 id="X"><a href="#X" class="headerlink" title="X"></a>X</h5><h6 id="用来捕获设计错误，比如寄存器未初始化"><a href="#用来捕获设计错误，比如寄存器未初始化" class="headerlink" title="用来捕获设计错误，比如寄存器未初始化"></a>用来捕获设计错误，比如寄存器未初始化</h6><h5 id="Z"><a href="#Z" class="headerlink" title="Z"></a>Z</h5><h6 id="用来表示未连接或者三态的设计逻辑"><a href="#用来表示未连接或者三态的设计逻辑" class="headerlink" title="用来表示未连接或者三态的设计逻辑"></a>用来表示未连接或者三态的设计逻辑</h6><p>但是在系统级或者事务级，Z和X很少使用</p>
<h4 id="reg"><a href="#reg" class="headerlink" title="reg"></a>reg</h4><h5 id="用来描述-逻辑，-integer-用来描述循环变量和计算"><a href="#用来描述-逻辑，-integer-用来描述循环变量和计算" class="headerlink" title="用来描述 逻辑， integer 用来描述循环变量和计算"></a>用来描述 逻辑， integer 用来描述循环变量和计算</h5><h5 id="reg并不一定要被综合为register，它只是用来与线网类型相对，表示存储数据的变量"><a href="#reg并不一定要被综合为register，它只是用来与线网类型相对，表示存储数据的变量" class="headerlink" title="reg并不一定要被综合为register，它只是用来与线网类型相对，表示存储数据的变量"></a>reg并不一定要被综合为register，它只是用来与线网类型相对，表示存储数据的变量</h5><h4 id="integer"><a href="#integer" class="headerlink" title="integer"></a>integer</h4><h5 id="和time类似，像有相同位数的reg一样运转，"><a href="#和time类似，像有相同位数的reg一样运转，" class="headerlink" title="和time类似，像有相同位数的reg一样运转，"></a>和time类似，像有相同位数的reg一样运转，</h5><p>表达式的integer值作为 有符号数 处理， reg 和 time 作为无符号数处理</p>
<h4 id="time"><a href="#time" class="headerlink" title="time"></a>time</h4><h5 id="和realtime类似，-用来保存测试装置的仿真时间"><a href="#和realtime类似，-用来保存测试装置的仿真时间" class="headerlink" title="和realtime类似， 用来保存测试装置的仿真时间"></a>和realtime类似， 用来保存测试装置的仿真时间</h5><h4 id="real"><a href="#real" class="headerlink" title="real"></a>real</h4><h5 id="在系统模型中使用"><a href="#在系统模型中使用" class="headerlink" title="在系统模型中使用"></a>在系统模型中使用</h5><h4 id="realtime"><a href="#realtime" class="headerlink" title="realtime"></a>realtime</h4><h4 id="变量类型是保存在initial-always-task-function中赋的值"><a href="#变量类型是保存在initial-always-task-function中赋的值" class="headerlink" title="变量类型是保存在initial always task function中赋的值"></a>变量类型是保存在initial always task function中赋的值</h4><h4 id="只能用-过程赋值-来完成"><a href="#只能用-过程赋值-来完成" class="headerlink" title="只能用 过程赋值 来完成"></a>只能用 过程赋值 来完成</h4><h3 id="线网类型-nets"><a href="#线网类型-nets" class="headerlink" title="线网类型 nets"></a>线网类型 nets</h3><h4 id="四值逻辑-1"><a href="#四值逻辑-1" class="headerlink" title="四值逻辑"></a>四值逻辑</h4><h5 id="0-1"><a href="#0-1" class="headerlink" title="0"></a>0</h5><h5 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h5><h5 id="X-1"><a href="#X-1" class="headerlink" title="X"></a>X</h5><h5 id="Z-1"><a href="#Z-1" class="headerlink" title="Z"></a>Z</h5><h4 id="wire"><a href="#wire" class="headerlink" title="wire"></a>wire</h4><h4 id="wor"><a href="#wor" class="headerlink" title="wor"></a>wor</h4><h4 id="wand"><a href="#wand" class="headerlink" title="wand"></a>wand</h4><h4 id="用于建模连接线路，值由-线网驱动器决定"><a href="#用于建模连接线路，值由-线网驱动器决定" class="headerlink" title="用于建模连接线路，值由 线网驱动器决定"></a>用于建模连接线路，值由 线网驱动器决定</h4><h4 id="线网驱动器：可以是门或者模块的实例，也可以是连续赋值的输出"><a href="#线网驱动器：可以是门或者模块的实例，也可以是连续赋值的输出" class="headerlink" title="线网驱动器：可以是门或者模块的实例，也可以是连续赋值的输出"></a>线网驱动器：可以是门或者模块的实例，也可以是连续赋值的输出</h4><h2 id="SV"><a href="#SV" class="headerlink" title="SV :"></a>SV :</h2><p>&nbsp;在与C交互时，可以使用二值逻辑使接口参数更加简单，
因为构建验证驱动组件时，不关注硬件底层逻辑X，Z</p>
<h3 id="硬件信号"><a href="#硬件信号" class="headerlink" title="硬件信号"></a>硬件信号</h3><h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4><h5 id="变量-var"><a href="#变量-var" class="headerlink" title="变量 var"></a>变量 var</h5><h5 id="线网类型-wire"><a href="#线网类型-wire" class="headerlink" title="线网类型 wire"></a>线网类型 wire</h5><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><h5 id="四值逻辑-logic"><a href="#四值逻辑-logic" class="headerlink" title="四值逻辑 logic"></a>四值逻辑 logic</h5><p>构成的vector都是无符号类型</p>
<h6 id="用来表示通用的存储硬件数据"><a href="#用来表示通用的存储硬件数据" class="headerlink" title="用来表示通用的存储硬件数据"></a>用来表示通用的存储硬件数据</h6><p>####### logic resetN;&nbsp; &nbsp; // 1位宽的四值逻辑</p>
<p>####### logic&nbsp; [63:0] data;&nbsp; &nbsp; &nbsp;// 64位宽的变量</p>
<p>####### logic [0:7} array [0:255];&nbsp; &nbsp; // 由8位向量元素构成的数组</p>
<h6 id="虽然只表示数据类型，但是在声明时，会默认表示为变量var，用户可以显式声明其类型"><a href="#虽然只表示数据类型，但是在声明时，会默认表示为变量var，用户可以显式声明其类型" class="headerlink" title="虽然只表示数据类型，但是在声明时，会默认表示为变量var，用户可以显式声明其类型"></a>虽然只表示数据类型，但是在声明时，会默认表示为变量var，用户可以显式声明其类型</h6><p>####### var logic [63:0] addr;&nbsp; &nbsp; // 64位宽的变量类型</p>
<p>####### wire logic [63:0] data;&nbsp; &nbsp; // 64位宽的线网类型</p>
<h5 id="二值逻辑-bit"><a href="#二值逻辑-bit" class="headerlink" title="二值逻辑 bit"></a>二值逻辑 bit</h5><h6 id="帮助更高级抽象的建模，比如，事务级模型"><a href="#帮助更高级抽象的建模，比如，事务级模型" class="headerlink" title="帮助更高级抽象的建模，比如，事务级模型"></a>帮助更高级抽象的建模，比如，事务级模型</h6><p>####### bit ： 1位二值逻辑变量</p>
<p>构成的vector是无符号类型</p>
<p>####### byte ： 8位二值逻辑，类似于C语言中的char</p>
<p>####### shortint ： 16位，类似short</p>
<p>####### int : 32位，类似int</p>
<p>####### longint : 64位，类似longlong</p>
<h6 id="bit类型默认也是变量类型，"><a href="#bit类型默认也是变量类型，" class="headerlink" title="bit类型默认也是变量类型，"></a>bit类型默认也是变量类型，</h6><p>除了bit的其他二值逻辑类型的verctor，默认都是有符号类型</p>
<h6 id="可以使用unsighed表示无符号类型，-比如-byte-unsigned"><a href="#可以使用unsighed表示无符号类型，-比如-byte-unsigned" class="headerlink" title="可以使用unsighed表示无符号类型， 比如 byte unsigned"></a>可以使用unsighed表示无符号类型， 比如 byte unsigned</h6><p>####### 表示的范围从[-128, 127]， 变为了[0, 255]</p>
<h3 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a>自定义类型</h3><h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><h5 id="可以用更少的代码表示更多的功能"><a href="#可以用更少的代码表示更多的功能" class="headerlink" title="可以用更少的代码表示更多的功能"></a>可以用更少的代码表示更多的功能</h5><h5 id="代码可读性更好"><a href="#代码可读性更好" class="headerlink" title="代码可读性更好"></a>代码可读性更好</h5><h5 id="通过typedef创建用户自定义类型"><a href="#通过typedef创建用户自定义类型" class="headerlink" title="通过typedef创建用户自定义类型"></a>通过typedef创建用户自定义类型</h5><h5 id="通过enum创建枚举"><a href="#通过enum创建枚举" class="headerlink" title="通过enum创建枚举"></a>通过enum创建枚举</h5><h5 id="通过struct创建结构体类型"><a href="#通过struct创建结构体类型" class="headerlink" title="通过struct创建结构体类型"></a>通过struct创建结构体类型</h5><h5 id="Verilog无法使用户扩展变量和线网类型"><a href="#Verilog无法使用户扩展变量和线网类型" class="headerlink" title="Verilog无法使用户扩展变量和线网类型"></a>Verilog无法使用户扩展变量和线网类型</h5><h5 id="SV提供的自定义类型使用户构建更高层次抽象的数据类型"><a href="#SV提供的自定义类型使用户构建更高层次抽象的数据类型" class="headerlink" title="SV提供的自定义类型使用户构建更高层次抽象的数据类型"></a>SV提供的自定义类型使用户构建更高层次抽象的数据类型</h5><h5 id="比如：-typedef-int-unsigned-uint-uint-a-b"><a href="#比如：-typedef-int-unsigned-uint-uint-a-b" class="headerlink" title="比如： typedef int unsigned uint;&nbsp; uint a, b;"></a>比如： typedef int unsigned uint;&nbsp; uint a, b;</h5><h5 id="一般对自定义类型加个-t后缀"><a href="#一般对自定义类型加个-t后缀" class="headerlink" title="一般对自定义类型加个_t后缀"></a>一般对自定义类型加个_t后缀</h5><h4 id="enum枚举"><a href="#enum枚举" class="headerlink" title="enum枚举"></a>enum枚举</h4><h5 id="每个值都要一个用户自定义的名字，比如枚举类型RGB"><a href="#每个值都要一个用户自定义的名字，比如枚举类型RGB" class="headerlink" title="每个值都要一个用户自定义的名字，比如枚举类型RGB"></a>每个值都要一个用户自定义的名字，比如枚举类型RGB</h5><h6 id="enum-red-green-blue-RGB"><a href="#enum-red-green-blue-RGB" class="headerlink" title="enum {red, green, blue} RGB;"></a>enum {red, green, blue} RGB;</h6><h5 id="Verilog没有枚举，为了提供描述变量的范围，使用参数来表示可取值的范围，或者宏定义定义各个合法值的名称"><a href="#Verilog没有枚举，为了提供描述变量的范围，使用参数来表示可取值的范围，或者宏定义定义各个合法值的名称" class="headerlink" title="Verilog没有枚举，为了提供描述变量的范围，使用参数来表示可取值的范围，或者宏定义定义各个合法值的名称"></a>Verilog没有枚举，为了提供描述变量的范围，使用参数来表示可取值的范围，或者宏定义定义各个合法值的名称</h5><h5 id="定义枚举值"><a href="#定义枚举值" class="headerlink" title="定义枚举值"></a>定义枚举值</h5><h6 id="默认为int，32位二值逻辑"><a href="#默认为int，32位二值逻辑" class="headerlink" title="默认为int，32位二值逻辑"></a>默认为int，32位二值逻辑</h6><h6 id="但是，SV也允许指明数据类型，比如：-enum-bit-TRUE-FALSE-Boolean-enum-logic-1-0-WAITE-LOAD-READY-state"><a href="#但是，SV也允许指明数据类型，比如：-enum-bit-TRUE-FALSE-Boolean-enum-logic-1-0-WAITE-LOAD-READY-state" class="headerlink" title="但是，SV也允许指明数据类型，比如： enum bit {TRUE, FALSE} Boolean;&nbsp; enum logic [1:0] {WAITE, LOAD, READY} state;"></a>但是，SV也允许指明数据类型，比如： enum bit {TRUE, FALSE} Boolean;&nbsp; enum logic [1:0] {WAITE, LOAD, READY} state;</h6><h6 id="如果枚举类型被赋值，那么所赋值应该在其数据范围内-enum-logic-2-0-WAITE-3’b001-Load-3’b010-READY-3’b100-state"><a href="#如果枚举类型被赋值，那么所赋值应该在其数据范围内-enum-logic-2-0-WAITE-3’b001-Load-3’b010-READY-3’b100-state" class="headerlink" title="如果枚举类型被赋值，那么所赋值应该在其数据范围内&nbsp; &nbsp;enum logic [2:0] {WAITE = 3’b001, Load = 3’b010, READY = 3’b100} state;"></a>如果枚举类型被赋值，那么所赋值应该在其数据范围内&nbsp; &nbsp;enum logic [2:0] {WAITE = 3’b001, Load = 3’b010, READY = 3’b100} state;</h6><h6 id="如果枚举变量是四值逻辑，那么赋值为X或者Z也是合法的-enum-logic-ON-1’b1-OFF-1’bz-out"><a href="#如果枚举变量是四值逻辑，那么赋值为X或者Z也是合法的-enum-logic-ON-1’b1-OFF-1’bz-out" class="headerlink" title="如果枚举变量是四值逻辑，那么赋值为X或者Z也是合法的&nbsp; &nbsp;enum logic {ON=1’b1, OFF=1’bz} out;"></a>如果枚举变量是四值逻辑，那么赋值为X或者Z也是合法的&nbsp; &nbsp;enum logic {ON=1’b1, OFF=1’bz} out;</h6><h5 id="自定义枚举类型"><a href="#自定义枚举类型" class="headerlink" title="自定义枚举类型"></a>自定义枚举类型</h5><h6 id="如果枚举类型没有伴随typedef，那么该枚举类型是个匿名枚举类型"><a href="#如果枚举类型没有伴随typedef，那么该枚举类型是个匿名枚举类型" class="headerlink" title="如果枚举类型没有伴随typedef，那么该枚举类型是个匿名枚举类型"></a>如果枚举类型没有伴随typedef，那么该枚举类型是个匿名枚举类型</h6><h6 id="将它typedef为自定义类型，就可以用同一个枚举类型来声明多个变量或者线网-typedef-enum-WAITE-LOAD-READY-state-t-state-t-state-next-state"><a href="#将它typedef为自定义类型，就可以用同一个枚举类型来声明多个变量或者线网-typedef-enum-WAITE-LOAD-READY-state-t-state-t-state-next-state" class="headerlink" title="将它typedef为自定义类型，就可以用同一个枚举类型来声明多个变量或者线网&nbsp; &nbsp; typedef enum {WAITE, LOAD, READY} state_t;&nbsp; &nbsp;state_t state next_state;"></a>将它typedef为自定义类型，就可以用同一个枚举类型来声明多个变量或者线网&nbsp; &nbsp; typedef enum {WAITE, LOAD, READY} state_t;&nbsp; &nbsp;state_t state next_state;</h6><h5 id="枚举类型赋值"><a href="#枚举类型赋值" class="headerlink" title="枚举类型赋值"></a>枚举类型赋值</h5><h6 id="赋值要求很严格，-两端必须是相同的枚举类型；"><a href="#赋值要求很严格，-两端必须是相同的枚举类型；" class="headerlink" title="赋值要求很严格，=两端必须是相同的枚举类型；"></a>赋值要求很严格，=两端必须是相同的枚举类型；</h6><p>int foo; states_t state; 
foo = state + 1; // 可以&nbsp; &nbsp;
state = foo +1; // 不可以&nbsp; 
state = states_t’(foo+1); // 可以</p>
<p>state++; //不可以
state= state + 1; //不可以
state = states_t’(state+1);&nbsp; // 可以</p>
<h4 id="struct-结构体"><a href="#struct-结构体" class="headerlink" title="struct 结构体"></a>struct 结构体</h4><h5 id="优势-1"><a href="#优势-1" class="headerlink" title="优势"></a>优势</h5><h6 id="经常遇到数据表示逻辑相关的数据信号组，比如总线协议的所有控制信号，或者在状态控制器中用到的所有信号，verilog不方便"><a href="#经常遇到数据表示逻辑相关的数据信号组，比如总线协议的所有控制信号，或者在状态控制器中用到的所有信号，verilog不方便" class="headerlink" title="经常遇到数据表示逻辑相关的数据信号组，比如总线协议的所有控制信号，或者在状态控制器中用到的所有信号，verilog不方便"></a>经常遇到数据表示逻辑相关的数据信号组，比如总线协议的所有控制信号，或者在状态控制器中用到的所有信号，verilog不方便</h6><h6 id="SV的结构体，成员可以是任意变量类型，包括自定义和其他常量类型"><a href="#SV的结构体，成员可以是任意变量类型，包括自定义和其他常量类型" class="headerlink" title="SV的结构体，成员可以是任意变量类型，包括自定义和其他常量类型"></a>SV的结构体，成员可以是任意变量类型，包括自定义和其他常量类型</h6><h6 id="struct"><a href="#struct" class="headerlink" title="struct {"></a>struct {</h6><p>&nbsp; int a,b;
&nbsp; opcode_t opcode;
&nbsp; logic [23:0] address;
&nbsp; bit error;
} Instruction_Word;</p>
<h5 id="结构体是变量的合集，所以结构体的变量一可以索引到其内部，用-符号，和C一样"><a href="#结构体是变量的合集，所以结构体的变量一可以索引到其内部，用-符号，和C一样" class="headerlink" title="结构体是变量的合集，所以结构体的变量一可以索引到其内部，用.符号，和C一样"></a>结构体是变量的合集，所以结构体的变量一可以索引到其内部，用.符号，和C一样</h5><p>Instruction_Word.address = 32’hF000001E;</p>
<h5 id="结构体类型默认为变量类型，用户也可以显式声明为var或者wire"><a href="#结构体类型默认为变量类型，用户也可以显式声明为var或者wire" class="headerlink" title="结构体类型默认为变量类型，用户也可以显式声明为var或者wire"></a>结构体类型默认为变量类型，用户也可以显式声明为var或者wire</h5><h5 id="结构体也可以typedef为自定义类型，然后使用"><a href="#结构体也可以typedef为自定义类型，然后使用" class="headerlink" title="结构体也可以typedef为自定义类型，然后使用"></a>结构体也可以typedef为自定义类型，然后使用</h5><p>typedef struct {
&nbsp; …;
&nbsp; …;
} instruction_word_t;
instruction_word_t IM;</p>
<h5 id="可以通过索引到成员，依次赋值"><a href="#可以通过索引到成员，依次赋值" class="headerlink" title="可以通过索引到成员，依次赋值"></a>可以通过索引到成员，依次赋值</h5><h5 id="也可以通过分号’和花括号-实现整体赋值"><a href="#也可以通过分号’和花括号-实现整体赋值" class="headerlink" title="也可以通过分号’和花括号{}实现整体赋值"></a>也可以通过分号’和花括号{}实现整体赋值</h5><h6 id="IW-‘-100-3-8’hFF-0"><a href="#IW-‘-100-3-8’hFF-0" class="headerlink" title="IW = ‘{100, 3, 8’hFF, 0};"></a>IW = ‘{100, 3, 8’hFF, 0};</h6><p>IW = ‘{address:0, opcode:8’hFF, a:100, b:5};</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><h4 id="优势-2"><a href="#优势-2" class="headerlink" title="优势"></a>优势</h4><h5 id="Verilog没有string，SV引入string容纳可变长度的字符串"><a href="#Verilog没有string，SV引入string容纳可变长度的字符串" class="headerlink" title="Verilog没有string，SV引入string容纳可变长度的字符串"></a>Verilog没有string，SV引入string容纳可变长度的字符串</h5><h5 id="string类型的存储单元为byte类型，即char"><a href="#string类型的存储单元为byte类型，即char" class="headerlink" title="string类型的存储单元为byte类型，即char"></a>string类型的存储单元为byte类型，即char</h5><h5 id="在string变量长度为N时，索引是0到N-1"><a href="#在string变量长度为N时，索引是0到N-1" class="headerlink" title="在string变量长度为N时，索引是0到N-1"></a>在string变量长度为N时，索引是0到N-1</h5><h4 id="和C的差别"><a href="#和C的差别" class="headerlink" title="和C的差别"></a>和C的差别</h4><h5 id="字符串结尾没有-0"><a href="#字符串结尾没有-0" class="headerlink" title="字符串结尾没有\0"></a>字符串结尾没有\0</h5><h5 id="内存动态分配，用户不需要担心内存管理"><a href="#内存动态分配，用户不需要担心内存管理" class="headerlink" title="内存动态分配，用户不需要担心内存管理"></a>内存动态分配，用户不需要担心内存管理</h5><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><h5 id="typedef-logic-15-0-r-t"><a href="#typedef-logic-15-0-r-t" class="headerlink" title="typedef logic [15:0] r_t;"></a>typedef logic [15:0] r_t;</h5><p>r_t r;
integer i = 1;
string b = “”;
string a = {“Hi”, b};
r = r_t’(a);
b = string’(r);
b = “Hi”;
b = {5{“Hi”}};
a = {i{“Hi”}};&nbsp; &nbsp; //可以，非常量复制
a = {a, b};
a = {“Hi”, b};
b = {“Hi”, “”};
a[0] = “h”;</p>
<h5 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h5><h6 id="str-len-返回string的长度"><a href="#str-len-返回string的长度" class="headerlink" title="str.len()&nbsp; &nbsp;返回string的长度"></a>str.len()&nbsp; &nbsp;返回string的长度</h6><h6 id="str-putc-i-c-将第i个字符替换为字符c，等同于-str-i-c"><a href="#str-putc-i-c-将第i个字符替换为字符c，等同于-str-i-c" class="headerlink" title="str.putc(i, c)&nbsp; &nbsp; 将第i个字符替换为字符c，等同于 str[i] = c"></a>str.putc(i, c)&nbsp; &nbsp; 将第i个字符替换为字符c，等同于 str[i] = c</h6><h6 id="str-getc-i-返回第i个字符"><a href="#str-getc-i-返回第i个字符" class="headerlink" title="str.getc(i)&nbsp; &nbsp; 返回第i个字符"></a>str.getc(i)&nbsp; &nbsp; 返回第i个字符</h6><h6 id="str-substr-i-j-返回第i个字符到第j个字符"><a href="#str-substr-i-j-返回第i个字符到第j个字符" class="headerlink" title="str.substr(i, j)&nbsp; &nbsp; 返回第i个字符到第j个字符"></a>str.substr(i, j)&nbsp; &nbsp; 返回第i个字符到第j个字符</h6><h6 id="另外，SV有其他的系统函数"><a href="#另外，SV有其他的系统函数" class="headerlink" title="另外，SV有其他的系统函数"></a>另外，SV有其他的系统函数</h6><p>####### $sformatf()&nbsp; &nbsp;用来生成一个格式化的字符串</p>
<p>####### $display()&nbsp; &nbsp; 打印输出</p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><h4 id="优势-3"><a href="#优势-3" class="headerlink" title="优势"></a>优势</h4><h5 id="Verilog通过模块之间的端口连接，进行模块间的通信，但是大型设计，端口连接很容易出错，所以，SV扩展了接口interface"><a href="#Verilog通过模块之间的端口连接，进行模块间的通信，但是大型设计，端口连接很容易出错，所以，SV扩展了接口interface" class="headerlink" title="Verilog通过模块之间的端口连接，进行模块间的通信，但是大型设计，端口连接很容易出错，所以，SV扩展了接口interface"></a>Verilog通过模块之间的端口连接，进行模块间的通信，但是大型设计，端口连接很容易出错，所以，SV扩展了接口interface</h5><h5 id="接口提供了面向抽象级建模的方式"><a href="#接口提供了面向抽象级建模的方式" class="headerlink" title="接口提供了面向抽象级建模的方式"></a>接口提供了面向抽象级建模的方式</h5><h5 id="可以简化建模和验证大型复杂的设计"><a href="#可以简化建模和验证大型复杂的设计" class="headerlink" title="可以简化建模和验证大型复杂的设计"></a>可以简化建模和验证大型复杂的设计</h5><h5 id="尤其是标准总线端口，Verilog需要在多个模块重复声明，通信协议也是多次定义，变更之后的更改也很麻烦"><a href="#尤其是标准总线端口，Verilog需要在多个模块重复声明，通信协议也是多次定义，变更之后的更改也很麻烦" class="headerlink" title="尤其是标准总线端口，Verilog需要在多个模块重复声明，通信协议也是多次定义，变更之后的更改也很麻烦"></a>尤其是标准总线端口，Verilog需要在多个模块重复声明，通信协议也是多次定义，变更之后的更改也很麻烦</h5><h5 id="接口允许多个信号被整合到一起，用于表示单一的抽象端口"><a href="#接口允许多个信号被整合到一起，用于表示单一的抽象端口" class="headerlink" title="接口允许多个信号被整合到一起，用于表示单一的抽象端口"></a>接口允许多个信号被整合到一起，用于表示单一的抽象端口</h5><h5 id="多个模块可以使用同一个接口，避免分散端口信号连接"><a href="#多个模块可以使用同一个接口，避免分散端口信号连接" class="headerlink" title="多个模块可以使用同一个接口，避免分散端口信号连接"></a>多个模块可以使用同一个接口，避免分散端口信号连接</h5><h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><h5 id="interface-main-bus"><a href="#interface-main-bus" class="headerlink" title="interface main_bus;"></a>interface main_bus;</h5><p>&nbsp; &nbsp;…;
&nbsp; &nbsp;…;
endinterface</p>
<p>main_bus bus();&nbsp; &nbsp;// 接口实例</p>
<h5 id="接口不止可以包含-变量或者线网，还可以封装模块之间通信的协议"><a href="#接口不止可以包含-变量或者线网，还可以封装模块之间通信的协议" class="headerlink" title="接口不止可以包含 变量或者线网，还可以封装模块之间通信的协议"></a>接口不止可以包含 变量或者线网，还可以封装模块之间通信的协议</h5><h5 id="还可以嵌入与协议有关的断言检查、功能覆盖率收集等模块"><a href="#还可以嵌入与协议有关的断言检查、功能覆盖率收集等模块" class="headerlink" title="还可以嵌入与协议有关的断言检查、功能覆盖率收集等模块"></a>还可以嵌入与协议有关的断言检查、功能覆盖率收集等模块</h5><h5 id="接口不同于模块的地方在于，接口不允许包含设计层次，即接口无法例化模块，但是接口可以例化接口"><a href="#接口不同于模块的地方在于，接口不允许包含设计层次，即接口无法例化模块，但是接口可以例化接口" class="headerlink" title="接口不同于模块的地方在于，接口不允许包含设计层次，即接口无法例化模块，但是接口可以例化接口"></a>接口不同于模块的地方在于，接口不允许包含设计层次，即接口无法例化模块，但是接口可以例化接口</h5><h5 id="可以在接口的声明modport，来约束不同模块连接时信号灯方向"><a href="#可以在接口的声明modport，来约束不同模块连接时信号灯方向" class="headerlink" title="可以在接口的声明modport，来约束不同模块连接时信号灯方向"></a>可以在接口的声明modport，来约束不同模块连接时信号灯方向</h5><h4 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h4><h5 id="接口定义和模块定义类似"><a href="#接口定义和模块定义类似" class="headerlink" title="接口定义和模块定义类似"></a>接口定义和模块定义类似</h5><h5 id="也可以有端口，例如外部接入的时钟或者复位信号；"><a href="#也可以有端口，例如外部接入的时钟或者复位信号；" class="headerlink" title="也可以有端口，例如外部接入的时钟或者复位信号；"></a>也可以有端口，例如外部接入的时钟或者复位信号；</h5><p>interface main_bus (input logic clock, resetN, test_mode);</p>
<h4 id="例化"><a href="#例化" class="headerlink" title="例化"></a>例化</h4><h5 id="接口的例化方式和模块的例化方式一致"><a href="#接口的例化方式和模块的例化方式一致" class="headerlink" title="接口的例化方式和模块的例化方式一致"></a>接口的例化方式和模块的例化方式一致</h5><h5 id="模块的端口如果声明为input、output、inout，那么在例化时可以不连接"><a href="#模块的端口如果声明为input、output、inout，那么在例化时可以不连接" class="headerlink" title="模块的端口如果声明为input、output、inout，那么在例化时可以不连接"></a>模块的端口如果声明为input、output、inout，那么在例化时可以不连接</h5><h5 id="模块的端口如果声明为interface，那么在例化时必须连接到一个接口的实例，或者另一个接口端口"><a href="#模块的端口如果声明为interface，那么在例化时必须连接到一个接口的实例，或者另一个接口端口" class="headerlink" title="模块的端口如果声明为interface，那么在例化时必须连接到一个接口的实例，或者另一个接口端口"></a>模块的端口如果声明为interface，那么在例化时必须连接到一个接口的实例，或者另一个接口端口</h5><h5 id="如果一个模块拥有一个接口类型的端口，那么索引这个接口中的信号，需要通过-操作符，"><a href="#如果一个模块拥有一个接口类型的端口，那么索引这个接口中的信号，需要通过-操作符，" class="headerlink" title="如果一个模块拥有一个接口类型的端口，那么索引这个接口中的信号，需要通过.操作符，"></a>如果一个模块拥有一个接口类型的端口，那么索引这个接口中的信号，需要通过.操作符，</h5><p>bus.resetN</p>
<h4 id="modport"><a href="#modport" class="headerlink" title="modport"></a>modport</h4><h5 id="接口的线网信号或者变量，对于连接到这个接口的不同模块可能有不同的连接方向，所以引入modport表示不同模块看到同一组信号时的视角方向"><a href="#接口的线网信号或者变量，对于连接到这个接口的不同模块可能有不同的连接方向，所以引入modport表示不同模块看到同一组信号时的视角方向" class="headerlink" title="接口的线网信号或者变量，对于连接到这个接口的不同模块可能有不同的连接方向，所以引入modport表示不同模块看到同一组信号时的视角方向"></a>接口的线网信号或者变量，对于连接到这个接口的不同模块可能有不同的连接方向，所以引入modport表示不同模块看到同一组信号时的视角方向</h5><h5 id="在接口中声明modport，需要指名modport中各个信号灯方向"><a href="#在接口中声明modport，需要指名modport中各个信号灯方向" class="headerlink" title="在接口中声明modport，需要指名modport中各个信号灯方向"></a>在接口中声明modport，需要指名modport中各个信号灯方向</h5><h5 id="当一个模块在例化时，可以选择连接到interface端口中具体的某一个modport"><a href="#当一个模块在例化时，可以选择连接到interface端口中具体的某一个modport" class="headerlink" title="当一个模块在例化时，可以选择连接到interface端口中具体的某一个modport"></a>当一个模块在例化时，可以选择连接到interface端口中具体的某一个modport</h5><h5 id="这种方式可以降低连接方向错误的可能，避免信号多驱动的情况"><a href="#这种方式可以降低连接方向错误的可能，避免信号多驱动的情况" class="headerlink" title="这种方式可以降低连接方向错误的可能，避免信号多驱动的情况"></a>这种方式可以降低连接方向错误的可能，避免信号多驱动的情况</h5><h5 id="interface-chip-bus-…"><a href="#interface-chip-bus-…" class="headerlink" title="interface chip_bus(…);"></a>interface chip_bus(…);</h5><pre><code>modport master(...);
</code></pre>
<p>   modport slave(…);
endinterface</p>
<p>module primary(interface pins); //通用接口端口
…
endmodule</p>
<p>module secondary (chip_bus pins);&nbsp; &nbsp;// 特定接口端口
…
endmodule</p>
<p>module chip (…);
&nbsp; &nbsp;chip_bus bus(..);&nbsp; &nbsp; // 接口实例
&nbsp; &nbsp;primary i1 (bus.master);&nbsp; &nbsp; // 使用master modport方式
    secondary i2(bus.slave);&nbsp; &nbsp;// 使用slave modport方式
endmodule</p>
<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><h5 id="利用接口，可以将测试平台和DUT连接在一起"><a href="#利用接口，可以将测试平台和DUT连接在一起" class="headerlink" title="利用接口，可以将测试平台和DUT连接在一起"></a>利用接口，可以将测试平台和DUT连接在一起</h5><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><h5 id="接口对于设计复用很有利"><a href="#接口对于设计复用很有利" class="headerlink" title="接口对于设计复用很有利"></a>接口对于设计复用很有利</h5><h5 id="接口减少了模块之间错误连接的可能性"><a href="#接口减少了模块之间错误连接的可能性" class="headerlink" title="接口减少了模块之间错误连接的可能性"></a>接口减少了模块之间错误连接的可能性</h5><h5 id="如果添加了新的信号，只需要在接口中声明，不需要在每个模块中声明"><a href="#如果添加了新的信号，只需要在接口中声明，不需要在每个模块中声明" class="headerlink" title="如果添加了新的信号，只需要在接口中声明，不需要在每个模块中声明"></a>如果添加了新的信号，只需要在接口中声明，不需要在每个模块中声明</h5><h5 id="由于接口可以将有关信号都集合在一起，可以在使用这些信号时，需要添加接口实例名"><a href="#由于接口可以将有关信号都集合在一起，可以在使用这些信号时，需要添加接口实例名" class="headerlink" title="由于接口可以将有关信号都集合在一起，可以在使用这些信号时，需要添加接口实例名"></a>由于接口可以将有关信号都集合在一起，可以在使用这些信号时，需要添加接口实例名</h5><h5 id="一种接口往往将有关信号集合在一起，因此，对于拥有多组不相关信号的设计而言，需要多个接口才能完成与其他模块的连接"><a href="#一种接口往往将有关信号集合在一起，因此，对于拥有多组不相关信号的设计而言，需要多个接口才能完成与其他模块的连接" class="headerlink" title="一种接口往往将有关信号集合在一起，因此，对于拥有多组不相关信号的设计而言，需要多个接口才能完成与其他模块的连接"></a>一种接口往往将有关信号集合在一起，因此，对于拥有多组不相关信号的设计而言，需要多个接口才能完成与其他模块的连接</h5><h3 id="其他注意点："><a href="#其他注意点：" class="headerlink" title="其他注意点："></a>其他注意点：</h3><h4 id="四值逻辑，比如reg、logic、integer，在仿真开始时的初始值为X"><a href="#四值逻辑，比如reg、logic、integer，在仿真开始时的初始值为X" class="headerlink" title="四值逻辑，比如reg、logic、integer，在仿真开始时的初始值为X"></a>四值逻辑，比如reg、logic、integer，在仿真开始时的初始值为X</h4><h4 id="二值逻辑bit在仿真开始的初值为0"><a href="#二值逻辑bit在仿真开始的初值为0" class="headerlink" title="二值逻辑bit在仿真开始的初值为0"></a>二值逻辑bit在仿真开始的初值为0</h4><h4 id="如果四值逻辑和二值逻辑发生转换，则把X和Z都转为0"><a href="#如果四值逻辑和二值逻辑发生转换，则把X和Z都转为0" class="headerlink" title="如果四值逻辑和二值逻辑发生转换，则把X和Z都转为0"></a>如果四值逻辑和二值逻辑发生转换，则把X和Z都转为0</h4><h4 id="二值逻辑也可以实现可综合电路，但是由于没有X、Z，可能出现仿真行为和综合电路的结果不一致的情况"><a href="#二值逻辑也可以实现可综合电路，但是由于没有X、Z，可能出现仿真行为和综合电路的结果不一致的情况" class="headerlink" title="二值逻辑也可以实现可综合电路，但是由于没有X、Z，可能出现仿真行为和综合电路的结果不一致的情况"></a>二值逻辑也可以实现可综合电路，但是由于没有X、Z，可能出现仿真行为和综合电路的结果不一致的情况</h4><h4 id="SV中还新增了void类型，用于在函数定义时表示无返回值，同C"><a href="#SV中还新增了void类型，用于在函数定义时表示无返回值，同C" class="headerlink" title="SV中还新增了void类型，用于在函数定义时表示无返回值，同C"></a>SV中还新增了void类型，用于在函数定义时表示无返回值，同C</h4><h4 id="SV中添加了shortreal表示32位单精度浮点数，同float；"><a href="#SV中添加了shortreal表示32位单精度浮点数，同float；" class="headerlink" title="SV中添加了shortreal表示32位单精度浮点数，同float；"></a>SV中添加了shortreal表示32位单精度浮点数，同float；</h4><p>而verilog中的real表示双精度浮点型，同double</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-09T08:22:23.000Z" title="5/9/2022, 8:22:23 AM">2022-05-09</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">8 分钟读完 (大约1262个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/">路科V0P5P9SV入门</a></p><div class="content"><h1 id="SV以及UVM概述"><a href="#SV以及UVM概述" class="headerlink" title="SV以及UVM概述"></a>SV以及UVM概述</h1><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/SV%E8%AF%AD%E8%A8%80%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7.png" class="" title="SV语言核心特性">

<p>UVM类库地图 ：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/UVM%E7%B1%BB%E5%BA%93%E5%9C%B0%E5%9B%BE.png" class="" title="UVM类库地图">

<p>UVM常用的十大类：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/UVM%E5%8D%81%E5%A4%A7%E7%B1%BB.png" class="" title="UVM十大类">


<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><ul>
<li>Verilog的数据类型：<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/verilog%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" class="" title="verilog的数据类型">
<ul>
<li>线网类型：</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/verilog%E7%9A%84%E7%BA%BF%E7%BD%91%E7%B1%BB%E5%9E%8B.png" class="" title="线网类型"></li>
<li>变量类型：</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/verilog%E7%9A%84%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B.png" class="" title="变量类型"></li>
</ul>
</li>
<li>SV新添加的数据类型：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/SV%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" class="" title="SV新添加的数据类型">
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%9B%9B%E5%80%BC%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" class="" title="四值逻辑数据类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%9B%9B%E5%80%BC%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B2.png" class="" title="四值逻辑数据类型2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%9B%9B%E5%80%BC%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B3.png" class="" title="四值逻辑数据类型3"></li>
</ul>
</li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E4%BA%8C%E5%80%BC%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" class="" title="二值逻辑数据类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E4%BA%8C%E5%80%BC%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B2.png" class="" title="二值逻辑数据类型2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9C%89%E7%AC%A6%E5%8F%B7%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%97%A0%E7%AC%A6%E5%8F%B7%E7%B1%BB%E5%9E%8B.png" class="" title="有符号类型和无符号类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9C%89%E7%AC%A6%E5%8F%B7%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%97%A0%E7%AC%A6%E5%8F%B7%E7%B1%BB%E5%9E%8B2.png" class="" title="有符号类型和无符号类型2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E4%BB%BF%E7%9C%9F%E8%A1%8C%E4%B8%BA.png" class="" title="仿真行为"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E4%BB%BF%E7%9C%9F%E8%A1%8C%E4%B8%BA2.png" class="" title="仿真行为2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B.png" class="" title="其他类型"></li>
</ul>
</li>
</ul>
<h1 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a>自定义类型</h1><p>SV的自定义类型：</p>
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B.png" class="" title="自定义类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B2.png" class="" title="自定义类型2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B3.png" class="" title="自定义类型3"></li>
</ul>
<p>枚举类型：</p>
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B.png" class="" title="枚举类型"></li>
<li>verilog实现枚举 <ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%AE%9E%E4%BE%8B.png" class="" title="枚举类型实例"></li>
</ul>
</li>
<li>SV实现枚举：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%AE%9E%E4%BE%8B2.png" class="" title="枚举类型实例2"></li>
</ul>
</li>
<li>定义枚举值：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE%E5%80%BC.png" class="" title="定义枚举值"></li>
</ul>
</li>
<li>自定义枚举类型：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B.png" class="" title="自定义枚举类型"></li>
</ul>
</li>
<li>枚举类型赋值：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E8%B5%8B%E5%80%BC.png" class="" title="枚举类型赋值"></li>
</ul>
</li>
</ul>
<p>结构体类型：</p>
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B.png" class="" title="结构体类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B2.png" class="" title="结构体类型2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B3.png" class="" title="结构体类型3"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B4.png" class="" title="结构体类型4"></li>
</ul>
<h1 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h1><p>SV中的字符串类型：</p>
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B.png" class="" title="字符串类型"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B2.png" class="" title="字符串类型2"></li>
</ul>
<p>字符串类型的常见使用方式：</p>
<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F.png" class="" title="字符串类型常见使用方式"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%86%85%E5%BB%BA%E6%96%B9%E6%B3%95.png" class="" title="字符串的内建方法"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F2.png" class="" title="字符串类型常见使用方式2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F3.png" class="" title="字符串类型常见使用方式3"></li>
</ul>
<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3.png" class="" title="接口"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A32.png" class="" title="接口2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A33.png" class="" title="接口3"></li>
<li>verilog无接口代码：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/verilog%E6%97%A0%E6%8E%A5%E5%8F%A3.png" class="" title="verilog无接口"></li>
</ul>
</li>
<li>接口的优势：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BC%98%E5%8A%BF.png" class="" title="接口的优势"></li>
</ul>
</li>
<li>SV接口代码：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/SV%E6%9C%89%E6%8E%A5%E5%8F%A3.png" class="" title="SV有接口"></li>
</ul>
</li>
<li>接口的内容：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%86%85%E5%AE%B9.png" class="" title="接口的内容"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%86%85%E5%AE%B92.png" class="" title="接口的内容2"></li>
</ul>
</li>
<li>接口的声明：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%A3%B0%E6%98%8E.png" class="" title="接口的声明"></li>
</ul>
</li>
<li>接口的例化：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BE%8B%E5%8C%96.png" class="" title="接口的例化"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BE%8B%E5%8C%962.png" class="" title="接口的例化2"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BE%8B%E5%8C%963.png" class="" title="接口的例化3"></li>
</ul>
</li>
<li>modport:<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/modport.png" class="" title="modport"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/modport2.png" class="" title="modport2"></li>
</ul>
</li>
<li>接口在验证中的应用：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%8E%A5%E5%8F%A3%E5%9C%A8%E9%AA%8C%E8%AF%81%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8.png" class="" title="接口在验证中的应用"></li>
</ul>
</li>
<li>总结：<ul>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%80%BB%E7%BB%93.png" class="" title="总结"></li>
<li><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p5p9sv%E5%85%A5%E9%97%A8/%E6%80%BB%E7%BB%932.png" class="" title="总结2"></li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-09T07:57:13.000Z" title="5/9/2022, 7:57:13 AM">2022-05-09</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">1 分钟读完 (大约141个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/">路科V0P1P2P4验证概览</a></p><div class="content"><h1 id="什么是验证"><a href="#什么是验证" class="headerlink" title="什么是验证"></a>什么是验证</h1><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AA%8C%E8%AF%81.png" class="" title="什么是验证">

<p>什么是验证?</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AA%8C%E8%AF%812.png" class="" title="什么是验证2">

<p>测试平台：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0.png" class="" title="什么是测试平台">


<h1 id="验证的任务和目标"><a href="#验证的任务和目标" class="headerlink" title="验证的任务和目标"></a>验证的任务和目标</h1><p>验证的目标：</p>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/%E9%AA%8C%E8%AF%81%E7%9A%84%E7%9B%AE%E6%A0%87.png" class="" title="验证的目标">


<h1 id="验证的周期"><a href="#验证的周期" class="headerlink" title="验证的周期"></a>验证的周期</h1><img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1p2p4%E9%AA%8C%E8%AF%81%E6%A6%82%E8%A7%88/%E9%AA%8C%E8%AF%81%E5%91%A8%E6%9C%9F.png" class="" title="验证周期"></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-05-09T07:02:06.000Z" title="5/9/2022, 7:02:06 AM">2022-05-09</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E8%B7%AF%E7%A7%91V0/">路科V0</a></span><span class="level-item">2 分钟读完 (大约249个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/">路科V0P1SV学习</a></p><div class="content"><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1k7411H7Jo?spm_id_from=333.337.search-card.all.click">Bilibili</a></p>
</blockquote>
<p>几个必备技术要求：</p>
<ul>
<li>动态验证技术<ul>
<li>代码覆盖率</li>
<li>功能覆盖率</li>
<li>断言</li>
<li>随机约束</li>
</ul>
</li>
<li>静态验证技术<ul>
<li>人工的形式验证（属性检查）</li>
<li>自动的形式验证</li>
</ul>
</li>
<li>硬件加速技术<ul>
<li>Emulation以及FPGA原型开发</li>
</ul>
</li>
</ul>
<p>背景要求：</p>
<ul>
<li>课程：<ul>
<li>数字电路</li>
<li>Verilog</li>
<li>C/C++</li>
</ul>
</li>
</ul>
<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E5%8A%A8%E6%80%81%E9%AA%8C%E8%AF%81%E6%8A%80%E6%9C%AF.png" class="" title="动态验证技术">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E9%9D%99%E6%80%81%E9%AA%8C%E8%AF%81%E6%8A%80%E6%9C%AF.png" class="" title="静态验证技术">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F.png" class="" title="硬件加速">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/QuestaSim%E4%BB%BF%E7%9C%9F%E5%99%A8.png" class="" title="QuestaSim仿真器">


<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E5%A4%A7%E8%B1%A1%E8%A3%85%E8%BF%9B%E5%86%B0%E7%AE%B1lab.png" class="" title="大象装进冰箱lab">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E8%B5%84%E6%96%99%E4%B9%A6.png" class="" title="资料书">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/DVT%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.png" class="" title="DVT集成开发环境">

<img src="/%E8%B7%AF%E7%A7%91V0/%E8%B7%AF%E7%A7%91v0p1sv%E5%AD%A6%E4%B9%A0/%E5%85%B6%E4%BB%96%E8%AF%BE%E7%A8%8B.png" class="" title="其他课程">

</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="PPOffice"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">PPOffice</p><p class="is-size-6 is-block">Web Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth, Solar System</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">124</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">34</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">60</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="me noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Configuration/"><span class="level-start"><span class="level-item">Configuration</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/IC%E9%AA%8C%E8%AF%81/"><span class="level-start"><span class="level-item">IC验证</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Leetcode/"><span class="level-start"><span class="level-item">Leetcode</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/NLP/EDA/"><span class="level-start"><span class="level-item">EDA</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/Numpy/"><span class="level-start"><span class="level-item">Numpy</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NLP/Torch/"><span class="level-start"><span class="level-item">Torch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/NLP/Torch/Model/"><span class="level-start"><span class="level-item">Model</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/NLP%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/"><span class="level-start"><span class="level-item">NLP代码详解</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/"><span class="level-start"><span class="level-item">NXP</span></span><span class="level-end"><span class="level-item tag">16</span></span></a><ul><li><a class="level is-mobile" href="/categories/NXP/KW38/"><span class="level-start"><span class="level-item">KW38</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/RT1050EVKB/"><span class="level-start"><span class="level-item">RT1050EVKB</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/NXP/RT1052/"><span class="level-start"><span class="level-item">RT1052</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/NXP/RT1052/%E9%87%8E%E7%81%AB/"><span class="level-start"><span class="level-item">野火</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/Plugins/"><span class="level-start"><span class="level-item">Plugins</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul><li><a class="level is-mobile" href="/categories/Plugins/Analytics/"><span class="level-start"><span class="level-item">Analytics</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Comment/"><span class="level-start"><span class="level-item">Comment</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Donation/"><span class="level-start"><span class="level-item">Donation</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Other/"><span class="level-start"><span class="level-item">Other</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Search/"><span class="level-start"><span class="level-item">Search</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Plugins/Share/"><span class="level-start"><span class="level-item">Share</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ReferenceManual/"><span class="level-start"><span class="level-item">ReferenceManual</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/STL/"><span class="level-start"><span class="level-item">STL</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/STL/forward-list/"><span class="level-start"><span class="level-item">forward_list</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/STL/vector/"><span class="level-start"><span class="level-item">vector</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Widgets/"><span class="level-start"><span class="level-item">Widgets</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="level-start"><span class="level-item">嵌入式</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/"><span class="level-start"><span class="level-item">代码解读</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/%E4%B8%AD%E6%96%AD/"><span class="level-start"><span class="level-item">中断</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">工具</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/vim/"><span class="level-start"><span class="level-item">vim</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E5%AD%97IC/"><span class="level-start"><span class="level-item">数字IC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%8B%B1%E8%AF%AD/"><span class="level-start"><span class="level-item">英语</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%B7%AF%E7%A7%91V0/"><span class="level-start"><span class="level-item">路科V0</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-11T06:11:12.000Z">2023-12-11</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC7%E8%8A%82-rt1050-%E7%A1%AC%E4%BB%B6%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/">RT1050开发--第7节 RT1050 硬件启动模式</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-11T05:37:29.000Z">2023-12-11</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC6%E8%8A%82-rt1050-memory-mapping/">RT1050开发--第6节 RT1050 Memory Mapping</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-05T14:28:25.000Z">2023-12-05</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC5%E8%8A%82-rt1050-hello-world-%EF%BC%88keil-v5%EF%BC%89/">RT1050开发--第5节 RT1050 Hello World （Keil V5）</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-04T14:33:36.000Z">2023-12-04</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC4%E8%8A%82-rt1050%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">RT1050开发--第4节 RT1050开发环境搭建</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-04T14:31:32.000Z">2023-12-04</time></p><p class="title"><a href="/NXP/RT1050EVKB/rt1050%E5%BC%80%E5%8F%91-%E7%AC%AC3%E8%8A%82-rt1050%E7%A1%AC%E4%BB%B6%E5%B9%B3%E5%8F%B0/">RT1050开发--第3节 RT1050硬件平台</a></p><p class="categories"><a href="/categories/NXP/">NXP</a> / <a href="/categories/NXP/RT1050EVKB/">RT1050EVKB</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">十二月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">三月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/01/"><span class="level-start"><span class="level-item">一月 2017</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/01/"><span class="level-start"><span class="level-item">一月 2016</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">一月 2015</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">一月 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/01/"><span class="level-start"><span class="level-item">一月 2013</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ARM/"><span class="tag">ARM</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLE/"><span class="tag">BLE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BOARD/"><span class="tag">BOARD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Demo/"><span class="tag">Demo</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FLASH/"><span class="tag">FLASH</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPIO/"><span class="tag">GPIO</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPIO%E4%B8%AD%E6%96%AD/"><span class="tag">GPIO中断</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Getting-Started/"><span class="tag">Getting Started</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IC%E9%AA%8C%E8%AF%81/"><span class="tag">IC验证</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Icarus-User-Guide/"><span class="tag">Icarus User Guide</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97/"><span class="tag">Icarus用户指南</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LED/"><span class="tag">LED</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Leetcode/"><span class="tag">Leetcode</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Model/"><span class="tag">Model</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NXP/"><span class="tag">NXP</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PDF/"><span class="tag">PDF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RAM/"><span class="tag">RAM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROM/"><span class="tag">ROM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RT1050EVKB/"><span class="tag">RT1050EVKB</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RT1052/"><span class="tag">RT1052</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReferenceManual/"><span class="tag">ReferenceManual</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/STL/"><span class="tag">STL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Verilog/"><span class="tag">System Verilog</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Thread/"><span class="tag">Thread</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Torch/"><span class="tag">Torch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UART/"><span class="tag">UART</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UVM/"><span class="tag">UVM</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZigBee/"><span class="tag">ZigBee</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyTorch/"><span class="tag">pyTorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vector/"><span class="tag">vector</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"><span class="tag">二分查找</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/"><span class="tag">代码解读</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/"><span class="tag">代码随想录</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%8E%E5%8A%9F%E8%80%97%E8%AE%A1%E6%97%B6%E5%99%A8LPTMR/"><span class="tag">低功耗计时器LPTMR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"><span class="tag">双指针</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%A8%E6%9C%9F%E4%B8%AD%E6%96%AD%E8%AE%A1%E6%97%B6%E5%99%A8PIT/"><span class="tag">周期中断计时器PIT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9F%BA%E7%A1%80/"><span class="tag">基础</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9FRTC/"><span class="tag">实时时钟RTC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="tag">嵌入式</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">总结</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2/"><span class="tag">数据探索</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E7%BB%84/"><span class="tag">数组</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E5%B9%B3%E6%96%B9/"><span class="tag">有序数组的平方</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"><span class="tag">滑动窗口</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/"><span class="tag">理论基础</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0/"><span class="tag">移除元素</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%BB%E9%99%A4%E9%93%BE%E8%A1%A8%E5%85%83%E7%B4%A0/"><span class="tag">移除链表元素</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%80%83%E7%A0%94%E8%8B%B1%E8%AF%AD100%E5%8F%A5/"><span class="tag">考研英语100句</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%8B%B1%E8%AF%AD/"><span class="tag">英语</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5%E2%85%A1/"><span class="tag">螺旋矩阵Ⅱ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E6%97%B6%E5%99%A8PWM%E6%A8%A1%E5%9D%97TPM/"><span class="tag">计时器PWM模块TPM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B/"><span class="tag">设计流程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%87%8E%E7%81%AB/"><span class="tag">野火</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"><span class="tag">长度最小的子数组</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="DustOfStars" height="28"></a><p class="is-size-7"><span>&copy; 2024 Gavin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>